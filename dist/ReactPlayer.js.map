{"version":3,"sources":["webpack://ReactPlayer/webpack/bootstrap","webpack://ReactPlayer/external \"React\"","webpack://ReactPlayer/./src/utils.js","webpack://ReactPlayer/./src/patterns.js","webpack://ReactPlayer/./node_modules/node-libs-browser/node_modules/buffer/index.js","webpack://ReactPlayer/./node_modules/process/browser.js","webpack://ReactPlayer/./node_modules/prop-types/index.js","webpack://ReactPlayer/./node_modules/events/events.js","webpack://ReactPlayer/./node_modules/debug/src/browser.js","webpack://ReactPlayer/(webpack)/buildin/global.js","webpack://ReactPlayer/./node_modules/readable-stream/errors-browser.js","webpack://ReactPlayer/./node_modules/inherits/inherits_browser.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/_stream_duplex.js","webpack://ReactPlayer/./node_modules/react-fast-compare/index.js","webpack://ReactPlayer/./node_modules/safe-buffer/index.js","webpack://ReactPlayer/./node_modules/deepmerge/dist/cjs.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-hlsjs/dist/index.js","webpack://ReactPlayer/./node_modules/@babel/runtime/helpers/inheritsLoose.js","webpack://ReactPlayer/./node_modules/@videojs/vhs-utils/dist/stream.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/index.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/stringly-typed-event-emitter.js","webpack://ReactPlayer/./node_modules/simple-peer/index.js","webpack://ReactPlayer/./node_modules/randombytes/browser.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/internal/streams/end-of-stream.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/loader-interface.js","webpack://ReactPlayer/./node_modules/ms/index.js","webpack://ReactPlayer/./node_modules/get-browser-rtc/index.js","webpack://ReactPlayer/./node_modules/readable-stream/readable-browser.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/_stream_readable.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/internal/streams/stream-browser.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/internal/streams/destroy.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/internal/streams/state.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/_stream_writable.js","webpack://ReactPlayer/./node_modules/node-libs-browser/node_modules/string_decoder/lib/string_decoder.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/_stream_transform.js","webpack://ReactPlayer/./node_modules/queue-microtask/index.js","webpack://ReactPlayer/./node_modules/bittorrent-tracker/lib/common.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/media-peer.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-hlsjs/dist/segment-manager.js","webpack://ReactPlayer/./node_modules/load-script/index.js","webpack://ReactPlayer/./node_modules/@babel/runtime/helpers/extends.js","webpack://ReactPlayer/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://ReactPlayer/./node_modules/@videojs/vhs-utils/dist/decode-b64-to-uint8-array.js","webpack://ReactPlayer/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://ReactPlayer/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-hlsjs/dist/engine.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/hybrid-loader.js","webpack://ReactPlayer/./node_modules/debug/src/common.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/http-media-manager.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/p2p-media-manager.js","webpack://ReactPlayer/./node_modules/bittorrent-tracker/client.js","webpack://ReactPlayer/./node_modules/base64-js/index.js","webpack://ReactPlayer/./node_modules/ieee754/index.js","webpack://ReactPlayer/./node_modules/node-libs-browser/node_modules/isarray/index.js","webpack://ReactPlayer/./node_modules/once/once.js","webpack://ReactPlayer/./node_modules/wrappy/wrappy.js","webpack://ReactPlayer/./node_modules/run-parallel/index.js","webpack://ReactPlayer/./node_modules/simple-peer/node_modules/debug/src/browser.js","webpack://ReactPlayer/./node_modules/simple-peer/node_modules/debug/src/common.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/internal/streams/buffer_list.js","webpack://ReactPlayer/./node_modules/util-deprecate/browser.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/internal/streams/async_iterator.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/internal/streams/from-browser.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/_stream_passthrough.js","webpack://ReactPlayer/./node_modules/readable-stream/lib/internal/streams/pipeline.js","webpack://ReactPlayer/./node_modules/err-code/index.js","webpack://ReactPlayer/./node_modules/bittorrent-tracker/lib/client/websocket-tracker.js","webpack://ReactPlayer/./node_modules/simple-websocket/index.js","webpack://ReactPlayer/./node_modules/bittorrent-tracker/lib/client/tracker.js","webpack://ReactPlayer/./node_modules/sha.js/sha1.js","webpack://ReactPlayer/./node_modules/sha.js/hash.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/bandwidth-approximator.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-core/dist/segments-memory-storage.js","webpack://ReactPlayer/./node_modules/m3u8-parser/dist/m3u8-parser.es.js","webpack://ReactPlayer/./node_modules/global/window.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-hlsjs/dist/hlsjs-loader.js","webpack://ReactPlayer/./node_modules/p2p-media-loader-hlsjs/dist/hlsjs-loader-class.js","webpack://ReactPlayer/./src/players/index.js","webpack://ReactPlayer/./node_modules/memoize-one/dist/memoize-one.esm.js","webpack://ReactPlayer/./src/props.js","webpack://ReactPlayer/./src/Player.js","webpack://ReactPlayer/./src/ReactPlayer.js","webpack://ReactPlayer/./src/index.js","webpack://ReactPlayer/./src/players/YouTube.js","webpack://ReactPlayer/./src/players/SoundCloud.js","webpack://ReactPlayer/./src/players/Vimeo.js","webpack://ReactPlayer/./src/players/Facebook.js","webpack://ReactPlayer/./src/players/Streamable.js","webpack://ReactPlayer/./src/players/Wistia.js","webpack://ReactPlayer/./src/players/Twitch.js","webpack://ReactPlayer/./src/players/DailyMotion.js","webpack://ReactPlayer/./src/players/Mixcloud.js","webpack://ReactPlayer/./src/players/Vidyard.js","webpack://ReactPlayer/./src/players/HlsJsP2P.js","webpack://ReactPlayer/./src/players/FilePlayer.js","webpack://ReactPlayer/./src/Preview.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","0","__webpack_require__","exports","module","l","e","Promise","resolve","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","oe","err","console","error","jsonpArray","window","oldJsonpFunction","slice","s","React","MATCH_START_QUERY","MATCH_END_QUERY","MATCH_START_STAMP","MATCH_NUMERIC","parseTimeParam","url","pattern","Array","match","stamp","seconds","array","exec","count","period","parseInt","parseTimeString","test","parseStartTime","parseEndTime","randomString","Math","random","toString","substr","queryString","keys","map","join","getGlobal","requests","getSDK","sdkGlobal","sdkReady","isLoaded","fetchScript","loadScript","existingGlobal","reject","onLoaded","sdk","forEach","request","previousOnReady","omit","arrays","omitKeys","concat","output","indexOf","callPlayer","method","this","player","message","constructor","displayName","warn","args","isMediaStream","MediaStream","isBlobUrl","supportsWebKitPresentationMode","video","document","createElement","notMobile","navigator","userAgent","webkitSupportsPresentationMode","webkitSetPresentationMode","MATCH_URL_YOUTUBE","MATCH_URL_SOUNDCLOUD","MATCH_URL_VIMEO","MATCH_URL_FACEBOOK","MATCH_URL_FACEBOOK_WATCH","MATCH_URL_STREAMABLE","MATCH_URL_WISTIA","MATCH_URL_TWITCH_VIDEO","MATCH_URL_TWITCH_CHANNEL","MATCH_URL_DAILYMOTION","MATCH_URL_MIXCLOUD","MATCH_URL_VIDYARD","AUDIO_EXTENSIONS","VIDEO_EXTENSIONS","HLS_EXTENSIONS","DASH_EXTENSIONS","FLV_EXTENSIONS","canPlayFile","item","src","canPlay","youtube","every","soundcloud","vimeo","facebook","streamable","wistia","twitch","dailymotion","mixcloud","vidyard","hlsjsp2p","file","base64","require","ieee754","isArray","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","RangeError","Uint8Array","__proto__","arg","encodingOrOffset","Error","allocUnsafe","from","TypeError","ArrayBuffer","byteOffset","byteLength","undefined","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","obj","isBuffer","len","checked","copy","buffer","val","type","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","toLowerCase","slowToString","start","end","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","b","bidirectionalIndexOf","dir","isNaN","arrayIndexOf","lastIndexOf","arr","indexSize","arrLength","valLength","String","read","buf","readUInt16BE","foundIndex","found","j","hexWrite","offset","Number","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","str","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","min","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","apply","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","configurable","fill","allocUnsafeSlow","_isBuffer","compare","a","x","y","list","pos","swap16","swap32","swap64","arguments","equals","inspect","max","target","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","toJSON","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","set","code","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","trim","replace","stringtrim","base64clean","dst","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","timeout","run","marker","runClearTimeout","Item","noop","nextTick","title","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","ReflectOwnKeys","R","Reflect","ReflectApply","receiver","Function","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","EventEmitter","init","emitter","eventListener","errorListener","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","_addListener","prepend","events","existing","warning","newListener","unshift","warned","w","onceWrapper","fired","wrapFn","_onceWrap","state","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","context","handler","position","originalListener","index","pop","spliceOne","rawListeners","eventNames","log","formatArgs","useColors","namespace","humanize","diff","color","splice","lastC","save","namespaces","storage","setItem","removeItem","load","getItem","DEBUG","__nwjs","documentElement","style","WebkitAppearance","firebug","exception","table","RegExp","$1","localStorage","localstorage","colors","formatters","v","JSON","stringify","g","codes","createErrorType","Base","NodeError","_Base","subClass","superClass","arg1","arg2","arg3","getMessage","oneOf","expected","thing","determiner","search","msg","this_len","substring","endsWith","ctor","superCtor","super_","writable","TempCtor","objectKeys","Duplex","Readable","Writable","options","allowHalfOpen","readable","onend","_writableState","ended","onEndNT","self","highWaterMark","getBuffer","_readableState","destroyed","hasElementType","Element","hasMap","Map","hasSet","Set","hasArrayBuffer","equal","it","entries","next","done","has","source","flags","valueOf","$$typeof","copyProps","SafeBuffer","isMergeableObject","isNonNullObject","stringValue","REACT_ELEMENT_TYPE","isReactElement","isSpecial","cloneUnlessOtherwiseSpecified","clone","deepmerge","defaultArrayMerge","element","getKeys","filter","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","_","mergeObject","destination","propertyIsUnsafe","customMerge","getMergeFunction","arrayMerge","sourceIsArray","all","reduce","prev","deepmerge_1","__export","initHlsJsPlayer","config","loader","getEngine","initHlsJsEvents","engine","_event","frag","byterange","byteRange","setPlayingSegment","duration","destroy","errorData","details","htmlMediaElement","media","el_","setPlayingSegmentByCurrentTime","currentTime","initClapprPlayer","playback","core","getCurrentPlayback","_hls","_p2pm_linitialized","initFlowplayerHlsJsPlayer","hlsjs","hls","initVideoJsContribHlsJsPlayer","ready","tech_","options_","hlsjsConfig","initVideoJsHlsJsPlugin","videojs","Html5Hlsjs","addHook","videojsPlayer","initMediaElementJsPlayer","mediaElement","addEventListener","event","hlsPlayer","initJwPlayer","iid","setInterval","clearInterval","assign","Stream","_proto","trigger","callbacks","_length","_i","dispose","pipe","STEEmitter","debug","getBrowserRTC","randombytes","stream","queueMicrotask","errCode","filterTrickle","sdp","Peer","opts","_id","_debug","channelName","initiator","channelConfig","channelNegotiated","negotiated","offerOptions","answerOptions","sdpTransform","streams","trickle","allowHalfTrickle","iceCompleteTimeout","destroying","_connected","remoteAddress","remoteFamily","remotePort","localAddress","localFamily","localPort","_wrtc","wrtc","_pcReady","_channelReady","_iceComplete","_iceCompleteTimer","_channel","_pendingCandidates","_isNegotiating","_firstNegotiation","_batchedNegotiation","_queuedNegotiation","_sendersAwaitingStable","_senderMap","_closingInterval","_remoteTracks","_remoteStreams","_chunk","_cb","_interval","_pc","RTCPeerConnection","_isReactNativeWebrtc","_peerConnectionId","oniceconnectionstatechange","_onIceStateChange","onicegatheringstatechange","onconnectionstatechange","_onConnectionStateChange","onsignalingstatechange","_onSignalingStateChange","onicecandidate","_onIceCandidate","_setupData","channel","createDataChannel","ondatachannel","addStream","ontrack","_onTrack","_needsNegotiation","_onFinishBound","_onFinish","port","family","address","parse","renegotiate","transceiverRequest","addTransceiver","kind","candidate","remoteDescription","_addIceCandidate","setRemoteDescription","RTCSessionDescription","then","_createAnswer","iceCandidateObj","RTCIceCandidate","addIceCandidate","chunk","send","getTracks","track","addTrack","submap","sender","removed","oldTrack","newTrack","replaceTrack","removeTrack","negotiate","_createOffer","_destroy","cb","finished","close","onmessage","onopen","onclose","onerror","binaryType","bufferedAmountLowThreshold","label","_onChannelMessage","onbufferedamountlow","_onChannelBufferedAmountLow","_onChannelOpen","_onChannelClose","isClosing","readyState","bufferedAmount","destroySoon","createOffer","offer","sendOffer","signal","localDescription","setLocalDescription","getTransceivers","transceiver","mid","requested","createAnswer","answer","sendAnswer","_requestMissingTransceivers","connectionState","iceConnectionState","iceGatheringState","_maybeReady","flattenValues","report","values","getStats","reports","result","names","stat","id","timestamp","_connecting","findCandidatePair","items","remoteCandidates","localCandidates","candidatePairs","foundSelectedCandidatePair","setSelectedCandidatePair","selectedCandidatePair","local","localCandidateId","ip","ipAddress","portNumber","googLocalAddress","split","remote","remoteCandidateId","googRemoteAddress","selectedCandidatePairId","googActiveConnection","selected","_onInterval","unref","signalingState","sdpMLineIndex","sdpMid","_startIceCompleteTimeout","eventStream","some","remoteStream","WEBRTC_SUPPORT","iceServers","urls","sdpSemantics","crypto","msCrypto","getRandomValues","generated","ERR_STREAM_PREMATURE_CLOSE","eos","callback","called","_len","_key","onlegacyfinish","onfinish","writableEnded","readableEnded","endEmitted","onrequest","req","setHeader","abort","isRequest","Events","h","plural","ms","msAbs","isPlural","round","parseFloat","abs","fmtLong","fmtShort","mozRTCPeerConnection","webkitRTCPeerConnection","mozRTCSessionDescription","webkitRTCSessionDescription","mozRTCIceCandidate","webkitRTCIceCandidate","Transform","PassThrough","pipeline","ReadableState","EElistenerCount","OurUint8Array","debugUtil","debuglog","StringDecoder","createReadableStreamAsyncIterator","BufferList","destroyImpl","getHighWaterMark","_require$codes","ERR_INVALID_ARG_TYPE","ERR_STREAM_PUSH_AFTER_EOF","ERR_METHOD_NOT_IMPLEMENTED","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","errorOrDestroy","kProxyEvents","isDuplex","objectMode","readableObjectMode","pipes","pipesCount","flowing","reading","sync","needReadable","emittedReadable","readableListening","resumeScheduled","paused","emitClose","autoDestroy","defaultEncoding","awaitDrain","readingMore","decoder","_read","readableAddChunk","addToFront","skipChunkCheck","emitReadable","emitReadable_","onEofChunk","chunkInvalid","_uint8ArrayToBuffer","addChunk","maybeReadMore","_undestroy","undestroy","isPaused","setEncoding","enc","head","content","clear","howMuchToRead","computeNewHighWaterMark","flow","maybeReadMore_","updateReadableListening","resume","nReadingNextTick","resume_","fromList","first","consume","endReadable","endReadableNT","wState","xs","nOrig","doRead","dest","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","ondrain","ondata","cleanedUp","needDrain","pipeOnDrain","pause","fn","dests","ev","wrap","_this","asyncIterator","_fromList","iterable","emitErrorAndCloseNT","emitErrorNT","emitCloseNT","readableDestroyed","writableDestroyed","errorEmitted","ending","finalCalled","prefinished","rState","ERR_INVALID_OPT_VALUE","duplexKey","hwm","highWaterMarkFrom","CorkedRequest","entry","finish","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","WritableState","internalUtil","deprecate","realHasInstance","ERR_MULTIPLE_CALLBACK","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_DESTROYED","ERR_STREAM_NULL_VALUES","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","nop","writableObjectMode","noDecode","decodeStrings","writing","corked","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","bufferedRequestCount","_write","writev","_writev","_final","doWrite","onwriteDrain","holder","allBuffers","isBuf","callFinal","need","prefinish","current","hasInstance","writeAfterEnd","validChunk","newChunk","decodeChunk","last","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","nb","nenc","retried","_normalizeEncoding","normalizeEncoding","text","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","total","utf8CheckIncomplete","ERR_TRANSFORM_ALREADY_TRANSFORMING","ERR_TRANSFORM_WITH_LENGTH_0","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","transform","_transform","flush","_flush","err2","promise","globalThis","DEFAULT_ANNOUNCE_PEERS","MAX_ANNOUNCE_PEERS","binaryToHex","hexToBinary","MediaPeerCommands","MediaPeerSegmentStatus","Debug","stringly_typed_event_emitter_1","buffer_1","DownloadingSegment","bytesDownloaded","pieces","MediaPeer","peer","settings","downloadingSegmentId","downloadingSegment","segmentsMap","timer","onPeerConnect","onPeerClose","terminateSegmentRequest","onPeerError","onPeerData","command","getJsonCommand","segmentId","SegmentsMap","createSegmentsMap","SegmentRequest","SegmentData","cancelResponseTimeoutTimer","SegmentAbsent","CancelSegmentRequest","receiveSegmentPiece","segmentData","piece","TextDecoder","decode","_a","segments","streamSwarmId","swarmData","segmentsIds","segmentsStatuses","segmentStatus","sendCommand","bytesLeft","bytesToSend","webRtcMaxMessageSize","runResponseTimeoutTimer","cancelSegmentRequest","p2pSegmentDownloadTimeout","p2p_media_loader_core_1","m3u8_parser_1","defaultSettings","forwardSegmentCount","swarmId","assetsStorage","SegmentManager","masterPlaylist","variantPlaylists","segmentRequest","playQueue","onSegmentLoaded","segment","segmentUrl","byterangeToString","segmentByterange","range","onSuccess","downloadBandwidth","onSegmentError","onError","onSegmentAbort","SegmentLoaded","SegmentError","SegmentAbort","requestUrl","responseUrl","parser","Parser","playlist","Playlist","manifest","playlists","variantPlaylist","getStreamSwarmId","streamId","updateSegments","masterSwarmId","getMasterSwarmId","getAsset","asset","xhr","responseURL","responseUri","response","loadContent","storeAsset","masterManifestUri","requestUri","processPlaylist","segmentLocation","getSegmentLocation","byteRangeString","requestRange","segmentSequence","mediaSequence","segmentIndex","loadSegments","urlIndex","findIndex","compareByterange","playPosition","playheadPosition","currentSegmentPosition","getSegmentIndex","requestFirstSegment","playlistSegments","initialSequence","loadSegmentId","priority","getSegmentAbsoluteUrl","uri","getSegmentId","sequence","getSegment","settingsSwarmId","playlistUrl","URL","responseType","XMLHttpRequest","open","setRequestHeader","status","statusText","xhrSetup","getSettings","playlistRequestUrl","b1","b2","stdOnEnd","script","onload","ieOnEnd","onreadystatechange","getElementsByTagName","charset","async","attrs","attr","setAttribute","setAttributes","appendChild","_extends","ReferenceError","_interopDefaultLegacy","window__default","b64Text","decodedString","atob","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","props","propName","componentName","location","propFullName","secret","getShim","isRequired","ReactPropTypes","bool","func","number","any","arrayOf","elementType","instanceOf","node","objectOf","oneOfType","shape","exact","checkPropTypes","PropTypes","events_1","segment_manager_1","hlsjs_loader_1","hlsjs_loader_class_1","Engine","HybridLoader","segmentManager","eventKey","createHlsJsLoaderClass","HlsJsLoader","getDetails","isSupported","loader_interface_1","http_media_manager_1","p2p_media_manager_1","media_peer_1","bandwidth_approximator_1","segments_memory_storage_1","cachedSegmentExpiration","cachedSegmentsCount","useP2P","consumeOnly","requiredSegmentsPriority","simultaneousHttpDownloads","httpDownloadProbability","httpDownloadProbabilityInterval","httpDownloadProbabilitySkipIfNoPeers","httpFailedSegmentTimeout","httpDownloadMaxPriority","httpDownloadInitialTimeout","httpDownloadInitialTimeoutPerSegment","httpUseRanges","simultaneousP2PDownloads","p2pDownloadMaxPriority","trackerAnnounce","peerRequestsPerAnnounce","rtcConfig","debugSegments","segmentsQueue","bandwidthApproximator","BandwidthApproximator","httpDownloadInitialTimeoutTimestamp","processInitialSegmentTimeout","httpRandomDownloadInterval","segmentsStorage","getSegmentsMap","storageSegments","processSegmentsQueue","p2pManager","sendSegmentsMapToAll","downloadRandomSegmentOverHttp","httpManager","getActiveDownloadsCount","getPeers","getOvrallSegmentsMap","pendingQueue","isDownloading","isFailed","download","onPieceBytesDownloaded","peerId","addBytes","now","PieceBytesDownloaded","onPieceBytesUploaded","PieceBytesUploaded","getBandwidth","storeSegment","PeerConnect","sendSegmentsMap","PeerClose","onTrackerUpdate","incomplete","bufferedSegmentsCount","SegmentsMemoryStorage","createHttpManager","createP2PManager","HttpMediaManager","P2PMediaManager","setStreamSwarmId","updateSegmentsMap","find","f","enabled","cleanSegmentsStorage","getPeerId","httpAllowed","firstNotDownloadePriority","httpTimeout","segmentToAbort","downloadedPieces","Loaded","addSegmentToMap","segmentsIdsAndStatuses","getActiveDownloads","LoadingByHttp","clean","queueSegment","performance","browserRtc","selectColor","hash","createDebug","prevTime","curr","Date","coerce","format","formatter","logFn","extend","instances","delimiter","newDebug","toNamespace","regexp","stack","disable","skips","enable","instance","xhrRequests","failedSegments","cleanTimedOutFailedSegments","segmentUrlBuilder","setupXhrEvents","time","prevBytesLoaded","bytesLoaded","loaded","segmentFailure","segmentDownloadFinished","segmentValidator","candidates","Client","sha1","index_1","PEER_ID_VERSION_STRING","PEER_ID_VERSION_PREFIX","PeerSegmentRequest","sementsStorage","trackerClient","peers","peerCandidates","peerSegmentRequests","pendingTrackerClient","onTrackerError","onTrackerWarning","onTrackerPeer","trackerPeer","onPeerDataUpdated","onSegmentRequest","onSegmentAbsent","onSegmentTimeout","peerCandidatesById","peerCandidate","sendSegmentData","sendSegmentAbsent","peerSegmentRequest","description","PEER_ID_SYMBOLS","charAt","TextEncoder","encode","generatePeerId","isDestroyed","infoHash","update","digest","createClient","clientOptions","announce","getAnnounceOpts","numwant","oldTrackerClient","getDownloadingSegmentId","requestSegment","swarmChange","stop","peerCandidateById","overallSegmentsMap","parallel","common","HTTPTracker","UDPTracker","WebSocketTracker","_peerIdBuffer","_peerIdBinary","_infoHashBuffer","_infoHashBinary","_port","_getAnnounceOpts","_rtcConfig","_userAgent","announceUrl","webrtcSupport","nextTickWarn","_trackers","parsedUrl","protocol","Boolean","_defaultAnnounceOpts","_announce","tracker","scrape","intervalMs","tasks","uploaded","downloaded","clientOpts","client","results","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","parts","len2","encodeChunk","lookup","num","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","wrappy","onceStrict","onceError","strict","proto","k","wrapper","pending","isSync","each","task","enumerableOnly","symbols","sym","getOwnPropertyDescriptor","_defineProperty","_defineProperties","descriptor","custom","Constructor","_classCallCheck","tail","protoProps","staticProps","hasStrings","_getString","_getBuffer","getOwnPropertyDescriptors","defineProperties","_objectSpread","depth","customInspect","trace","_Object$setPrototypeO","kLastResolve","kLastReject","kError","kEnded","kLastPromise","kHandlePromise","kStream","createIterResult","readAndResolve","iter","onReadable","AsyncIteratorPrototype","ReadableStreamAsyncIteratorPrototype","setPrototypeOf","lastPromise","wrapForNext","_this2","_Object$create","iterator","ERR_MISSING_ARGS","destroyer","closed","to","popCallback","destroys","ErrClass","Socket","Tracker","socketPool","socket","reconnecting","retries","reconnectTimer","expectingResponse","_openSocket","connected","params","action","info_hash","peer_id","_trackerId","trackerid","_send","_generateOffers","offers","interval","trackerTimeout","_onSocketConnectBound","_onSocketDataBound","_onSocketCloseBound","_onSocketErrorBound","consumers","destroyCleanup","DESTROY_TIMEOUT","_onSocketConnect","_onSocketError","_onSocketData","_onSocketClose","_onAnnounceResponse","_onScrapeResponse","failure","trackerId","complete","_createPeer","to_peer_id","offer_id","offerId","files","_startReconnectTimer","generateOffer","checkDone","onConnect","DEFAULT_ANNOUNCE_INTERVAL","_socketPool","ws","_WebSocket","WebSocket","_ws","OPEN","_onOpen","_onMessage","_onClose","onClose","CLOSED","DOMException","WEBSOCKET_SUPPORT","inherits","Hash","K","W","Sha1","_w","rotl5","rotl30","ft","_b","_c","_d","_e","_update","M","_hash","H","blockSize","finalSize","_block","_finalSize","_blockSize","block","accum","assigned","remainder","rem","bits","lowBits","highBits","NumberWithTime","timeStamp","lastBytes","currentBytesSum","lastBandwidth","maxBandwidth","bandwidth","cache","lastAccessed","cacheItem","lockedSementsfilter","segmentsToDelete","remainingSegments","cachedSegment","countOverhead","sort","LineStream","_Stream","_inheritsLoose","nextNewline","parseAttributes","attributes","ParseStream","customParsers","tagMappers","line","acc","mapper","mappedLine","newLine","tagType","playlistType","allowed","URI","BYTERANGE","_attributes$BYTERANGE","RESOLUTION","resolution","width","height","BANDWIDTH","dateTimeString","dateTimeObject","IV","Uint32Array","PRECISE","addParser","_ref","_this3","expression","customType","dataParser","addTagMapper","_ref2","lineStream","parseStream","currentMap","_assertThisInitialized","uris","currentUri","defaultMediaGroups","currentTimeline","allowCache","discontinuityStarts","lastByterangeEnd","mediaGroup","rendition","tag","endlist","endList","inf","discontinuitySequence","METHOD","KEYFORMAT","KEYID","contentProtection","schemeIdUri","keyId","pssh","decodeB64ToUint8Array","iv","mediaGroups","TYPE","NAME","mediaGroupType","default","DEFAULT","autoselect","AUTOSELECT","LANGUAGE","language","instreamId","CHARACTERISTICS","characteristics","FORCED","forced","discontinuity","targetduration","targetDuration","totalduration","totalDuration","timeOffset","precise","cueOut","cueOutCont","cueIn","timeline","comment","win","stats","_config","loadPlaylist","successPlaylist","loadSegment","rangeStart","rangeEnd","successSegment","abortSegment","trequest","tfirst","tload","downloadTime","HlsJsLoaderClass","impl","lazyPlayer","lazy","canEnablePIP","pictureInPictureEnabled","areInputsEqual","newInputs","lastInputs","memoizeOne","resultFn","isEqual","lastThis","lastResult","lastArgs","calledOnce","newArgs","propTypes","playing","loop","controls","volume","muted","playbackRate","progressInterval","playsinline","pip","stopOnUnmount","light","playIcon","render","playerVars","embedOptions","onUnstarted","appId","playerId","playerOptions","tracks","forceVideo","forceAudio","forceHLS","forceDASH","forceFLV","hlsOptions","hlsVersion","dashVersion","flvVersion","onReady","onStart","onPlay","onPause","onBuffer","onBufferEnd","onEnded","onDuration","onSeek","onProgress","onEnablePIP","onDisablePIP","defaultProps","visual","buying","liking","sharing","show_comments","show_playcount","showinfo","rel","iv_load_policy","modestbranding","api","autopause","byline","portrait","hide_cover","Player","progress","isReady","playedSeconds","getCurrentTime","loadedSeconds","getSecondsLoaded","getDuration","played","prevPlayed","prevLoaded","progressTimeout","progressFrequency","mounted","isLoading","setVolume","loadOnReady","play","handleDurationCheck","isPlaying","startOnPlay","setPlaybackRate","seekOnPlay","seekTo","activePlayer","loopOnEnded","durationCheckTimeout","onDurationCalled","disablePIP","prevProps","forceLoad","enablePIP","mute","unmute","setLoop","amount","onMount","handlePlayerMount","handleReady","handlePlay","handlePause","handleEnded","handleLoaded","handleError","Component","players","fallback","Preview","IS_BROWSER","SUPPORTED_PROPS","UniversalSuspense","Suspense","customPlayers","createReactPlayer","showPreview","setState","getInternalPlayer","fraction","memoize","merge","getActivePlayer","getConfig","ref","references","nextProps","nextState","onClick","handleClickPreview","Wrapper","getAttributes","renderPreview","renderActivePlayer","MATCH_PLAYLIST","MATCH_USER_UPLOADS","MATCH_NOCOOKIE","YouTube","listType","getID","PlayerState","UNSTARTED","PLAYING","PAUSED","BUFFERING","ENDED","CUED","isPlaylist","container","parsePlaylist","cueVideoById","videoId","startSeconds","endSeconds","YT","autoplay","origin","onStateChange","host","body","contains","rate","display","SoundCloud","iframe","SC","Widget","PLAY","PLAY_PROGRESS","PAUSE","FINISH","ERROR","currentPosition","fractionLoaded","loadedProgress","encodeURIComponent","frameBorder","allow","Vimeo","querySelector","refreshDuration","secondsLoaded","overflow","SDK_URL","Facebook","FB","XFBML","xfbml","Event","subscribe","playerID","getElementById","visibility","className","data-href","data-autoplay","data-allowfullscreen","data-controls","Streamable","playerjs","percent","scrolling","allowFullScreen","Wistia","_wq","autoPlay","silentAutoPlay","controlsVisibleOnLoad","fullscreenButton","playbar","playbackRateControl","qualityControl","volumeControl","settingsControl","smallPlayButton","unbind","videoID","Twitch","isChannel","setChannel","setVideo","READY","ONLINE","OFFLINE","DailyMotion","DM","apiready","seeked","video_end","durationchange","onDurationChange","waiting","bufferedTime","Mixcloud","PlayerWidget","query","feed","Vidyard","addReadyListener","renderPlayer","uuid","getPlayerMetadata","meta","length_in_seconds","VidyardV4","destroyPlayer","HAS_NAVIGATOR","IS_IPAD_PRO","platform","maxTouchPoints","IS_IOS","MSStream","HlsJsP2P","webkitPresentationMode","prevPlayer","addListeners","shouldUseAudio","removeListeners","onPresentationModeChange","removeEventListener","poster","shouldUseHLS","Hls","liveSyncDurationCount","createLoaderClass","p2pml","MANIFEST_PARSED","loadSource","attachMedia","srcObject","createObjectURL","removeAttribute","requestPictureInPicture","pictureInPictureElement","exitPictureInPicture","seekable","buffered","useHLS","getSource","preload","renderSourceElement","renderTrack","MATCH_DROPBOX_URL","MATCH_CLOUDFLARE_STREAM","FilePlayer","dash","reset","shouldUseDASH","dashjs","MediaPlayer","initialize","getDebug","setLogToBrowserConsole","updateSettings","logLevel","LOG_LEVEL_NONE","shouldUseFLV","flvjs","flv","createPlayer","attachMediaElement","useDASH","useFLV","image","fetchImage","fetch","json","thumbnail_url","flexCenter","alignItems","justifyContent","styles","preview","backgroundImage","backgroundSize","backgroundPosition","cursor","shadow","background","borderRadius","borderStyle","borderWidth","borderColor","marginLeft","defaultPlayIcon","tabIndex","onKeyPress","handleKeyPress"],"mappings":"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","file":"ReactPlayer.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + chunkId + \".ReactPlayer.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonpReactPlayer\"] = window[\"webpackJsonpReactPlayer\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 82);\n","module.exports = React;","import loadScript from 'load-script'\nimport merge from 'deepmerge'\n\nconst MATCH_START_QUERY = /[?&#](?:start|t)=([0-9hms]+)/\nconst MATCH_END_QUERY = /[?&#]end=([0-9hms]+)/\nconst MATCH_START_STAMP = /(\\d+)(h|m|s)/g\nconst MATCH_NUMERIC = /^\\d+$/\n\n// Parse YouTube URL for a start time param, ie ?t=1h14m30s\n// and return the start time in seconds\nfunction parseTimeParam (url, pattern) {\n  if (url instanceof Array) {\n    return undefined\n  }\n  const match = url.match(pattern)\n  if (match) {\n    const stamp = match[1]\n    if (stamp.match(MATCH_START_STAMP)) {\n      return parseTimeString(stamp)\n    }\n    if (MATCH_NUMERIC.test(stamp)) {\n      return parseInt(stamp)\n    }\n  }\n  return undefined\n}\n\nfunction parseTimeString (stamp) {\n  let seconds = 0\n  let array = MATCH_START_STAMP.exec(stamp)\n  while (array !== null) {\n    const [, count, period] = array\n    if (period === 'h') seconds += parseInt(count, 10) * 60 * 60\n    if (period === 'm') seconds += parseInt(count, 10) * 60\n    if (period === 's') seconds += parseInt(count, 10)\n    array = MATCH_START_STAMP.exec(stamp)\n  }\n  return seconds\n}\n\nexport function parseStartTime (url) {\n  return parseTimeParam(url, MATCH_START_QUERY)\n}\n\nexport function parseEndTime (url) {\n  return parseTimeParam(url, MATCH_END_QUERY)\n}\n\n// http://stackoverflow.com/a/38622545\nexport function randomString () {\n  return Math.random().toString(36).substr(2, 5)\n}\n\nexport function queryString (object) {\n  return Object\n    .keys(object)\n    .map(key => `${key}=${object[key]}`)\n    .join('&')\n}\n\nfunction getGlobal (key) {\n  if (window[key]) {\n    return window[key]\n  }\n  if (window.exports && window.exports[key]) {\n    return window.exports[key]\n  }\n  if (window.module && window.module.exports && window.module.exports[key]) {\n    return window.module.exports[key]\n  }\n  return null\n}\n\n// Util function to load an external SDK\n// or return the SDK if it is already loaded\nconst requests = {}\nexport function getSDK (url, sdkGlobal, sdkReady = null, isLoaded = () => true, fetchScript = loadScript) {\n  const existingGlobal = getGlobal(sdkGlobal)\n  if (existingGlobal && isLoaded(existingGlobal)) {\n    return Promise.resolve(existingGlobal)\n  }\n  return new Promise((resolve, reject) => {\n    // If we are already loading the SDK, add the resolve and reject\n    // functions to the existing array of requests\n    if (requests[url]) {\n      requests[url].push({ resolve, reject })\n      return\n    }\n    requests[url] = [{ resolve, reject }]\n    const onLoaded = sdk => {\n      // When loaded, resolve all pending request promises\n      requests[url].forEach(request => request.resolve(sdk))\n    }\n    if (sdkReady) {\n      const previousOnReady = window[sdkReady]\n      window[sdkReady] = function () {\n        if (previousOnReady) previousOnReady()\n        onLoaded(getGlobal(sdkGlobal))\n      }\n    }\n    fetchScript(url, err => {\n      if (err) {\n        // Loading the SDK failed  reject all requests and\n        // reset the array of requests for this SDK\n        requests[url].forEach(request => request.reject(err))\n        requests[url] = null\n      } else if (!sdkReady) {\n        onLoaded(getGlobal(sdkGlobal))\n      }\n    })\n  })\n}\n\nexport function getConfig (props, defaultProps) {\n  return merge(defaultProps.config, props.config)\n}\n\nexport function omit (object, ...arrays) {\n  const omitKeys = [].concat(...arrays)\n  const output = {}\n  const keys = Object.keys(object)\n  for (const key of keys) {\n    if (omitKeys.indexOf(key) === -1) {\n      output[key] = object[key]\n    }\n  }\n  return output\n}\n\nexport function callPlayer (method, ...args) {\n  // Util method for calling a method on this.player\n  // but guard against errors and console.warn instead\n  if (!this.player || !this.player[method]) {\n    let message = `ReactPlayer: ${this.constructor.displayName} player could not call %c${method}%c  `\n    if (!this.player) {\n      message += 'The player was not available'\n    } else if (!this.player[method]) {\n      message += 'The method was not available'\n    }\n    console.warn(message, 'font-weight: bold', '')\n    return null\n  }\n  return this.player[method](...args)\n}\n\nexport function isMediaStream (url) {\n  return (\n    typeof window !== 'undefined' &&\n    typeof window.MediaStream !== 'undefined' &&\n    url instanceof window.MediaStream\n  )\n}\n\nexport function isBlobUrl (url) {\n  return /^blob:/.test(url)\n}\n\nexport function supportsWebKitPresentationMode (video = document.createElement('video')) {\n  // Check if Safari supports PiP, and is not on mobile (other than iPad)\n  // iPhone safari appears to \"support\" PiP through the check, however PiP does not function\n  const notMobile = /iPhone|iPod/.test(navigator.userAgent) === false\n  return video.webkitSupportsPresentationMode && typeof video.webkitSetPresentationMode === 'function' && notMobile\n}\n","import { isMediaStream, isBlobUrl } from './utils'\n\nexport const MATCH_URL_YOUTUBE = /(?:youtu\\.be\\/|youtube(?:-nocookie)?\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})|youtube\\.com\\/playlist\\?list=|youtube\\.com\\/user\\//\nexport const MATCH_URL_SOUNDCLOUD = /(?:soundcloud\\.com|snd\\.sc)\\/[^.]+$/\nexport const MATCH_URL_VIMEO = /vimeo\\.com\\/.+/\nexport const MATCH_URL_FACEBOOK = /^https?:\\/\\/(www\\.)?facebook\\.com.*\\/(video(s)?|watch|story)(\\.php?|\\/).+$/\nexport const MATCH_URL_FACEBOOK_WATCH = /^https?:\\/\\/fb\\.watch\\/.+$/\nexport const MATCH_URL_STREAMABLE = /streamable\\.com\\/([a-z0-9]+)$/\nexport const MATCH_URL_WISTIA = /(?:wistia\\.com|wi\\.st)\\/(?:medias|embed)\\/(.*)$/\nexport const MATCH_URL_TWITCH_VIDEO = /(?:www\\.|go\\.)?twitch\\.tv\\/videos\\/(\\d+)($|\\?)/\nexport const MATCH_URL_TWITCH_CHANNEL = /(?:www\\.|go\\.)?twitch\\.tv\\/([a-zA-Z0-9_]+)($|\\?)/\nexport const MATCH_URL_DAILYMOTION = /^(?:(?:https?):)?(?:\\/\\/)?(?:www\\.)?(?:(?:dailymotion\\.com(?:\\/embed)?\\/video)|dai\\.ly)\\/([a-zA-Z0-9]+)(?:_[\\w_-]+)?$/\nexport const MATCH_URL_MIXCLOUD = /mixcloud\\.com\\/([^/]+\\/[^/]+)/\nexport const MATCH_URL_VIDYARD = /vidyard.com\\/(?:watch\\/)?([a-zA-Z0-9-]+)/\n// export const MATCH_URL_LIVE = /chartres.live\\/+/\n\nexport const AUDIO_EXTENSIONS = /\\.(m4a|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\\?)/i\nexport const VIDEO_EXTENSIONS = /\\.(mp4|og[gv]|webm|mov|m4v)($|\\?)/i\nexport const HLS_EXTENSIONS = /\\.(m3u8)($|\\?)/i\nexport const DASH_EXTENSIONS = /\\.(mpd)($|\\?)/i\nexport const FLV_EXTENSIONS = /\\.(flv)($|\\?)/i\n\nconst canPlayFile = url => {\n  if (url instanceof Array) {\n    for (const item of url) {\n      if (typeof item === 'string' && canPlayFile(item)) {\n        return true\n      }\n      if (canPlayFile(item.src)) {\n        return true\n      }\n    }\n    return false\n  }\n  if (isMediaStream(url) || isBlobUrl(url)) {\n    return true\n  }\n  return (\n    AUDIO_EXTENSIONS.test(url) ||\n    VIDEO_EXTENSIONS.test(url) ||\n    HLS_EXTENSIONS.test(url) ||\n    DASH_EXTENSIONS.test(url) ||\n    FLV_EXTENSIONS.test(url)\n  )\n}\n\nexport const canPlay = {\n  youtube: url => {\n    if (url instanceof Array) {\n      return url.every(item => MATCH_URL_YOUTUBE.test(item))\n    }\n    return MATCH_URL_YOUTUBE.test(url)\n  },\n  soundcloud: url => MATCH_URL_SOUNDCLOUD.test(url) && !AUDIO_EXTENSIONS.test(url),\n  vimeo: url => MATCH_URL_VIMEO.test(url) && !VIDEO_EXTENSIONS.test(url) && !HLS_EXTENSIONS.test(url),\n  facebook: url => MATCH_URL_FACEBOOK.test(url) || MATCH_URL_FACEBOOK_WATCH.test(url),\n  streamable: url => MATCH_URL_STREAMABLE.test(url),\n  wistia: url => MATCH_URL_WISTIA.test(url),\n  twitch: url => MATCH_URL_TWITCH_VIDEO.test(url) || MATCH_URL_TWITCH_CHANNEL.test(url),\n  dailymotion: url => MATCH_URL_DAILYMOTION.test(url),\n  mixcloud: url => MATCH_URL_MIXCLOUD.test(url),\n  vidyard: url => MATCH_URL_VIDYARD.test(url),\n  hlsjsp2p: canPlayFile,\n  file: canPlayFile\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\nfunction log(...args) {\n\t// This hackery is required for IE8/9, where\n\t// the `console.log` function doesn't have 'apply'\n\treturn typeof console === 'object' &&\n\t\tconsole.log &&\n\t\tconsole.log(...args);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar codes = {};\n\nfunction createErrorType(code, message, Base) {\n  if (!Base) {\n    Base = Error;\n  }\n\n  function getMessage(arg1, arg2, arg3) {\n    if (typeof message === 'string') {\n      return message;\n    } else {\n      return message(arg1, arg2, arg3);\n    }\n  }\n\n  var NodeError =\n  /*#__PURE__*/\n  function (_Base) {\n    _inheritsLoose(NodeError, _Base);\n\n    function NodeError(arg1, arg2, arg3) {\n      return _Base.call(this, getMessage(arg1, arg2, arg3)) || this;\n    }\n\n    return NodeError;\n  }(Base);\n\n  NodeError.prototype.name = Base.name;\n  NodeError.prototype.code = code;\n  codes[code] = NodeError;\n} // https://github.com/nodejs/node/blob/v10.8.0/lib/internal/errors.js\n\n\nfunction oneOf(expected, thing) {\n  if (Array.isArray(expected)) {\n    var len = expected.length;\n    expected = expected.map(function (i) {\n      return String(i);\n    });\n\n    if (len > 2) {\n      return \"one of \".concat(thing, \" \").concat(expected.slice(0, len - 1).join(', '), \", or \") + expected[len - 1];\n    } else if (len === 2) {\n      return \"one of \".concat(thing, \" \").concat(expected[0], \" or \").concat(expected[1]);\n    } else {\n      return \"of \".concat(thing, \" \").concat(expected[0]);\n    }\n  } else {\n    return \"of \".concat(thing, \" \").concat(String(expected));\n  }\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n\n\nfunction startsWith(str, search, pos) {\n  return str.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n\n\nfunction endsWith(str, search, this_len) {\n  if (this_len === undefined || this_len > str.length) {\n    this_len = str.length;\n  }\n\n  return str.substring(this_len - search.length, this_len) === search;\n} // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/includes\n\n\nfunction includes(str, search, start) {\n  if (typeof start !== 'number') {\n    start = 0;\n  }\n\n  if (start + search.length > str.length) {\n    return false;\n  } else {\n    return str.indexOf(search, start) !== -1;\n  }\n}\n\ncreateErrorType('ERR_INVALID_OPT_VALUE', function (name, value) {\n  return 'The value \"' + value + '\" is invalid for option \"' + name + '\"';\n}, TypeError);\ncreateErrorType('ERR_INVALID_ARG_TYPE', function (name, expected, actual) {\n  // determiner: 'must be' or 'must not be'\n  var determiner;\n\n  if (typeof expected === 'string' && startsWith(expected, 'not ')) {\n    determiner = 'must not be';\n    expected = expected.replace(/^not /, '');\n  } else {\n    determiner = 'must be';\n  }\n\n  var msg;\n\n  if (endsWith(name, ' argument')) {\n    // For cases like 'first argument'\n    msg = \"The \".concat(name, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  } else {\n    var type = includes(name, '.') ? 'property' : 'argument';\n    msg = \"The \\\"\".concat(name, \"\\\" \").concat(type, \" \").concat(determiner, \" \").concat(oneOf(expected, 'type'));\n  }\n\n  msg += \". Received type \".concat(typeof actual);\n  return msg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF');\ncreateErrorType('ERR_METHOD_NOT_IMPLEMENTED', function (name) {\n  return 'The ' + name + ' method is not implemented';\n});\ncreateErrorType('ERR_STREAM_PREMATURE_CLOSE', 'Premature close');\ncreateErrorType('ERR_STREAM_DESTROYED', function (name) {\n  return 'Cannot call ' + name + ' after a stream was destroyed';\n});\ncreateErrorType('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\ncreateErrorType('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable');\ncreateErrorType('ERR_STREAM_WRITE_AFTER_END', 'write after end');\ncreateErrorType('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError);\ncreateErrorType('ERR_UNKNOWN_ENCODING', function (arg) {\n  return 'Unknown encoding: ' + arg;\n}, TypeError);\ncreateErrorType('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event');\nmodule.exports.codes = codes;\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n'use strict';\n/*<replacement>*/\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n\n  for (var key in obj) {\n    keys.push(key);\n  }\n\n  return keys;\n};\n/*</replacement>*/\n\n\nmodule.exports = Duplex;\n\nvar Readable = require('./_stream_readable');\n\nvar Writable = require('./_stream_writable');\n\nrequire('inherits')(Duplex, Readable);\n\n{\n  // Allow the keys array to be GC'ed.\n  var keys = objectKeys(Writable.prototype);\n\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n  Readable.call(this, options);\n  Writable.call(this, options);\n  this.allowHalfOpen = true;\n\n  if (options) {\n    if (options.readable === false) this.readable = false;\n    if (options.writable === false) this.writable = false;\n\n    if (options.allowHalfOpen === false) {\n      this.allowHalfOpen = false;\n      this.once('end', onend);\n    }\n  }\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\nObject.defineProperty(Duplex.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n}); // the no-half-open enforcer\n\nfunction onend() {\n  // If the writable side ended, then we're ok.\n  if (this._writableState.ended) return; // no more data can be written.\n  // But allow more writes to happen in this tick.\n\n  process.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});","/* global Map:readonly, Set:readonly, ArrayBuffer:readonly */\n\nvar hasElementType = typeof Element !== 'undefined';\nvar hasMap = typeof Map === 'function';\nvar hasSet = typeof Set === 'function';\nvar hasArrayBuffer = typeof ArrayBuffer === 'function' && !!ArrayBuffer.isView;\n\n// Note: We **don't** need `envHasBigInt64Array` in fde es6/index.js\n\nfunction equal(a, b) {\n  // START: fast-deep-equal es6/index.js 3.1.1\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n    // START: Modifications:\n    // 1. Extra `has<Type> &&` helpers in initial condition allow es6 code\n    //    to co-exist with es5.\n    // 2. Replace `for of` with es5 compliant iteration using `for`.\n    //    Basically, take:\n    //\n    //    ```js\n    //    for (i of a.entries())\n    //      if (!b.has(i[0])) return false;\n    //    ```\n    //\n    //    ... and convert to:\n    //\n    //    ```js\n    //    it = a.entries();\n    //    while (!(i = it.next()).done)\n    //      if (!b.has(i.value[0])) return false;\n    //    ```\n    //\n    //    **Note**: `i` access switches to `i.value`.\n    var it;\n    if (hasMap && (a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!equal(i.value[1], b.get(i.value[0]))) return false;\n      return true;\n    }\n\n    if (hasSet && (a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      it = a.entries();\n      while (!(i = it.next()).done)\n        if (!b.has(i.value[0])) return false;\n      return true;\n    }\n    // END: Modifications\n\n    if (hasArrayBuffer && ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n    // END: fast-deep-equal\n\n    // START: react-fast-compare\n    // custom handling for DOM elements\n    if (hasElementType && a instanceof Element) return false;\n\n    // custom handling for React/Preact\n    for (i = length; i-- !== 0;) {\n      if ((keys[i] === '_owner' || keys[i] === '__v' || keys[i] === '__o') && a.$$typeof) {\n        // React-specific: avoid traversing React elements' _owner\n        // Preact-specific: avoid traversing Preact elements' __v and __o\n        //    __v = $_original / $_vnode\n        //    __o = $_owner\n        // These properties contain circular references and are not needed when\n        // comparing the actual elements (and not their owners)\n        // .$$typeof and ._store on just reasonable markers of elements\n\n        continue;\n      }\n\n      // all other properties should be traversed as usual\n      if (!equal(a[keys[i]], b[keys[i]])) return false;\n    }\n    // END: react-fast-compare\n\n    // START: fast-deep-equal\n    return true;\n  }\n\n  return a !== a && b !== b;\n}\n// end fast-deep-equal\n\nmodule.exports = function isEqual(a, b) {\n  try {\n    return equal(a, b);\n  } catch (error) {\n    if (((error.message || '').match(/stack|recursion/i))) {\n      // warn on circular references, don't crash\n      // browsers give this different errors name and messages:\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\n      // firefox: \"InternalError\", too much recursion\"\n      // edge: \"Error\", \"Out of stack space\"\n      console.warn('react-fast-compare cannot handle circular refs');\n      return false;\n    }\n    // some other error. we should definitely know about these\n    throw error;\n  }\n};\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","\"use strict\";\n/**\n * @license Apache-2.0\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.version = \"0.6.2\";\n__export(require(\"./engine\"));\n__export(require(\"./segment-manager\"));\nfunction initHlsJsPlayer(player) {\n    if (player && player.config && player.config.loader && typeof player.config.loader.getEngine === \"function\") {\n        initHlsJsEvents(player, player.config.loader.getEngine());\n    }\n}\nexports.initHlsJsPlayer = initHlsJsPlayer;\nfunction initClapprPlayer(player) {\n    player.on(\"play\", () => {\n        const playback = player.core.getCurrentPlayback();\n        if (playback._hls && !playback._hls._p2pm_linitialized) {\n            playback._hls._p2pm_linitialized = true;\n            initHlsJsPlayer(player.core.getCurrentPlayback()._hls);\n        }\n    });\n}\nexports.initClapprPlayer = initClapprPlayer;\nfunction initFlowplayerHlsJsPlayer(player) {\n    player.on(\"ready\", () => initHlsJsPlayer(player.engine.hlsjs ? player.engine.hlsjs : player.engine.hls));\n}\nexports.initFlowplayerHlsJsPlayer = initFlowplayerHlsJsPlayer;\nfunction initVideoJsContribHlsJsPlayer(player) {\n    player.ready(() => {\n        const options = player.tech_.options_;\n        if (options && options.hlsjsConfig && options.hlsjsConfig.loader && typeof options.hlsjsConfig.loader.getEngine === \"function\") {\n            initHlsJsEvents(player.tech_, options.hlsjsConfig.loader.getEngine());\n        }\n    });\n}\nexports.initVideoJsContribHlsJsPlayer = initVideoJsContribHlsJsPlayer;\nfunction initVideoJsHlsJsPlugin() {\n    if (videojs == undefined || videojs.Html5Hlsjs == undefined) {\n        return;\n    }\n    videojs.Html5Hlsjs.addHook(\"beforeinitialize\", (videojsPlayer, hlsjs) => {\n        if (hlsjs.config && hlsjs.config.loader && typeof hlsjs.config.loader.getEngine === \"function\") {\n            initHlsJsEvents(hlsjs, hlsjs.config.loader.getEngine());\n        }\n    });\n}\nexports.initVideoJsHlsJsPlugin = initVideoJsHlsJsPlugin;\nfunction initMediaElementJsPlayer(mediaElement) {\n    mediaElement.addEventListener(\"hlsFragChanged\", (event) => {\n        const hls = mediaElement.hlsPlayer;\n        if (hls && hls.config && hls.config.loader && typeof hls.config.loader.getEngine === \"function\") {\n            const engine = hls.config.loader.getEngine();\n            if (event.data && (event.data.length > 1)) {\n                const frag = event.data[1].frag;\n                const byterange = (frag.byteRange.length !== 2)\n                    ? undefined\n                    : { offset: frag.byteRange[0], length: frag.byteRange[1] - frag.byteRange[0] };\n                engine.setPlayingSegment(frag.url, byterange, frag.start, frag.duration);\n            }\n        }\n    });\n    mediaElement.addEventListener(\"hlsDestroying\", async () => {\n        const hls = mediaElement.hlsPlayer;\n        if (hls && hls.config && hls.config.loader && typeof hls.config.loader.getEngine === \"function\") {\n            const engine = hls.config.loader.getEngine();\n            await engine.destroy();\n        }\n    });\n    mediaElement.addEventListener(\"hlsError\", (event) => {\n        const hls = mediaElement.hlsPlayer;\n        if (hls && hls.config && hls.config.loader && typeof hls.config.loader.getEngine === \"function\") {\n            if ((event.data !== undefined) && (event.data.details === \"bufferStalledError\")) {\n                const engine = hls.config.loader.getEngine();\n                engine.setPlayingSegmentByCurrentTime(hls.media.currentTime);\n            }\n        }\n    });\n}\nexports.initMediaElementJsPlayer = initMediaElementJsPlayer;\nfunction initJwPlayer(player, hlsjsConfig) {\n    const iid = setInterval(() => {\n        if (player.hls && player.hls.config) {\n            clearInterval(iid);\n            Object.assign(player.hls.config, hlsjsConfig);\n            initHlsJsPlayer(player.hls);\n        }\n    }, 200);\n}\nexports.initJwPlayer = initJwPlayer;\nfunction initHlsJsEvents(player, engine) {\n    player.on(\"hlsFragChanged\", (_event, data) => {\n        const frag = data.frag;\n        const byterange = (frag.byteRange.length !== 2)\n            ? undefined\n            : { offset: frag.byteRange[0], length: frag.byteRange[1] - frag.byteRange[0] };\n        engine.setPlayingSegment(frag.url, byterange, frag.start, frag.duration);\n    });\n    player.on(\"hlsDestroying\", async () => {\n        await engine.destroy();\n    });\n    player.on(\"hlsError\", (_event, errorData) => {\n        if (errorData.details === \"bufferStalledError\") {\n            const htmlMediaElement = player.media === undefined\n                ? player.el_ // videojs-contrib-hlsjs\n                : player.media; // all others\n            if (htmlMediaElement === undefined) {\n                return;\n            }\n            engine.setPlayingSegmentByCurrentTime(htmlMediaElement.currentTime);\n        }\n    });\n}\n","function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nmodule.exports = _inheritsLoose;","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n\n/**\n * @file stream.js\n */\n\n/**\n * A lightweight readable stream implemention that handles event dispatching.\n *\n * @class Stream\n */\nvar Stream = /*#__PURE__*/function () {\n  function Stream() {\n    this.listeners = {};\n  }\n  /**\n   * Add a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener the callback to be invoked when an event of\n   * the specified type occurs\n   */\n\n\n  var _proto = Stream.prototype;\n\n  _proto.on = function on(type, listener) {\n    if (!this.listeners[type]) {\n      this.listeners[type] = [];\n    }\n\n    this.listeners[type].push(listener);\n  }\n  /**\n   * Remove a listener for a specified event type.\n   *\n   * @param {string} type the event name\n   * @param {Function} listener  a function previously registered for this\n   * type of event through `on`\n   * @return {boolean} if we could turn it off or not\n   */\n  ;\n\n  _proto.off = function off(type, listener) {\n    if (!this.listeners[type]) {\n      return false;\n    }\n\n    var index = this.listeners[type].indexOf(listener); // TODO: which is better?\n    // In Video.js we slice listener functions\n    // on trigger so that it does not mess up the order\n    // while we loop through.\n    //\n    // Here we slice on off so that the loop in trigger\n    // can continue using it's old reference to loop without\n    // messing up the order.\n\n    this.listeners[type] = this.listeners[type].slice(0);\n    this.listeners[type].splice(index, 1);\n    return index > -1;\n  }\n  /**\n   * Trigger an event of the specified type on this stream. Any additional\n   * arguments to this function are passed as parameters to event listeners.\n   *\n   * @param {string} type the event name\n   */\n  ;\n\n  _proto.trigger = function trigger(type) {\n    var callbacks = this.listeners[type];\n\n    if (!callbacks) {\n      return;\n    } // Slicing the arguments on every invocation of this method\n    // can add a significant amount of overhead. Avoid the\n    // intermediate object creation for the common case of a\n    // single callback argument\n\n\n    if (arguments.length === 2) {\n      var length = callbacks.length;\n\n      for (var i = 0; i < length; ++i) {\n        callbacks[i].call(this, arguments[1]);\n      }\n    } else {\n      var args = Array.prototype.slice.call(arguments, 1);\n      var _length = callbacks.length;\n\n      for (var _i = 0; _i < _length; ++_i) {\n        callbacks[_i].apply(this, args);\n      }\n    }\n  }\n  /**\n   * Destroys the stream and cleans up.\n   */\n  ;\n\n  _proto.dispose = function dispose() {\n    this.listeners = {};\n  }\n  /**\n   * Forwards all `data` events on this stream to the destination stream. The\n   * destination stream should provide a method `push` to receive the data\n   * events as they arrive.\n   *\n   * @param {Stream} destination the stream that will receive all `data` events\n   * @see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options\n   */\n  ;\n\n  _proto.pipe = function pipe(destination) {\n    this.on('data', function (data) {\n      destination.push(data);\n    });\n  };\n\n  return Stream;\n}();\n\nmodule.exports = Stream;\n","\"use strict\";\n/**\n * @license Apache-2.0\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.version = \"0.6.2\";\n__export(require(\"./loader-interface\"));\n__export(require(\"./hybrid-loader\"));\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = require(\"events\");\nclass STEEmitter extends events_1.EventEmitter {\n    on(event, listener) { return super.on(event, listener); }\n    emit(event, ...args) { return super.emit(event, ...args); }\n}\nexports.STEEmitter = STEEmitter;\n","/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nconst debug = require('debug')('simple-peer')\nconst getBrowserRTC = require('get-browser-rtc')\nconst randombytes = require('randombytes')\nconst stream = require('readable-stream')\nconst queueMicrotask = require('queue-microtask') // TODO: remove when Node 10 is not supported\nconst errCode = require('err-code')\nconst { Buffer } = require('buffer')\n\nconst MAX_BUFFERED_AMOUNT = 64 * 1024\nconst ICECOMPLETE_TIMEOUT = 5 * 1000\nconst CHANNEL_CLOSING_TIMEOUT = 5 * 1000\n\n// HACK: Filter trickle lines when trickle is disabled #354\nfunction filterTrickle (sdp) {\n  return sdp.replace(/a=ice-options:trickle\\s\\n/g, '')\n}\n\nfunction warn (message) {\n  console.warn(message)\n}\n\n/**\n * WebRTC peer connection. Same API as node core `net.Socket`, plus a few extra methods.\n * Duplex stream.\n * @param {Object} opts\n */\nclass Peer extends stream.Duplex {\n  constructor (opts) {\n    opts = Object.assign({\n      allowHalfOpen: false\n    }, opts)\n\n    super(opts)\n\n    this._id = randombytes(4).toString('hex').slice(0, 7)\n    this._debug('new peer %o', opts)\n\n    this.channelName = opts.initiator\n      ? opts.channelName || randombytes(20).toString('hex')\n      : null\n\n    this.initiator = opts.initiator || false\n    this.channelConfig = opts.channelConfig || Peer.channelConfig\n    this.channelNegotiated = this.channelConfig.negotiated\n    this.config = Object.assign({}, Peer.config, opts.config)\n    this.offerOptions = opts.offerOptions || {}\n    this.answerOptions = opts.answerOptions || {}\n    this.sdpTransform = opts.sdpTransform || (sdp => sdp)\n    this.streams = opts.streams || (opts.stream ? [opts.stream] : []) // support old \"stream\" option\n    this.trickle = opts.trickle !== undefined ? opts.trickle : true\n    this.allowHalfTrickle = opts.allowHalfTrickle !== undefined ? opts.allowHalfTrickle : false\n    this.iceCompleteTimeout = opts.iceCompleteTimeout || ICECOMPLETE_TIMEOUT\n\n    this.destroyed = false\n    this.destroying = false\n    this._connected = false\n\n    this.remoteAddress = undefined\n    this.remoteFamily = undefined\n    this.remotePort = undefined\n    this.localAddress = undefined\n    this.localFamily = undefined\n    this.localPort = undefined\n\n    this._wrtc = (opts.wrtc && typeof opts.wrtc === 'object')\n      ? opts.wrtc\n      : getBrowserRTC()\n\n    if (!this._wrtc) {\n      if (typeof window === 'undefined') {\n        throw errCode(new Error('No WebRTC support: Specify `opts.wrtc` option in this environment'), 'ERR_WEBRTC_SUPPORT')\n      } else {\n        throw errCode(new Error('No WebRTC support: Not a supported browser'), 'ERR_WEBRTC_SUPPORT')\n      }\n    }\n\n    this._pcReady = false\n    this._channelReady = false\n    this._iceComplete = false // ice candidate trickle done (got null candidate)\n    this._iceCompleteTimer = null // send an offer/answer anyway after some timeout\n    this._channel = null\n    this._pendingCandidates = []\n\n    this._isNegotiating = false // is this peer waiting for negotiation to complete?\n    this._firstNegotiation = true\n    this._batchedNegotiation = false // batch synchronous negotiations\n    this._queuedNegotiation = false // is there a queued negotiation request?\n    this._sendersAwaitingStable = []\n    this._senderMap = new Map()\n    this._closingInterval = null\n\n    this._remoteTracks = []\n    this._remoteStreams = []\n\n    this._chunk = null\n    this._cb = null\n    this._interval = null\n\n    try {\n      this._pc = new (this._wrtc.RTCPeerConnection)(this.config)\n    } catch (err) {\n      queueMicrotask(() => this.destroy(errCode(err, 'ERR_PC_CONSTRUCTOR')))\n      return\n    }\n\n    // We prefer feature detection whenever possible, but sometimes that's not\n    // possible for certain implementations.\n    this._isReactNativeWebrtc = typeof this._pc._peerConnectionId === 'number'\n\n    this._pc.oniceconnectionstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onicegatheringstatechange = () => {\n      this._onIceStateChange()\n    }\n    this._pc.onconnectionstatechange = () => {\n      this._onConnectionStateChange()\n    }\n    this._pc.onsignalingstatechange = () => {\n      this._onSignalingStateChange()\n    }\n    this._pc.onicecandidate = event => {\n      this._onIceCandidate(event)\n    }\n\n    // Other spec events, unused by this implementation:\n    // - onconnectionstatechange\n    // - onicecandidateerror\n    // - onfingerprintfailure\n    // - onnegotiationneeded\n\n    if (this.initiator || this.channelNegotiated) {\n      this._setupData({\n        channel: this._pc.createDataChannel(this.channelName, this.channelConfig)\n      })\n    } else {\n      this._pc.ondatachannel = event => {\n        this._setupData(event)\n      }\n    }\n\n    if (this.streams) {\n      this.streams.forEach(stream => {\n        this.addStream(stream)\n      })\n    }\n    this._pc.ontrack = event => {\n      this._onTrack(event)\n    }\n\n    this._debug('initial negotiation')\n    this._needsNegotiation()\n\n    this._onFinishBound = () => {\n      this._onFinish()\n    }\n    this.once('finish', this._onFinishBound)\n  }\n\n  get bufferSize () {\n    return (this._channel && this._channel.bufferedAmount) || 0\n  }\n\n  // HACK: it's possible channel.readyState is \"closing\" before peer.destroy() fires\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n  get connected () {\n    return (this._connected && this._channel.readyState === 'open')\n  }\n\n  address () {\n    return { port: this.localPort, family: this.localFamily, address: this.localAddress }\n  }\n\n  signal (data) {\n    if (this.destroyed) throw errCode(new Error('cannot signal after peer is destroyed'), 'ERR_SIGNALING')\n    if (typeof data === 'string') {\n      try {\n        data = JSON.parse(data)\n      } catch (err) {\n        data = {}\n      }\n    }\n    this._debug('signal()')\n\n    if (data.renegotiate && this.initiator) {\n      this._debug('got request to renegotiate')\n      this._needsNegotiation()\n    }\n    if (data.transceiverRequest && this.initiator) {\n      this._debug('got request for transceiver')\n      this.addTransceiver(data.transceiverRequest.kind, data.transceiverRequest.init)\n    }\n    if (data.candidate) {\n      if (this._pc.remoteDescription && this._pc.remoteDescription.type) {\n        this._addIceCandidate(data.candidate)\n      } else {\n        this._pendingCandidates.push(data.candidate)\n      }\n    }\n    if (data.sdp) {\n      this._pc.setRemoteDescription(new (this._wrtc.RTCSessionDescription)(data))\n        .then(() => {\n          if (this.destroyed) return\n\n          this._pendingCandidates.forEach(candidate => {\n            this._addIceCandidate(candidate)\n          })\n          this._pendingCandidates = []\n\n          if (this._pc.remoteDescription.type === 'offer') this._createAnswer()\n        })\n        .catch(err => {\n          this.destroy(errCode(err, 'ERR_SET_REMOTE_DESCRIPTION'))\n        })\n    }\n    if (!data.sdp && !data.candidate && !data.renegotiate && !data.transceiverRequest) {\n      this.destroy(errCode(new Error('signal() called with invalid signal data'), 'ERR_SIGNALING'))\n    }\n  }\n\n  _addIceCandidate (candidate) {\n    const iceCandidateObj = new this._wrtc.RTCIceCandidate(candidate)\n    this._pc.addIceCandidate(iceCandidateObj)\n      .catch(err => {\n        if (!iceCandidateObj.address || iceCandidateObj.address.endsWith('.local')) {\n          warn('Ignoring unsupported ICE candidate.')\n        } else {\n          this.destroy(errCode(err, 'ERR_ADD_ICE_CANDIDATE'))\n        }\n      })\n  }\n\n  /**\n   * Send text/binary data to the remote peer.\n   * @param {ArrayBufferView|ArrayBuffer|Buffer|string|Blob} chunk\n   */\n  send (chunk) {\n    this._channel.send(chunk)\n  }\n\n  /**\n   * Add a Transceiver to the connection.\n   * @param {String} kind\n   * @param {Object} init\n   */\n  addTransceiver (kind, init) {\n    this._debug('addTransceiver()')\n\n    if (this.initiator) {\n      try {\n        this._pc.addTransceiver(kind, init)\n        this._needsNegotiation()\n      } catch (err) {\n        this.destroy(errCode(err, 'ERR_ADD_TRANSCEIVER'))\n      }\n    } else {\n      this.emit('signal', { // request initiator to renegotiate\n        type: 'transceiverRequest',\n        transceiverRequest: { kind, init }\n      })\n    }\n  }\n\n  /**\n   * Add a MediaStream to the connection.\n   * @param {MediaStream} stream\n   */\n  addStream (stream) {\n    this._debug('addStream()')\n\n    stream.getTracks().forEach(track => {\n      this.addTrack(track, stream)\n    })\n  }\n\n  /**\n   * Add a MediaStreamTrack to the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  addTrack (track, stream) {\n    this._debug('addTrack()')\n\n    const submap = this._senderMap.get(track) || new Map() // nested Maps map [track, stream] to sender\n    let sender = submap.get(stream)\n    if (!sender) {\n      sender = this._pc.addTrack(track, stream)\n      submap.set(stream, sender)\n      this._senderMap.set(track, submap)\n      this._needsNegotiation()\n    } else if (sender.removed) {\n      throw errCode(new Error('Track has been removed. You should enable/disable tracks that you want to re-add.'), 'ERR_SENDER_REMOVED')\n    } else {\n      throw errCode(new Error('Track has already been added to that stream.'), 'ERR_SENDER_ALREADY_ADDED')\n    }\n  }\n\n  /**\n   * Replace a MediaStreamTrack by another in the connection.\n   * @param {MediaStreamTrack} oldTrack\n   * @param {MediaStreamTrack} newTrack\n   * @param {MediaStream} stream\n   */\n  replaceTrack (oldTrack, newTrack, stream) {\n    this._debug('replaceTrack()')\n\n    const submap = this._senderMap.get(oldTrack)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(new Error('Cannot replace track that was never added.'), 'ERR_TRACK_NOT_ADDED')\n    }\n    if (newTrack) this._senderMap.set(newTrack, submap)\n\n    if (sender.replaceTrack != null) {\n      sender.replaceTrack(newTrack)\n    } else {\n      this.destroy(errCode(new Error('replaceTrack is not supported in this browser'), 'ERR_UNSUPPORTED_REPLACETRACK'))\n    }\n  }\n\n  /**\n   * Remove a MediaStreamTrack from the connection.\n   * @param {MediaStreamTrack} track\n   * @param {MediaStream} stream\n   */\n  removeTrack (track, stream) {\n    this._debug('removeSender()')\n\n    const submap = this._senderMap.get(track)\n    const sender = submap ? submap.get(stream) : null\n    if (!sender) {\n      throw errCode(new Error('Cannot remove track that was never added.'), 'ERR_TRACK_NOT_ADDED')\n    }\n    try {\n      sender.removed = true\n      this._pc.removeTrack(sender)\n    } catch (err) {\n      if (err.name === 'NS_ERROR_UNEXPECTED') {\n        this._sendersAwaitingStable.push(sender) // HACK: Firefox must wait until (signalingState === stable) https://bugzilla.mozilla.org/show_bug.cgi?id=1133874\n      } else {\n        this.destroy(errCode(err, 'ERR_REMOVE_TRACK'))\n      }\n    }\n    this._needsNegotiation()\n  }\n\n  /**\n   * Remove a MediaStream from the connection.\n   * @param {MediaStream} stream\n   */\n  removeStream (stream) {\n    this._debug('removeSenders()')\n\n    stream.getTracks().forEach(track => {\n      this.removeTrack(track, stream)\n    })\n  }\n\n  _needsNegotiation () {\n    this._debug('_needsNegotiation')\n    if (this._batchedNegotiation) return // batch synchronous renegotiations\n    this._batchedNegotiation = true\n    queueMicrotask(() => {\n      this._batchedNegotiation = false\n      if (this.initiator || !this._firstNegotiation) {\n        this._debug('starting batched negotiation')\n        this.negotiate()\n      } else {\n        this._debug('non-initiator initial negotiation request discarded')\n      }\n      this._firstNegotiation = false\n    })\n  }\n\n  negotiate () {\n    if (this.initiator) {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('start negotiation')\n        setTimeout(() => { // HACK: Chrome crashes if we immediately call createOffer\n          this._createOffer()\n        }, 0)\n      }\n    } else {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true\n        this._debug('already negotiating, queueing')\n      } else {\n        this._debug('requesting negotiation from initiator')\n        this.emit('signal', { // request initiator to renegotiate\n          type: 'renegotiate',\n          renegotiate: true\n        })\n      }\n    }\n    this._isNegotiating = true\n  }\n\n  // TODO: Delete this method once readable-stream is updated to contain a default\n  // implementation of destroy() that automatically calls _destroy()\n  // See: https://github.com/nodejs/readable-stream/issues/283\n  destroy (err) {\n    this._destroy(err, () => {})\n  }\n\n  _destroy (err, cb) {\n    if (this.destroyed || this.destroying) return\n    this.destroying = true\n\n    this._debug('destroying (error: %s)', err && (err.message || err))\n\n    queueMicrotask(() => { // allow events concurrent with the call to _destroy() to fire (see #692)\n      this.destroyed = true\n      this.destroying = false\n\n      this._debug('destroy (error: %s)', err && (err.message || err))\n\n      this.readable = this.writable = false\n\n      if (!this._readableState.ended) this.push(null)\n      if (!this._writableState.finished) this.end()\n\n      this._connected = false\n      this._pcReady = false\n      this._channelReady = false\n      this._remoteTracks = null\n      this._remoteStreams = null\n      this._senderMap = null\n\n      clearInterval(this._closingInterval)\n      this._closingInterval = null\n\n      clearInterval(this._interval)\n      this._interval = null\n      this._chunk = null\n      this._cb = null\n\n      if (this._onFinishBound) this.removeListener('finish', this._onFinishBound)\n      this._onFinishBound = null\n\n      if (this._channel) {\n        try {\n          this._channel.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._channel.onmessage = null\n        this._channel.onopen = null\n        this._channel.onclose = null\n        this._channel.onerror = null\n      }\n      if (this._pc) {\n        try {\n          this._pc.close()\n        } catch (err) {}\n\n        // allow events concurrent with destruction to be handled\n        this._pc.oniceconnectionstatechange = null\n        this._pc.onicegatheringstatechange = null\n        this._pc.onsignalingstatechange = null\n        this._pc.onicecandidate = null\n        this._pc.ontrack = null\n        this._pc.ondatachannel = null\n      }\n      this._pc = null\n      this._channel = null\n\n      if (err) this.emit('error', err)\n      this.emit('close')\n      cb()\n    })\n  }\n\n  _setupData (event) {\n    if (!event.channel) {\n      // In some situations `pc.createDataChannel()` returns `undefined` (in wrtc),\n      // which is invalid behavior. Handle it gracefully.\n      // See: https://github.com/feross/simple-peer/issues/163\n      return this.destroy(errCode(new Error('Data channel event is missing `channel` property'), 'ERR_DATA_CHANNEL'))\n    }\n\n    this._channel = event.channel\n    this._channel.binaryType = 'arraybuffer'\n\n    if (typeof this._channel.bufferedAmountLowThreshold === 'number') {\n      this._channel.bufferedAmountLowThreshold = MAX_BUFFERED_AMOUNT\n    }\n\n    this.channelName = this._channel.label\n\n    this._channel.onmessage = event => {\n      this._onChannelMessage(event)\n    }\n    this._channel.onbufferedamountlow = () => {\n      this._onChannelBufferedAmountLow()\n    }\n    this._channel.onopen = () => {\n      this._onChannelOpen()\n    }\n    this._channel.onclose = () => {\n      this._onChannelClose()\n    }\n    this._channel.onerror = err => {\n      this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n    }\n\n    // HACK: Chrome will sometimes get stuck in readyState \"closing\", let's check for this condition\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n    let isClosing = false\n    this._closingInterval = setInterval(() => { // No \"onclosing\" event\n      if (this._channel && this._channel.readyState === 'closing') {\n        if (isClosing) this._onChannelClose() // closing timed out: equivalent to onclose firing\n        isClosing = true\n      } else {\n        isClosing = false\n      }\n    }, CHANNEL_CLOSING_TIMEOUT)\n  }\n\n  _read () {}\n\n  _write (chunk, encoding, cb) {\n    if (this.destroyed) return cb(errCode(new Error('cannot write after peer is destroyed'), 'ERR_DATA_CHANNEL'))\n\n    if (this._connected) {\n      try {\n        this.send(chunk)\n      } catch (err) {\n        return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n      }\n      if (this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n        this._debug('start backpressure: bufferedAmount %d', this._channel.bufferedAmount)\n        this._cb = cb\n      } else {\n        cb(null)\n      }\n    } else {\n      this._debug('write before connect')\n      this._chunk = chunk\n      this._cb = cb\n    }\n  }\n\n  // When stream finishes writing, close socket. Half open connections are not\n  // supported.\n  _onFinish () {\n    if (this.destroyed) return\n\n    // Wait a bit before destroying so the socket flushes.\n    // TODO: is there a more reliable way to accomplish this?\n    const destroySoon = () => {\n      setTimeout(() => this.destroy(), 1000)\n    }\n\n    if (this._connected) {\n      destroySoon()\n    } else {\n      this.once('connect', destroySoon)\n    }\n  }\n\n  _startIceCompleteTimeout () {\n    if (this.destroyed) return\n    if (this._iceCompleteTimer) return\n    this._debug('started iceComplete timeout')\n    this._iceCompleteTimer = setTimeout(() => {\n      if (!this._iceComplete) {\n        this._iceComplete = true\n        this._debug('iceComplete timeout completed')\n        this.emit('iceTimeout')\n        this.emit('_iceComplete')\n      }\n    }, this.iceCompleteTimeout)\n  }\n\n  _createOffer () {\n    if (this.destroyed) return\n\n    this._pc.createOffer(this.offerOptions)\n      .then(offer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) offer.sdp = filterTrickle(offer.sdp)\n        offer.sdp = this.sdpTransform(offer.sdp)\n\n        const sendOffer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || offer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n        }\n\n        const onSuccess = () => {\n          this._debug('createOffer success')\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendOffer()\n          else this.once('_iceComplete', sendOffer) // wait for candidates\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(offer)\n          .then(onSuccess)\n          .catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_OFFER'))\n      })\n  }\n\n  _requestMissingTransceivers () {\n    if (this._pc.getTransceivers) {\n      this._pc.getTransceivers().forEach(transceiver => {\n        if (!transceiver.mid && transceiver.sender.track && !transceiver.requested) {\n          transceiver.requested = true // HACK: Safari returns negotiated transceivers with a null mid\n          this.addTransceiver(transceiver.sender.track.kind)\n        }\n      })\n    }\n  }\n\n  _createAnswer () {\n    if (this.destroyed) return\n\n    this._pc.createAnswer(this.answerOptions)\n      .then(answer => {\n        if (this.destroyed) return\n        if (!this.trickle && !this.allowHalfTrickle) answer.sdp = filterTrickle(answer.sdp)\n        answer.sdp = this.sdpTransform(answer.sdp)\n\n        const sendAnswer = () => {\n          if (this.destroyed) return\n          const signal = this._pc.localDescription || answer\n          this._debug('signal')\n          this.emit('signal', {\n            type: signal.type,\n            sdp: signal.sdp\n          })\n          if (!this.initiator) this._requestMissingTransceivers()\n        }\n\n        const onSuccess = () => {\n          if (this.destroyed) return\n          if (this.trickle || this._iceComplete) sendAnswer()\n          else this.once('_iceComplete', sendAnswer)\n        }\n\n        const onError = err => {\n          this.destroy(errCode(err, 'ERR_SET_LOCAL_DESCRIPTION'))\n        }\n\n        this._pc.setLocalDescription(answer)\n          .then(onSuccess)\n          .catch(onError)\n      })\n      .catch(err => {\n        this.destroy(errCode(err, 'ERR_CREATE_ANSWER'))\n      })\n  }\n\n  _onConnectionStateChange () {\n    if (this.destroyed) return\n    if (this._pc.connectionState === 'failed') {\n      this.destroy(errCode(new Error('Connection failed.'), 'ERR_CONNECTION_FAILURE'))\n    }\n  }\n\n  _onIceStateChange () {\n    if (this.destroyed) return\n    const iceConnectionState = this._pc.iceConnectionState\n    const iceGatheringState = this._pc.iceGatheringState\n\n    this._debug(\n      'iceStateChange (connection: %s) (gathering: %s)',\n      iceConnectionState,\n      iceGatheringState\n    )\n    this.emit('iceStateChange', iceConnectionState, iceGatheringState)\n\n    if (iceConnectionState === 'connected' || iceConnectionState === 'completed') {\n      this._pcReady = true\n      this._maybeReady()\n    }\n    if (iceConnectionState === 'failed') {\n      this.destroy(errCode(new Error('Ice connection failed.'), 'ERR_ICE_CONNECTION_FAILURE'))\n    }\n    if (iceConnectionState === 'closed') {\n      this.destroy(errCode(new Error('Ice connection closed.'), 'ERR_ICE_CONNECTION_CLOSED'))\n    }\n  }\n\n  getStats (cb) {\n    // statreports can come with a value array instead of properties\n    const flattenValues = report => {\n      if (Object.prototype.toString.call(report.values) === '[object Array]') {\n        report.values.forEach(value => {\n          Object.assign(report, value)\n        })\n      }\n      return report\n    }\n\n    // Promise-based getStats() (standard)\n    if (this._pc.getStats.length === 0 || this._isReactNativeWebrtc) {\n      this._pc.getStats()\n        .then(res => {\n          const reports = []\n          res.forEach(report => {\n            reports.push(flattenValues(report))\n          })\n          cb(null, reports)\n        }, err => cb(err))\n\n    // Single-parameter callback-based getStats() (non-standard)\n    } else if (this._pc.getStats.length > 0) {\n      this._pc.getStats(res => {\n        // If we destroy connection in `connect` callback this code might happen to run when actual connection is already closed\n        if (this.destroyed) return\n\n        const reports = []\n        res.result().forEach(result => {\n          const report = {}\n          result.names().forEach(name => {\n            report[name] = result.stat(name)\n          })\n          report.id = result.id\n          report.type = result.type\n          report.timestamp = result.timestamp\n          reports.push(flattenValues(report))\n        })\n        cb(null, reports)\n      }, err => cb(err))\n\n    // Unknown browser, skip getStats() since it's anyone's guess which style of\n    // getStats() they implement.\n    } else {\n      cb(null, [])\n    }\n  }\n\n  _maybeReady () {\n    this._debug('maybeReady pc %s channel %s', this._pcReady, this._channelReady)\n    if (this._connected || this._connecting || !this._pcReady || !this._channelReady) return\n\n    this._connecting = true\n\n    // HACK: We can't rely on order here, for details see https://github.com/js-platform/node-webrtc/issues/339\n    const findCandidatePair = () => {\n      if (this.destroyed) return\n\n      this.getStats((err, items) => {\n        if (this.destroyed) return\n\n        // Treat getStats error as non-fatal. It's not essential.\n        if (err) items = []\n\n        const remoteCandidates = {}\n        const localCandidates = {}\n        const candidatePairs = {}\n        let foundSelectedCandidatePair = false\n\n        items.forEach(item => {\n          // TODO: Once all browsers support the hyphenated stats report types, remove\n          // the non-hypenated ones\n          if (item.type === 'remotecandidate' || item.type === 'remote-candidate') {\n            remoteCandidates[item.id] = item\n          }\n          if (item.type === 'localcandidate' || item.type === 'local-candidate') {\n            localCandidates[item.id] = item\n          }\n          if (item.type === 'candidatepair' || item.type === 'candidate-pair') {\n            candidatePairs[item.id] = item\n          }\n        })\n\n        const setSelectedCandidatePair = selectedCandidatePair => {\n          foundSelectedCandidatePair = true\n\n          let local = localCandidates[selectedCandidatePair.localCandidateId]\n\n          if (local && (local.ip || local.address)) {\n            // Spec\n            this.localAddress = local.ip || local.address\n            this.localPort = Number(local.port)\n          } else if (local && local.ipAddress) {\n            // Firefox\n            this.localAddress = local.ipAddress\n            this.localPort = Number(local.portNumber)\n          } else if (typeof selectedCandidatePair.googLocalAddress === 'string') {\n            // TODO: remove this once Chrome 58 is released\n            local = selectedCandidatePair.googLocalAddress.split(':')\n            this.localAddress = local[0]\n            this.localPort = Number(local[1])\n          }\n          if (this.localAddress) {\n            this.localFamily = this.localAddress.includes(':') ? 'IPv6' : 'IPv4'\n          }\n\n          let remote = remoteCandidates[selectedCandidatePair.remoteCandidateId]\n\n          if (remote && (remote.ip || remote.address)) {\n            // Spec\n            this.remoteAddress = remote.ip || remote.address\n            this.remotePort = Number(remote.port)\n          } else if (remote && remote.ipAddress) {\n            // Firefox\n            this.remoteAddress = remote.ipAddress\n            this.remotePort = Number(remote.portNumber)\n          } else if (typeof selectedCandidatePair.googRemoteAddress === 'string') {\n            // TODO: remove this once Chrome 58 is released\n            remote = selectedCandidatePair.googRemoteAddress.split(':')\n            this.remoteAddress = remote[0]\n            this.remotePort = Number(remote[1])\n          }\n          if (this.remoteAddress) {\n            this.remoteFamily = this.remoteAddress.includes(':') ? 'IPv6' : 'IPv4'\n          }\n\n          this._debug(\n            'connect local: %s:%s remote: %s:%s',\n            this.localAddress,\n            this.localPort,\n            this.remoteAddress,\n            this.remotePort\n          )\n        }\n\n        items.forEach(item => {\n          // Spec-compliant\n          if (item.type === 'transport' && item.selectedCandidatePairId) {\n            setSelectedCandidatePair(candidatePairs[item.selectedCandidatePairId])\n          }\n\n          // Old implementations\n          if (\n            (item.type === 'googCandidatePair' && item.googActiveConnection === 'true') ||\n            ((item.type === 'candidatepair' || item.type === 'candidate-pair') && item.selected)\n          ) {\n            setSelectedCandidatePair(item)\n          }\n        })\n\n        // Ignore candidate pair selection in browsers like Safari 11 that do not have any local or remote candidates\n        // But wait until at least 1 candidate pair is available\n        if (!foundSelectedCandidatePair && (!Object.keys(candidatePairs).length || Object.keys(localCandidates).length)) {\n          setTimeout(findCandidatePair, 100)\n          return\n        } else {\n          this._connecting = false\n          this._connected = true\n        }\n\n        if (this._chunk) {\n          try {\n            this.send(this._chunk)\n          } catch (err) {\n            return this.destroy(errCode(err, 'ERR_DATA_CHANNEL'))\n          }\n          this._chunk = null\n          this._debug('sent chunk from \"write before connect\"')\n\n          const cb = this._cb\n          this._cb = null\n          cb(null)\n        }\n\n        // If `bufferedAmountLowThreshold` and 'onbufferedamountlow' are unsupported,\n        // fallback to using setInterval to implement backpressure.\n        if (typeof this._channel.bufferedAmountLowThreshold !== 'number') {\n          this._interval = setInterval(() => this._onInterval(), 150)\n          if (this._interval.unref) this._interval.unref()\n        }\n\n        this._debug('connect')\n        this.emit('connect')\n      })\n    }\n    findCandidatePair()\n  }\n\n  _onInterval () {\n    if (!this._cb || !this._channel || this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n      return\n    }\n    this._onChannelBufferedAmountLow()\n  }\n\n  _onSignalingStateChange () {\n    if (this.destroyed) return\n\n    if (this._pc.signalingState === 'stable') {\n      this._isNegotiating = false\n\n      // HACK: Firefox doesn't yet support removing tracks when signalingState !== 'stable'\n      this._debug('flushing sender queue', this._sendersAwaitingStable)\n      this._sendersAwaitingStable.forEach(sender => {\n        this._pc.removeTrack(sender)\n        this._queuedNegotiation = true\n      })\n      this._sendersAwaitingStable = []\n\n      if (this._queuedNegotiation) {\n        this._debug('flushing negotiation queue')\n        this._queuedNegotiation = false\n        this._needsNegotiation() // negotiate again\n      } else {\n        this._debug('negotiated')\n        this.emit('negotiated')\n      }\n    }\n\n    this._debug('signalingStateChange %s', this._pc.signalingState)\n    this.emit('signalingStateChange', this._pc.signalingState)\n  }\n\n  _onIceCandidate (event) {\n    if (this.destroyed) return\n    if (event.candidate && this.trickle) {\n      this.emit('signal', {\n        type: 'candidate',\n        candidate: {\n          candidate: event.candidate.candidate,\n          sdpMLineIndex: event.candidate.sdpMLineIndex,\n          sdpMid: event.candidate.sdpMid\n        }\n      })\n    } else if (!event.candidate && !this._iceComplete) {\n      this._iceComplete = true\n      this.emit('_iceComplete')\n    }\n    // as soon as we've received one valid candidate start timeout\n    if (event.candidate) {\n      this._startIceCompleteTimeout()\n    }\n  }\n\n  _onChannelMessage (event) {\n    if (this.destroyed) return\n    let data = event.data\n    if (data instanceof ArrayBuffer) data = Buffer.from(data)\n    this.push(data)\n  }\n\n  _onChannelBufferedAmountLow () {\n    if (this.destroyed || !this._cb) return\n    this._debug('ending backpressure: bufferedAmount %d', this._channel.bufferedAmount)\n    const cb = this._cb\n    this._cb = null\n    cb(null)\n  }\n\n  _onChannelOpen () {\n    if (this._connected || this.destroyed) return\n    this._debug('on channel open')\n    this._channelReady = true\n    this._maybeReady()\n  }\n\n  _onChannelClose () {\n    if (this.destroyed) return\n    this._debug('on channel close')\n    this.destroy()\n  }\n\n  _onTrack (event) {\n    if (this.destroyed) return\n\n    event.streams.forEach(eventStream => {\n      this._debug('on track')\n      this.emit('track', event.track, eventStream)\n\n      this._remoteTracks.push({\n        track: event.track,\n        stream: eventStream\n      })\n\n      if (this._remoteStreams.some(remoteStream => {\n        return remoteStream.id === eventStream.id\n      })) return // Only fire one 'stream' event, even though there may be multiple tracks per stream\n\n      this._remoteStreams.push(eventStream)\n      queueMicrotask(() => {\n        this._debug('on stream')\n        this.emit('stream', eventStream) // ensure all tracks have been added\n      })\n    })\n  }\n\n  _debug () {\n    const args = [].slice.call(arguments)\n    args[0] = '[' + this._id + '] ' + args[0]\n    debug.apply(null, args)\n  }\n}\n\nPeer.WEBRTC_SUPPORT = !!getBrowserRTC()\n\n/**\n * Expose peer and data channel config for overriding all Peer\n * instances. Otherwise, just set opts.config or opts.channelConfig\n * when constructing a Peer.\n */\nPeer.config = {\n  iceServers: [\n    {\n      urls: [\n        'stun:stun.l.google.com:19302',\n        'stun:global.stun.twilio.com:3478'\n      ]\n    }\n  ],\n  sdpSemantics: 'unified-plan'\n}\n\nPeer.channelConfig = {}\n\nmodule.exports = Peer\n","'use strict'\n\n// limit of Crypto.getRandomValues()\n// https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues\nvar MAX_BYTES = 65536\n\n// Node supports requesting up to this number of bytes\n// https://github.com/nodejs/node/blob/master/lib/internal/crypto/random.js#L48\nvar MAX_UINT32 = 4294967295\n\nfunction oldBrowser () {\n  throw new Error('Secure random number generation is not supported by this browser.\\nUse Chrome, Firefox or Internet Explorer 11')\n}\n\nvar Buffer = require('safe-buffer').Buffer\nvar crypto = global.crypto || global.msCrypto\n\nif (crypto && crypto.getRandomValues) {\n  module.exports = randomBytes\n} else {\n  module.exports = oldBrowser\n}\n\nfunction randomBytes (size, cb) {\n  // phantomjs needs to throw\n  if (size > MAX_UINT32) throw new RangeError('requested too many random bytes')\n\n  var bytes = Buffer.allocUnsafe(size)\n\n  if (size > 0) {  // getRandomValues fails on IE if size == 0\n    if (size > MAX_BYTES) { // this is the max bytes crypto.getRandomValues\n      // can do at once see https://developer.mozilla.org/en-US/docs/Web/API/window.crypto.getRandomValues\n      for (var generated = 0; generated < size; generated += MAX_BYTES) {\n        // buffer.slice automatically checks if the end is past the end of\n        // the buffer so we don't have to here\n        crypto.getRandomValues(bytes.slice(generated, generated + MAX_BYTES))\n      }\n    } else {\n      crypto.getRandomValues(bytes)\n    }\n  }\n\n  if (typeof cb === 'function') {\n    return process.nextTick(function () {\n      cb(null, bytes)\n    })\n  }\n\n  return bytes\n}\n","// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar ERR_STREAM_PREMATURE_CLOSE = require('../../../errors').codes.ERR_STREAM_PREMATURE_CLOSE;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    callback.apply(this, args);\n  };\n}\n\nfunction noop() {}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction eos(stream, opts, callback) {\n  if (typeof opts === 'function') return eos(stream, null, opts);\n  if (!opts) opts = {};\n  callback = once(callback || noop);\n  var readable = opts.readable || opts.readable !== false && stream.readable;\n  var writable = opts.writable || opts.writable !== false && stream.writable;\n\n  var onlegacyfinish = function onlegacyfinish() {\n    if (!stream.writable) onfinish();\n  };\n\n  var writableEnded = stream._writableState && stream._writableState.finished;\n\n  var onfinish = function onfinish() {\n    writable = false;\n    writableEnded = true;\n    if (!readable) callback.call(stream);\n  };\n\n  var readableEnded = stream._readableState && stream._readableState.endEmitted;\n\n  var onend = function onend() {\n    readable = false;\n    readableEnded = true;\n    if (!writable) callback.call(stream);\n  };\n\n  var onerror = function onerror(err) {\n    callback.call(stream, err);\n  };\n\n  var onclose = function onclose() {\n    var err;\n\n    if (readable && !readableEnded) {\n      if (!stream._readableState || !stream._readableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n\n    if (writable && !writableEnded) {\n      if (!stream._writableState || !stream._writableState.ended) err = new ERR_STREAM_PREMATURE_CLOSE();\n      return callback.call(stream, err);\n    }\n  };\n\n  var onrequest = function onrequest() {\n    stream.req.on('finish', onfinish);\n  };\n\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish);\n    stream.on('abort', onclose);\n    if (stream.req) onrequest();else stream.on('request', onrequest);\n  } else if (writable && !stream._writableState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish);\n    stream.on('close', onlegacyfinish);\n  }\n\n  stream.on('end', onend);\n  stream.on('finish', onfinish);\n  if (opts.error !== false) stream.on('error', onerror);\n  stream.on('close', onclose);\n  return function () {\n    stream.removeListener('complete', onfinish);\n    stream.removeListener('abort', onclose);\n    stream.removeListener('request', onrequest);\n    if (stream.req) stream.req.removeListener('finish', onfinish);\n    stream.removeListener('end', onlegacyfinish);\n    stream.removeListener('close', onlegacyfinish);\n    stream.removeListener('finish', onfinish);\n    stream.removeListener('end', onend);\n    stream.removeListener('error', onerror);\n    stream.removeListener('close', onclose);\n  };\n}\n\nmodule.exports = eos;","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Events;\n(function (Events) {\n    /**\n     * Emitted when segment has been downloaded.\n     * Args: segment\n     */\n    Events[\"SegmentLoaded\"] = \"segment_loaded\";\n    /**\n     * Emitted when an error occurred while loading the segment.\n     * Args: segment, error\n     */\n    Events[\"SegmentError\"] = \"segment_error\";\n    /**\n     * Emitted for each segment that does not hit into a new segments queue when the load() method is called.\n     * Args: segment\n     */\n    Events[\"SegmentAbort\"] = \"segment_abort\";\n    /**\n     * Emitted when a peer is connected.\n     * Args: peer\n     */\n    Events[\"PeerConnect\"] = \"peer_connect\";\n    /**\n     * Emitted when a peer is disconnected.\n     * Args: peerId\n     */\n    Events[\"PeerClose\"] = \"peer_close\";\n    /**\n     * Emitted when a segment piece has been downloaded.\n     * Args: method (can be \"http\" or \"p2p\" only), bytes\n     */\n    Events[\"PieceBytesDownloaded\"] = \"piece_bytes_downloaded\";\n    /**\n     * Emitted when a segment piece has been uploaded.\n     * Args: method (can be \"p2p\" only), bytes\n     */\n    Events[\"PieceBytesUploaded\"] = \"piece_bytes_uploaded\";\n})(Events = exports.Events || (exports.Events = {}));\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","// originally pulled out of simple-peer\n\nmodule.exports = function getBrowserRTC () {\n  if (typeof window === 'undefined') return null\n  var wrtc = {\n    RTCPeerConnection: window.RTCPeerConnection || window.mozRTCPeerConnection ||\n      window.webkitRTCPeerConnection,\n    RTCSessionDescription: window.RTCSessionDescription ||\n      window.mozRTCSessionDescription || window.webkitRTCSessionDescription,\n    RTCIceCandidate: window.RTCIceCandidate || window.mozRTCIceCandidate ||\n      window.webkitRTCIceCandidate\n  }\n  if (!wrtc.RTCPeerConnection) return null\n  return wrtc\n}\n","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\nexports.finished = require('./lib/internal/streams/end-of-stream.js');\nexports.pipeline = require('./lib/internal/streams/pipeline.js');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict';\n\nmodule.exports = Readable;\n/*<replacement>*/\n\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n/*<replacement>*/\n\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function EElistenerCount(emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\n\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n\nvar Buffer = require('buffer').Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n/*<replacement>*/\n\n\nvar debugUtil = require('util');\n\nvar debug;\n\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function debug() {};\n}\n/*</replacement>*/\n\n\nvar BufferList = require('./internal/streams/buffer_list');\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nvar _require = require('./internal/streams/state'),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = require('../errors').codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_STREAM_PUSH_AFTER_EOF = _require$codes.ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT = _require$codes.ERR_STREAM_UNSHIFT_AFTER_END_EVENT; // Lazy loaded to improve the startup performance.\n\n\nvar StringDecoder;\nvar createReadableStreamAsyncIterator;\nvar from;\n\nrequire('inherits')(Readable, Stream);\n\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn); // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (Array.isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode; // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n\n  this.highWaterMark = getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex); // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false; // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n\n  this.sync = true; // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n  this.paused = true; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // Should .destroy() be called after 'end' (and potentially 'finish')\n\n  this.autoDestroy = !!options.autoDestroy; // has it been destroyed\n\n  this.destroyed = false; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // the number of writers that are awaiting a drain event in .pipe()s\n\n  this.awaitDrain = 0; // if true, a maybeReadMore has been scheduled\n\n  this.readingMore = false;\n  this.decoder = null;\n  this.encoding = null;\n\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n  if (!(this instanceof Readable)) return new Readable(options); // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  this._readableState = new ReadableState(options, this, isDuplex); // legacy\n\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._readableState === undefined) {\n      return false;\n    }\n\n    return this._readableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._readableState.destroyed = value;\n  }\n});\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\n\nReadable.prototype._destroy = function (err, cb) {\n  cb(err);\n}; // Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\n\n\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n}; // Unshift should *always* be something directly out of read()\n\n\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  debug('readableAddChunk', chunk);\n  var state = stream._readableState;\n\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n\n    if (er) {\n      errorOrDestroy(stream, er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT());else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF());\n      } else if (state.destroyed) {\n        return false;\n      } else {\n        state.reading = false;\n\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n      maybeReadMore(stream, state);\n    }\n  } // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n\n\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    state.awaitDrain = 0;\n    stream.emit('data', chunk);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n    if (state.needReadable) emitReadable(stream);\n  }\n\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk);\n  }\n\n  return er;\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n}; // backwards compatibility.\n\n\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  var decoder = new StringDecoder(enc);\n  this._readableState.decoder = decoder; // If setEncoding(null), decoder.encoding equals utf8\n\n  this._readableState.encoding = this._readableState.decoder.encoding; // Iterate over current buffer to convert already stored Buffers:\n\n  var p = this._readableState.buffer.head;\n  var content = '';\n\n  while (p !== null) {\n    content += decoder.write(p.data);\n    p = p.next;\n  }\n\n  this._readableState.buffer.clear();\n\n  if (content !== '') this._readableState.buffer.push(content);\n  this._readableState.length = content.length;\n  return this;\n}; // Don't raise the hwm > 1GB\n\n\nvar MAX_HWM = 0x40000000;\n\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    // TODO(ronag): Throw ERR_VALUE_OUT_OF_RANGE.\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n\n  return n;\n} // This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\n\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  } // If we're asking for more than the current hwm, then raise the hwm.\n\n\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n; // Don't have enough\n\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n\n  return state.length;\n} // you can override either this method, or the async _read(n) below.\n\n\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n  if (n !== 0) state.emittedReadable = false; // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n\n  if (n === 0 && state.needReadable && ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state); // if we've ended, and we're now clear, then finish it up.\n\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  } // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n  // if we need a readable event, then we need to do some reading.\n\n\n  var doRead = state.needReadable;\n  debug('need readable', doRead); // if we currently have less than the highWaterMark, then also read some\n\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  } // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n\n\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true; // if the length is currently zero, then we *need* a readable event.\n\n    if (state.length === 0) state.needReadable = true; // call internal read method\n\n    this._read(state.highWaterMark);\n\n    state.sync = false; // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark;\n    n = 0;\n  } else {\n    state.length -= n;\n    state.awaitDrain = 0;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true; // If we tried to read() past the EOF, then emit end on the next tick.\n\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk');\n  if (state.ended) return;\n\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n\n  state.ended = true;\n\n  if (state.sync) {\n    // if we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call\n    emitReadable(stream);\n  } else {\n    // emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false;\n\n    if (!state.emittedReadable) {\n      state.emittedReadable = true;\n      emitReadable_(stream);\n    }\n  }\n} // Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\n\n\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  debug('emitReadable', state.needReadable, state.emittedReadable);\n  state.needReadable = false;\n\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    process.nextTick(emitReadable_, stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  var state = stream._readableState;\n  debug('emitReadable_', state.destroyed, state.length, state.ended);\n\n  if (!state.destroyed && (state.length || state.ended)) {\n    stream.emit('readable');\n    state.emittedReadable = false;\n  } // The stream needs another readable event if\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n\n\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark;\n  flow(stream);\n} // at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\n\n\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    process.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (!state.reading && !state.ended && (state.length < state.highWaterMark || state.flowing && state.length === 0)) {\n    var len = state.length;\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length) // didn't get any data, stop spinning.\n      break;\n  }\n\n  state.readingMore = false;\n} // abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\n\n\nReadable.prototype._read = function (n) {\n  errorOrDestroy(this, new ERR_METHOD_NOT_IMPLEMENTED('_read()'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) process.nextTick(endFn);else src.once('end', endFn);\n  dest.on('unpipe', onunpipe);\n\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  } // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n\n\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n  var cleanedUp = false;\n\n  function cleanup() {\n    debug('cleanup'); // cleanup event handlers once the pipe is broken\n\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n    cleanedUp = true; // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  src.on('data', ondata);\n\n  function ondata(chunk) {\n    debug('ondata');\n    var ret = dest.write(chunk);\n    debug('dest.write', ret);\n\n    if (ret === false) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n      }\n\n      src.pause();\n    }\n  } // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n\n\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) errorOrDestroy(dest, er);\n  } // Make sure our error handler is attached before userland ones.\n\n\n  prependListener(dest, 'error', onerror); // Both close and finish should trigger unpipe, but only once.\n\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n\n  dest.once('close', onclose);\n\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  } // tell the dest that it's being piped to\n\n\n  dest.emit('pipe', src); // start the flow if it hasn't been started already.\n\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function pipeOnDrainFunctionResult() {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = {\n    hasUnpiped: false\n  }; // if we're not piping anywhere, then do nothing.\n\n  if (state.pipesCount === 0) return this; // just one destination.  most common case.\n\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n    if (!dest) dest = state.pipes; // got a match.\n\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  } // slow case. multiple pipe destinations.\n\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      });\n    }\n\n    return this;\n  } // try to find the right one.\n\n\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n  dest.emit('unpipe', this, unpipeInfo);\n  return this;\n}; // set up data events if they are asked for\n// Ensure readable listeners eventually get something\n\n\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n  var state = this._readableState;\n\n  if (ev === 'data') {\n    // update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0; // Try start flowing on next tick if stream isn't explicitly paused\n\n    if (state.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.flowing = false;\n      state.emittedReadable = false;\n      debug('on readable', state.length, state.reading);\n\n      if (state.length) {\n        emitReadable(this);\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this);\n      }\n    }\n  }\n\n  return res;\n};\n\nReadable.prototype.addListener = Readable.prototype.on;\n\nReadable.prototype.removeListener = function (ev, fn) {\n  var res = Stream.prototype.removeListener.call(this, ev, fn);\n\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nReadable.prototype.removeAllListeners = function (ev) {\n  var res = Stream.prototype.removeAllListeners.apply(this, arguments);\n\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this);\n  }\n\n  return res;\n};\n\nfunction updateReadableListening(self) {\n  var state = self._readableState;\n  state.readableListening = self.listenerCount('readable') > 0;\n\n  if (state.resumeScheduled && !state.paused) {\n    // flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true; // crude way to check if we should resume\n  } else if (self.listenerCount('data') > 0) {\n    self.resume();\n  }\n}\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n} // pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\n\n\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n\n  if (!state.flowing) {\n    debug('resume'); // we flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume()\n\n    state.flowing = !state.readableListening;\n    resume(this, state);\n  }\n\n  state.paused = false;\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    process.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  debug('resume', state.reading);\n\n  if (!state.reading) {\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n\n  if (this._readableState.flowing !== false) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n\n  this._readableState.paused = true;\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n\n  while (state.flowing && stream.read() !== null) {\n    ;\n  }\n} // wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\n\n\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n  stream.on('end', function () {\n    debug('wrapped end');\n\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk); // don't skip over falsy values in objectMode\n\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  }); // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function methodWrap(method) {\n        return function methodWrapReturnFunction() {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  } // proxy certain important events.\n\n\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  } // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n\n\n  this._read = function (n) {\n    debug('wrapped _read', n);\n\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nif (typeof Symbol === 'function') {\n  Readable.prototype[Symbol.asyncIterator] = function () {\n    if (createReadableStreamAsyncIterator === undefined) {\n      createReadableStreamAsyncIterator = require('./internal/streams/async_iterator');\n    }\n\n    return createReadableStreamAsyncIterator(this);\n  };\n}\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.highWaterMark;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState && this._readableState.buffer;\n  }\n});\nObject.defineProperty(Readable.prototype, 'readableFlowing', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.flowing;\n  },\n  set: function set(state) {\n    if (this._readableState) {\n      this._readableState.flowing = state;\n    }\n  }\n}); // exposed for testing purposes only.\n\nReadable._fromList = fromList;\nObject.defineProperty(Readable.prototype, 'readableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._readableState.length;\n  }\n}); // Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\n\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.first();else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = state.buffer.consume(n, state.decoder);\n  }\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n  debug('endReadable', state.endEmitted);\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    process.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length); // Check that we didn't get one last unshift.\n\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n\n    if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well\n      var wState = stream._writableState;\n\n      if (!wState || wState.autoDestroy && wState.finished) {\n        stream.destroy();\n      }\n    }\n  }\n}\n\nif (typeof Symbol === 'function') {\n  Readable.from = function (iterable, opts) {\n    if (from === undefined) {\n      from = require('./internal/streams/from');\n    }\n\n    return from(Readable, iterable, opts);\n  };\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict'; // undocumented cb() API, needed for core, not for public API\n\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        process.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorNT, this, err);\n      }\n    }\n\n    return this;\n  } // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  } // if this is a duplex stream mark the writable part as destroyed as well\n\n\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        process.nextTick(emitErrorAndCloseNT, _this, err);\n      } else {\n        process.nextTick(emitCloseNT, _this);\n      }\n    } else if (cb) {\n      process.nextTick(emitCloseNT, _this);\n      cb(err);\n    } else {\n      process.nextTick(emitCloseNT, _this);\n    }\n  });\n\n  return this;\n}\n\nfunction emitErrorAndCloseNT(self, err) {\n  emitErrorNT(self, err);\n  emitCloseNT(self);\n}\n\nfunction emitCloseNT(self) {\n  if (self._writableState && !self._writableState.emitClose) return;\n  if (self._readableState && !self._readableState.emitClose) return;\n  self.emit('close');\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nfunction errorOrDestroy(stream, err) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n  var rState = stream._readableState;\n  var wState = stream._writableState;\n  if (rState && rState.autoDestroy || wState && wState.autoDestroy) stream.destroy(err);else stream.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy,\n  errorOrDestroy: errorOrDestroy\n};","'use strict';\n\nvar ERR_INVALID_OPT_VALUE = require('../../../errors').codes.ERR_INVALID_OPT_VALUE;\n\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null;\n}\n\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  var hwm = highWaterMarkFrom(options, isDuplex, duplexKey);\n\n  if (hwm != null) {\n    if (!(isFinite(hwm) && Math.floor(hwm) === hwm) || hwm < 0) {\n      var name = isDuplex ? duplexKey : 'highWaterMark';\n      throw new ERR_INVALID_OPT_VALUE(name, hwm);\n    }\n\n    return Math.floor(hwm);\n  } // Default value\n\n\n  return state.objectMode ? 16 : 16 * 1024;\n}\n\nmodule.exports = {\n  getHighWaterMark: getHighWaterMark\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n'use strict';\n\nmodule.exports = Writable;\n/* <replacement> */\n\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n} // It seems a linked list but it is not\n// there will be only 2 of these for each stream\n\n\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\n\n\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n/*<replacement>*/\n\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n\nvar Buffer = require('buffer').Buffer;\n\nvar OurUint8Array = global.Uint8Array || function () {};\n\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\n\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nvar _require = require('./internal/streams/state'),\n    getHighWaterMark = _require.getHighWaterMark;\n\nvar _require$codes = require('../errors').codes,\n    ERR_INVALID_ARG_TYPE = _require$codes.ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_STREAM_CANNOT_PIPE = _require$codes.ERR_STREAM_CANNOT_PIPE,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED,\n    ERR_STREAM_NULL_VALUES = _require$codes.ERR_STREAM_NULL_VALUES,\n    ERR_STREAM_WRITE_AFTER_END = _require$codes.ERR_STREAM_WRITE_AFTER_END,\n    ERR_UNKNOWN_ENCODING = _require$codes.ERR_UNKNOWN_ENCODING;\n\nvar errorOrDestroy = destroyImpl.errorOrDestroy;\n\nrequire('inherits')(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream, isDuplex) {\n  Duplex = Duplex || require('./_stream_duplex');\n  options = options || {}; // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof Duplex; // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n\n  this.objectMode = !!options.objectMode;\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode; // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n\n  this.highWaterMark = getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex); // if _final has been called\n\n  this.finalCalled = false; // drain event flag.\n\n  this.needDrain = false; // at the start of calling end()\n\n  this.ending = false; // when end() has been called, and returned\n\n  this.ended = false; // when 'finish' is emitted\n\n  this.finished = false; // has it been destroyed\n\n  this.destroyed = false; // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode; // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n\n  this.defaultEncoding = options.defaultEncoding || 'utf8'; // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n\n  this.length = 0; // a flag to see when we're in the middle of a write.\n\n  this.writing = false; // when true all writes will be buffered until .uncork() call\n\n  this.corked = 0; // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n\n  this.sync = true; // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n\n  this.bufferProcessing = false; // the callback that's passed to _write(chunk,cb)\n\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  }; // the callback that the user supplies to write(chunk,encoding,cb)\n\n\n  this.writecb = null; // the amount that is being written when _write is called.\n\n  this.writelen = 0;\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null; // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n\n  this.pendingcb = 0; // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n\n  this.prefinished = false; // True if the error was already emitted and should not be thrown again\n\n  this.errorEmitted = false; // Should close be emitted on destroy. Defaults to true.\n\n  this.emitClose = options.emitClose !== false; // Should .destroy() be called after 'finish' (and potentially 'end')\n\n  this.autoDestroy = !!options.autoDestroy; // count buffered requests\n\n  this.bufferedRequestCount = 0; // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function writableStateBufferGetter() {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})(); // Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\n\n\nvar realHasInstance;\n\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function value(object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function realHasInstance(object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex'); // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5\n\n  var isDuplex = this instanceof Duplex;\n  if (!isDuplex && !realHasInstance.call(Writable, this)) return new Writable(options);\n  this._writableState = new WritableState(options, this, isDuplex); // legacy.\n\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n    if (typeof options.writev === 'function') this._writev = options.writev;\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n} // Otherwise people can pipe Writable streams, which is just wrong.\n\n\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE());\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new ERR_STREAM_WRITE_AFTER_END(); // TODO: defer error events consistently everywhere, not just the cb\n\n  errorOrDestroy(stream, er);\n  process.nextTick(cb, er);\n} // Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\n\n\nfunction validChunk(stream, state, chunk, cb) {\n  var er;\n\n  if (chunk === null) {\n    er = new ERR_STREAM_NULL_VALUES();\n  } else if (typeof chunk !== 'string' && !state.objectMode) {\n    er = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer'], chunk);\n  }\n\n  if (er) {\n    errorOrDestroy(stream, er);\n    process.nextTick(cb, er);\n    return false;\n  }\n\n  return true;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n  if (typeof cb !== 'function') cb = nop;\n  if (state.ending) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  this._writableState.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new ERR_UNKNOWN_ENCODING(encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableBuffer', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState && this._writableState.getBuffer();\n  }\n});\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.highWaterMark;\n  }\n}); // if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\n\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n\n  var len = state.objectMode ? 1 : chunk.length;\n  state.length += len;\n  var ret = state.length < state.highWaterMark; // we must ensure that previous needDrain will not be reset to false.\n\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'));else if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    process.nextTick(cb, er); // this can emit finish, and it will always happen\n    // after error\n\n    process.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    errorOrDestroy(stream, er); // this can emit finish, but finish must\n    // always follow error\n\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n  if (typeof cb !== 'function') throw new ERR_MULTIPLE_CALLBACK();\n  onwriteStateUpdate(state);\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state) || stream.destroyed;\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      process.nextTick(afterWrite, stream, state, finished, cb);\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n} // Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\n\n\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n} // if there's something in the buffer waiting, then process it\n\n\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n    var count = 0;\n    var allBuffers = true;\n\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n\n    buffer.allBuffers = allBuffers;\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish); // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--; // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_write()'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding); // .end() fully uncorks\n\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  } // ignore unnecessary end() calls.\n\n\n  if (!state.ending) endWritable(this, state, cb);\n  return this;\n};\n\nObject.defineProperty(Writable.prototype, 'writableLength', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    return this._writableState.length;\n  }\n});\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\n\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n\n    if (err) {\n      errorOrDestroy(stream, err);\n    }\n\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\n\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.pendingcb++;\n      state.finalCalled = true;\n      process.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n\n  if (need) {\n    prefinish(stream, state);\n\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n\n      if (state.autoDestroy) {\n        // In case of duplex streams we need a way to detect\n        // if the readable side is ready for autoDestroy as well\n        var rState = stream._readableState;\n\n        if (!rState || rState.autoDestroy && rState.endEmitted) {\n          stream.destroy();\n        }\n      }\n    }\n  }\n\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n\n  if (cb) {\n    if (state.finished) process.nextTick(cb);else stream.once('finish', cb);\n  }\n\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  } // reuse the free corkReq.\n\n\n  state.corkedRequestsFree.next = corkReq;\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function get() {\n    if (this._writableState === undefined) {\n      return false;\n    }\n\n    return this._writableState.destroyed;\n  },\n  set: function set(value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    } // backward compatibility, the user is explicitly\n    // managing destroyed\n\n\n    this._writableState.destroyed = value;\n  }\n});\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\n\nWritable.prototype._destroy = function (err, cb) {\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n'use strict';\n\nmodule.exports = Transform;\n\nvar _require$codes = require('../errors').codes,\n    ERR_METHOD_NOT_IMPLEMENTED = _require$codes.ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_MULTIPLE_CALLBACK = _require$codes.ERR_MULTIPLE_CALLBACK,\n    ERR_TRANSFORM_ALREADY_TRANSFORMING = _require$codes.ERR_TRANSFORM_ALREADY_TRANSFORMING,\n    ERR_TRANSFORM_WITH_LENGTH_0 = _require$codes.ERR_TRANSFORM_WITH_LENGTH_0;\n\nvar Duplex = require('./_stream_duplex');\n\nrequire('inherits')(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n  var cb = ts.writecb;\n\n  if (cb === null) {\n    return this.emit('error', new ERR_MULTIPLE_CALLBACK());\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n  cb(er);\n  var rs = this._readableState;\n  rs.reading = false;\n\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n  Duplex.call(this, options);\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  }; // start out asking for a readable event once data is transformed.\n\n  this._readableState.needReadable = true; // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  } // When the writable side finishes, then flush out anything remaining.\n\n\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function' && !this._readableState.destroyed) {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n}; // This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\n\n\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  cb(new ERR_METHOD_NOT_IMPLEMENTED('_transform()'));\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n}; // Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\n\n\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && !ts.transforming) {\n    ts.transforming = true;\n\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data); // TODO(BridgeAR): Write a test for these two error cases\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n\n  if (stream._writableState.length) throw new ERR_TRANSFORM_WITH_LENGTH_0();\n  if (stream._transformState.transforming) throw new ERR_TRANSFORM_ALREADY_TRANSFORMING();\n  return stream.push(null);\n}","/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nlet promise\n\nmodule.exports = typeof queueMicrotask === 'function'\n  ? queueMicrotask.bind(globalThis)\n  // reuse resolved promise, and allocate it lazily\n  : cb => (promise || (promise = Promise.resolve()))\n    .then(cb)\n    .catch(err => setTimeout(() => { throw err }, 0))\n","/**\n * Functions/constants needed by both the client and server.\n */\n\nexports.DEFAULT_ANNOUNCE_PEERS = 50\nexports.MAX_ANNOUNCE_PEERS = 82\n\nexports.binaryToHex = function (str) {\n  if (typeof str !== 'string') {\n    str = String(str)\n  }\n  return Buffer.from(str, 'binary').toString('hex')\n}\n\nexports.hexToBinary = function (str) {\n  if (typeof str !== 'string') {\n    str = String(str)\n  }\n  return Buffer.from(str, 'hex').toString('binary')\n}\n\nvar config = require('./common-node')\nObject.assign(exports, config)\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Debug = require(\"debug\");\nconst stringly_typed_event_emitter_1 = require(\"./stringly-typed-event-emitter\");\nconst buffer_1 = require(\"buffer\");\nvar MediaPeerCommands;\n(function (MediaPeerCommands) {\n    MediaPeerCommands[MediaPeerCommands[\"SegmentData\"] = 0] = \"SegmentData\";\n    MediaPeerCommands[MediaPeerCommands[\"SegmentAbsent\"] = 1] = \"SegmentAbsent\";\n    MediaPeerCommands[MediaPeerCommands[\"SegmentsMap\"] = 2] = \"SegmentsMap\";\n    MediaPeerCommands[MediaPeerCommands[\"SegmentRequest\"] = 3] = \"SegmentRequest\";\n    MediaPeerCommands[MediaPeerCommands[\"CancelSegmentRequest\"] = 4] = \"CancelSegmentRequest\";\n})(MediaPeerCommands || (MediaPeerCommands = {}));\nvar MediaPeerSegmentStatus;\n(function (MediaPeerSegmentStatus) {\n    MediaPeerSegmentStatus[MediaPeerSegmentStatus[\"Loaded\"] = 0] = \"Loaded\";\n    MediaPeerSegmentStatus[MediaPeerSegmentStatus[\"LoadingByHttp\"] = 1] = \"LoadingByHttp\";\n})(MediaPeerSegmentStatus = exports.MediaPeerSegmentStatus || (exports.MediaPeerSegmentStatus = {}));\nclass DownloadingSegment {\n    constructor(id, size) {\n        this.id = id;\n        this.size = size;\n        this.bytesDownloaded = 0;\n        this.pieces = [];\n    }\n}\nclass MediaPeer extends stringly_typed_event_emitter_1.STEEmitter {\n    constructor(peer, settings) {\n        super();\n        this.peer = peer;\n        this.settings = settings;\n        this.remoteAddress = \"\";\n        this.downloadingSegmentId = null;\n        this.downloadingSegment = null;\n        this.segmentsMap = new Map();\n        this.debug = Debug(\"p2pml:media-peer\");\n        this.timer = null;\n        this.onPeerConnect = () => {\n            this.debug(\"peer connect\", this.id, this);\n            this.remoteAddress = this.peer.remoteAddress;\n            this.emit(\"connect\", this);\n        };\n        this.onPeerClose = () => {\n            this.debug(\"peer close\", this.id, this);\n            this.terminateSegmentRequest();\n            this.emit(\"close\", this);\n        };\n        this.onPeerError = (error) => {\n            this.debug(\"peer error\", this.id, error, this);\n        };\n        this.onPeerData = (data) => {\n            const command = this.getJsonCommand(data);\n            if (command == null) {\n                this.receiveSegmentPiece(data);\n                return;\n            }\n            if (this.downloadingSegment) {\n                this.debug(\"peer segment download is interrupted by a command\", this.id, this);\n                const segmentId = this.downloadingSegment.id;\n                this.terminateSegmentRequest();\n                this.emit(\"segment-error\", this, segmentId, \"Segment download is interrupted by a command\");\n                return;\n            }\n            this.debug(\"peer receive command\", this.id, command, this);\n            switch (command.c) {\n                case MediaPeerCommands.SegmentsMap:\n                    this.segmentsMap = this.createSegmentsMap(command.m);\n                    this.emit(\"data-updated\");\n                    break;\n                case MediaPeerCommands.SegmentRequest:\n                    this.emit(\"segment-request\", this, command.i);\n                    break;\n                case MediaPeerCommands.SegmentData:\n                    if (this.downloadingSegmentId === command.i) {\n                        this.downloadingSegment = new DownloadingSegment(command.i, command.s);\n                        this.cancelResponseTimeoutTimer();\n                    }\n                    break;\n                case MediaPeerCommands.SegmentAbsent:\n                    if (this.downloadingSegmentId === command.i) {\n                        this.terminateSegmentRequest();\n                        this.segmentsMap.delete(command.i);\n                        this.emit(\"segment-absent\", this, command.i);\n                    }\n                    break;\n                case MediaPeerCommands.CancelSegmentRequest:\n                    // TODO: peer stop sending buffer\n                    break;\n                default:\n                    break;\n            }\n        };\n        this.peer.on(\"connect\", this.onPeerConnect);\n        this.peer.on(\"close\", this.onPeerClose);\n        this.peer.on(\"error\", this.onPeerError);\n        this.peer.on(\"data\", this.onPeerData);\n        this.id = peer.id;\n    }\n    receiveSegmentPiece(data) {\n        if (!this.downloadingSegment) {\n            // The segment was not requested or canceled\n            this.debug(\"peer segment not requested\", this.id, this);\n            return;\n        }\n        this.downloadingSegment.bytesDownloaded += data.byteLength;\n        this.downloadingSegment.pieces.push(data);\n        this.emit(\"bytes-downloaded\", this, data.byteLength);\n        const segmentId = this.downloadingSegment.id;\n        if (this.downloadingSegment.bytesDownloaded == this.downloadingSegment.size) {\n            const segmentData = new Uint8Array(this.downloadingSegment.size);\n            let offset = 0;\n            for (const piece of this.downloadingSegment.pieces) {\n                segmentData.set(new Uint8Array(piece), offset);\n                offset += piece.byteLength;\n            }\n            this.debug(\"peer segment download done\", this.id, segmentId, this);\n            this.terminateSegmentRequest();\n            this.emit(\"segment-loaded\", this, segmentId, segmentData.buffer);\n        }\n        else if (this.downloadingSegment.bytesDownloaded > this.downloadingSegment.size) {\n            this.debug(\"peer segment download bytes mismatch\", this.id, segmentId, this);\n            this.terminateSegmentRequest();\n            this.emit(\"segment-error\", this, segmentId, \"Too many bytes received for segment\");\n        }\n    }\n    getJsonCommand(data) {\n        const bytes = new Uint8Array(data);\n        // Serialized JSON string check by first, second and last characters: '{\" .... }'\n        if (bytes[0] == 123 && bytes[1] == 34 && bytes[data.byteLength - 1] == 125) {\n            try {\n                return JSON.parse(new TextDecoder().decode(data));\n            }\n            catch (_a) {\n            }\n        }\n        return null;\n    }\n    createSegmentsMap(segments) {\n        if (segments == undefined || !(segments instanceof Object)) {\n            return new Map();\n        }\n        const segmentsMap = new Map();\n        for (const streamSwarmId of Object.keys(segments)) {\n            const swarmData = segments[streamSwarmId];\n            if (!(swarmData instanceof Array) ||\n                (swarmData.length !== 2) ||\n                (typeof swarmData[0] !== \"string\") ||\n                !(swarmData[1] instanceof Array)) {\n                return new Map();\n            }\n            const segmentsIds = swarmData[0].split(\"|\");\n            const segmentsStatuses = swarmData[1];\n            if (segmentsIds.length !== segmentsStatuses.length) {\n                return new Map();\n            }\n            for (let i = 0; i < segmentsIds.length; i++) {\n                const segmentStatus = segmentsStatuses[i];\n                if (typeof segmentStatus !== \"number\" || MediaPeerSegmentStatus[segmentStatus] === undefined) {\n                    return new Map();\n                }\n                segmentsMap.set(`${streamSwarmId}+${segmentsIds[i]}`, segmentStatus);\n            }\n        }\n        return segmentsMap;\n    }\n    sendCommand(command) {\n        this.debug(\"peer send command\", this.id, command, this);\n        this.peer.write(JSON.stringify(command));\n    }\n    destroy() {\n        this.debug(\"peer destroy\", this.id, this);\n        this.terminateSegmentRequest();\n        this.peer.destroy();\n    }\n    getDownloadingSegmentId() {\n        return this.downloadingSegmentId;\n    }\n    getSegmentsMap() {\n        return this.segmentsMap;\n    }\n    sendSegmentsMap(segmentsMap) {\n        this.sendCommand({ c: MediaPeerCommands.SegmentsMap, m: segmentsMap });\n    }\n    sendSegmentData(segmentId, data) {\n        this.sendCommand({\n            c: MediaPeerCommands.SegmentData,\n            i: segmentId,\n            s: data.byteLength\n        });\n        let bytesLeft = data.byteLength;\n        while (bytesLeft > 0) {\n            const bytesToSend = (bytesLeft >= this.settings.webRtcMaxMessageSize ? this.settings.webRtcMaxMessageSize : bytesLeft);\n            const buffer = buffer_1.Buffer.from(data, data.byteLength - bytesLeft, bytesToSend);\n            this.peer.write(buffer);\n            bytesLeft -= bytesToSend;\n        }\n        this.emit(\"bytes-uploaded\", this, data.byteLength);\n    }\n    sendSegmentAbsent(segmentId) {\n        this.sendCommand({ c: MediaPeerCommands.SegmentAbsent, i: segmentId });\n    }\n    requestSegment(segmentId) {\n        if (this.downloadingSegmentId) {\n            throw new Error(\"A segment is already downloading: \" + this.downloadingSegmentId);\n        }\n        this.sendCommand({ c: MediaPeerCommands.SegmentRequest, i: segmentId });\n        this.downloadingSegmentId = segmentId;\n        this.runResponseTimeoutTimer();\n    }\n    cancelSegmentRequest() {\n        let downloadingSegment;\n        if (this.downloadingSegmentId) {\n            const segmentId = this.downloadingSegmentId;\n            downloadingSegment = this.downloadingSegment ? this.downloadingSegment.pieces : undefined;\n            this.terminateSegmentRequest();\n            this.sendCommand({ c: MediaPeerCommands.CancelSegmentRequest, i: segmentId });\n        }\n        return downloadingSegment;\n    }\n    runResponseTimeoutTimer() {\n        this.timer = setTimeout(() => {\n            this.timer = null;\n            if (!this.downloadingSegmentId) {\n                return;\n            }\n            const segmentId = this.downloadingSegmentId;\n            this.cancelSegmentRequest();\n            this.emit(\"segment-timeout\", this, segmentId); // TODO: send peer not responding event\n        }, this.settings.p2pSegmentDownloadTimeout);\n    }\n    cancelResponseTimeoutTimer() {\n        if (this.timer) {\n            clearTimeout(this.timer);\n            this.timer = null;\n        }\n    }\n    terminateSegmentRequest() {\n        this.downloadingSegmentId = null;\n        this.downloadingSegment = null;\n        this.cancelResponseTimeoutTimer();\n    }\n}\nexports.MediaPeer = MediaPeer;\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst p2p_media_loader_core_1 = require(\"p2p-media-loader-core\");\nconst m3u8_parser_1 = require(\"m3u8-parser\");\nconst defaultSettings = {\n    forwardSegmentCount: 20,\n    swarmId: undefined,\n    assetsStorage: undefined,\n};\nclass SegmentManager {\n    constructor(loader, settings = {}) {\n        this.masterPlaylist = null;\n        this.variantPlaylists = new Map();\n        this.segmentRequest = null;\n        this.playQueue = [];\n        this.onSegmentLoaded = (segment) => {\n            if (this.segmentRequest && (this.segmentRequest.segmentUrl === segment.url) &&\n                (byterangeToString(this.segmentRequest.segmentByterange) === segment.range)) {\n                this.segmentRequest.onSuccess(segment.data.slice(0), segment.downloadBandwidth);\n                this.segmentRequest = null;\n            }\n        };\n        this.onSegmentError = (segment, error) => {\n            if (this.segmentRequest && (this.segmentRequest.segmentUrl === segment.url) &&\n                (byterangeToString(this.segmentRequest.segmentByterange) === segment.range)) {\n                this.segmentRequest.onError(error);\n                this.segmentRequest = null;\n            }\n        };\n        this.onSegmentAbort = (segment) => {\n            if (this.segmentRequest && (this.segmentRequest.segmentUrl === segment.url) &&\n                (byterangeToString(this.segmentRequest.segmentByterange) === segment.range)) {\n                this.segmentRequest.onError(\"Loading aborted: internal abort\");\n                this.segmentRequest = null;\n            }\n        };\n        this.settings = Object.assign(Object.assign({}, defaultSettings), settings);\n        this.loader = loader;\n        this.loader.on(p2p_media_loader_core_1.Events.SegmentLoaded, this.onSegmentLoaded);\n        this.loader.on(p2p_media_loader_core_1.Events.SegmentError, this.onSegmentError);\n        this.loader.on(p2p_media_loader_core_1.Events.SegmentAbort, this.onSegmentAbort);\n    }\n    getSettings() {\n        return this.settings;\n    }\n    processPlaylist(requestUrl, content, responseUrl) {\n        const parser = new m3u8_parser_1.Parser();\n        parser.push(content);\n        parser.end();\n        const playlist = new Playlist(requestUrl, responseUrl, parser.manifest);\n        if (playlist.manifest.playlists) {\n            this.masterPlaylist = playlist;\n            for (const [key, variantPlaylist] of this.variantPlaylists) {\n                const { streamSwarmId, found, index } = this.getStreamSwarmId(variantPlaylist.requestUrl);\n                if (!found) {\n                    this.variantPlaylists.delete(key);\n                }\n                else {\n                    variantPlaylist.streamSwarmId = streamSwarmId;\n                    variantPlaylist.streamId = \"V\" + index.toString();\n                }\n            }\n        }\n        else {\n            const { streamSwarmId, found, index } = this.getStreamSwarmId(requestUrl);\n            if (found || (this.masterPlaylist === null)) { // do not add audio and subtitles to variants\n                playlist.streamSwarmId = streamSwarmId;\n                playlist.streamId = (this.masterPlaylist === null ? undefined : \"V\" + index.toString());\n                this.variantPlaylists.set(requestUrl, playlist);\n                this.updateSegments();\n            }\n        }\n    }\n    async loadPlaylist(url) {\n        const assetsStorage = this.settings.assetsStorage;\n        let xhr;\n        if (assetsStorage !== undefined) {\n            let masterSwarmId;\n            masterSwarmId = this.getMasterSwarmId();\n            if (masterSwarmId === undefined) {\n                masterSwarmId = url.split(\"?\")[0];\n            }\n            const asset = await assetsStorage.getAsset(url, undefined, masterSwarmId);\n            if (asset !== undefined) {\n                xhr = {\n                    responseURL: asset.responseUri,\n                    response: asset.data,\n                };\n            }\n            else {\n                xhr = await this.loadContent(url, \"text\");\n                assetsStorage.storeAsset({\n                    masterManifestUri: this.masterPlaylist !== null ? this.masterPlaylist.requestUrl : url,\n                    masterSwarmId: masterSwarmId,\n                    requestUri: url,\n                    responseUri: xhr.responseURL,\n                    data: xhr.response,\n                });\n            }\n        }\n        else {\n            xhr = await this.loadContent(url, \"text\");\n        }\n        this.processPlaylist(url, xhr.response, xhr.responseURL);\n        return xhr;\n    }\n    async loadSegment(url, byterange) {\n        const segmentLocation = this.getSegmentLocation(url, byterange);\n        const byteRangeString = byterangeToString(byterange);\n        if (!segmentLocation) {\n            let content;\n            // Not a segment from variants; usually can be: init, audio or subtitles segment, encription key etc.\n            const assetsStorage = this.settings.assetsStorage;\n            if (assetsStorage !== undefined) {\n                let masterManifestUri = this.masterPlaylist !== null ? this.masterPlaylist.requestUrl : undefined;\n                let masterSwarmId;\n                masterSwarmId = this.getMasterSwarmId();\n                if (masterSwarmId === undefined && this.variantPlaylists.size === 1) {\n                    masterSwarmId = this.variantPlaylists.values().next().value.requestUrl.split(\"?\")[0];\n                }\n                if (masterManifestUri === undefined && this.variantPlaylists.size === 1) {\n                    masterManifestUri = this.variantPlaylists.values().next().value.requestUrl;\n                }\n                if (masterSwarmId !== undefined && masterManifestUri !== undefined) {\n                    const asset = await assetsStorage.getAsset(url, byteRangeString, masterSwarmId);\n                    if (asset !== undefined) {\n                        content = asset.data;\n                    }\n                    else {\n                        const xhr = await this.loadContent(url, \"arraybuffer\", byteRangeString);\n                        content = xhr.response;\n                        assetsStorage.storeAsset({\n                            masterManifestUri: masterManifestUri,\n                            masterSwarmId: masterSwarmId,\n                            requestUri: url,\n                            requestRange: byteRangeString,\n                            responseUri: xhr.responseURL,\n                            data: content,\n                        });\n                    }\n                }\n            }\n            if (content === undefined) {\n                const xhr = await this.loadContent(url, \"arraybuffer\", byteRangeString);\n                content = xhr.response;\n            }\n            return { content, downloadBandwidth: 0 };\n        }\n        const segmentSequence = (segmentLocation.playlist.manifest.mediaSequence ? segmentLocation.playlist.manifest.mediaSequence : 0)\n            + segmentLocation.segmentIndex;\n        if (this.playQueue.length > 0) {\n            const previousSegment = this.playQueue[this.playQueue.length - 1];\n            if (previousSegment.segmentSequence !== segmentSequence - 1) {\n                // Reset play queue in case of segment loading out of sequence\n                this.playQueue = [];\n            }\n        }\n        if (this.segmentRequest) {\n            this.segmentRequest.onError(\"Cancel segment request: simultaneous segment requests are not supported\");\n        }\n        const promise = new Promise((resolve, reject) => {\n            this.segmentRequest = new SegmentRequest(url, byterange, segmentSequence, segmentLocation.playlist.requestUrl, (content, downloadBandwidth) => resolve({ content, downloadBandwidth }), error => reject(error));\n        });\n        this.playQueue.push({ segmentUrl: url, segmentByterange: byterange, segmentSequence: segmentSequence });\n        this.loadSegments(segmentLocation.playlist, segmentLocation.segmentIndex, true);\n        return promise;\n    }\n    setPlayingSegment(url, byterange, start, duration) {\n        const urlIndex = this.playQueue.findIndex(segment => (segment.segmentUrl == url) && compareByterange(segment.segmentByterange, byterange));\n        if (urlIndex >= 0) {\n            this.playQueue = this.playQueue.slice(urlIndex);\n            this.playQueue[0].playPosition = { start, duration };\n            this.updateSegments();\n        }\n    }\n    setPlayingSegmentByCurrentTime(playheadPosition) {\n        if (this.playQueue.length === 0 || !this.playQueue[0].playPosition) {\n            return;\n        }\n        const currentSegmentPosition = this.playQueue[0].playPosition;\n        const segmentEndTime = currentSegmentPosition.start + currentSegmentPosition.duration;\n        if (segmentEndTime - playheadPosition < 0.2) {\n            // means that current segment is (almost) finished playing\n            // remove it from queue\n            this.playQueue = this.playQueue.slice(1);\n            this.updateSegments();\n        }\n    }\n    abortSegment(url, byterange) {\n        if (this.segmentRequest && (this.segmentRequest.segmentUrl === url) &&\n            compareByterange(this.segmentRequest.segmentByterange, byterange)) {\n            this.segmentRequest.onSuccess(undefined, 0);\n            this.segmentRequest = null;\n        }\n    }\n    async destroy() {\n        if (this.segmentRequest) {\n            this.segmentRequest.onError(\"Loading aborted: object destroyed\");\n            this.segmentRequest = null;\n        }\n        this.masterPlaylist = null;\n        this.variantPlaylists.clear();\n        this.playQueue = [];\n        if (this.settings.assetsStorage !== undefined) {\n            await this.settings.assetsStorage.destroy();\n        }\n        await this.loader.destroy();\n    }\n    updateSegments() {\n        if (!this.segmentRequest) {\n            return;\n        }\n        const segmentLocation = this.getSegmentLocation(this.segmentRequest.segmentUrl, this.segmentRequest.segmentByterange);\n        if (segmentLocation) {\n            this.loadSegments(segmentLocation.playlist, segmentLocation.segmentIndex, false);\n        }\n    }\n    getSegmentLocation(url, byterange) {\n        for (const playlist of this.variantPlaylists.values()) {\n            const segmentIndex = playlist.getSegmentIndex(url, byterange);\n            if (segmentIndex >= 0) {\n                return { playlist: playlist, segmentIndex: segmentIndex };\n            }\n        }\n        return undefined;\n    }\n    async loadSegments(playlist, segmentIndex, requestFirstSegment) {\n        const segments = [];\n        const playlistSegments = playlist.manifest.segments;\n        const initialSequence = playlist.manifest.mediaSequence ? playlist.manifest.mediaSequence : 0;\n        let loadSegmentId = null;\n        let priority = Math.max(0, this.playQueue.length - 1);\n        const masterSwarmId = this.getMasterSwarmId();\n        for (let i = segmentIndex; i < playlistSegments.length && segments.length < this.settings.forwardSegmentCount; ++i) {\n            const segment = playlist.manifest.segments[i];\n            const url = playlist.getSegmentAbsoluteUrl(segment.uri);\n            const byterange = segment.byterange;\n            const id = this.getSegmentId(playlist, initialSequence + i);\n            segments.push({\n                id: id,\n                url: url,\n                masterSwarmId: masterSwarmId !== undefined ? masterSwarmId : playlist.streamSwarmId,\n                masterManifestUri: this.masterPlaylist !== null ? this.masterPlaylist.requestUrl : playlist.requestUrl,\n                streamId: playlist.streamId,\n                sequence: (initialSequence + i).toString(),\n                range: byterangeToString(byterange),\n                priority: priority++,\n            });\n            if (requestFirstSegment && !loadSegmentId) {\n                loadSegmentId = id;\n            }\n        }\n        this.loader.load(segments, playlist.streamSwarmId);\n        if (loadSegmentId) {\n            const segment = await this.loader.getSegment(loadSegmentId);\n            if (segment) { // Segment already loaded by loader\n                this.onSegmentLoaded(segment);\n            }\n        }\n    }\n    getSegmentId(playlist, segmentSequence) {\n        return `${playlist.streamSwarmId}+${segmentSequence}`;\n    }\n    getMasterSwarmId() {\n        const settingsSwarmId = (this.settings.swarmId && (this.settings.swarmId.length !== 0)) ? this.settings.swarmId : undefined;\n        if (settingsSwarmId !== undefined) {\n            return settingsSwarmId;\n        }\n        return (this.masterPlaylist !== null)\n            ? this.masterPlaylist.requestUrl.split(\"?\")[0]\n            : undefined;\n    }\n    getStreamSwarmId(playlistUrl) {\n        const masterSwarmId = this.getMasterSwarmId();\n        if (this.masterPlaylist !== null) {\n            for (let i = 0; i < this.masterPlaylist.manifest.playlists.length; ++i) {\n                const url = new URL(this.masterPlaylist.manifest.playlists[i].uri, this.masterPlaylist.responseUrl).toString();\n                if (url === playlistUrl) {\n                    return { streamSwarmId: `${masterSwarmId}+V${i}`, found: true, index: i };\n                }\n            }\n        }\n        return {\n            streamSwarmId: masterSwarmId !== undefined ? masterSwarmId : playlistUrl.split(\"?\")[0],\n            found: false,\n            index: -1\n        };\n    }\n    async loadContent(url, responseType, range) {\n        return new Promise((resolve, reject) => {\n            const xhr = new XMLHttpRequest();\n            xhr.open(\"GET\", url, true);\n            xhr.responseType = responseType;\n            if (range) {\n                xhr.setRequestHeader(\"Range\", range);\n            }\n            xhr.addEventListener(\"readystatechange\", () => {\n                if (xhr.readyState !== 4) {\n                    return;\n                }\n                if (xhr.status >= 200 && xhr.status < 300) {\n                    resolve(xhr);\n                }\n                else {\n                    reject(xhr.statusText);\n                }\n            });\n            const xhrSetup = this.loader.getSettings().xhrSetup;\n            if (xhrSetup) {\n                xhrSetup(xhr, url);\n            }\n            xhr.send();\n        });\n    }\n}\nexports.SegmentManager = SegmentManager;\nclass Playlist {\n    constructor(requestUrl, responseUrl, manifest) {\n        this.requestUrl = requestUrl;\n        this.responseUrl = responseUrl;\n        this.manifest = manifest;\n        this.streamSwarmId = \"\";\n    }\n    getSegmentIndex(url, byterange) {\n        for (let i = 0; i < this.manifest.segments.length; ++i) {\n            const segment = this.manifest.segments[i];\n            const segmentUrl = this.getSegmentAbsoluteUrl(segment.uri);\n            if ((url === segmentUrl) && compareByterange(segment.byterange, byterange)) {\n                return i;\n            }\n        }\n        return -1;\n    }\n    getSegmentAbsoluteUrl(segmentUrl) {\n        return new URL(segmentUrl, this.responseUrl).toString();\n    }\n}\nclass SegmentRequest {\n    constructor(segmentUrl, segmentByterange, segmentSequence, playlistRequestUrl, onSuccess, onError) {\n        this.segmentUrl = segmentUrl;\n        this.segmentByterange = segmentByterange;\n        this.segmentSequence = segmentSequence;\n        this.playlistRequestUrl = playlistRequestUrl;\n        this.onSuccess = onSuccess;\n        this.onError = onError;\n    }\n}\nfunction compareByterange(b1, b2) {\n    return (b1 === undefined)\n        ? (b2 === undefined)\n        : ((b2 !== undefined) && (b1.length === b2.length) && (b1.offset === b2.offset));\n}\nfunction byterangeToString(byterange) {\n    if (byterange === undefined) {\n        return undefined;\n    }\n    const end = byterange.offset + byterange.length - 1;\n    return `bytes=${byterange.offset}-${end}`;\n}\n","\nmodule.exports = function load (src, opts, cb) {\n  var head = document.head || document.getElementsByTagName('head')[0]\n  var script = document.createElement('script')\n\n  if (typeof opts === 'function') {\n    cb = opts\n    opts = {}\n  }\n\n  opts = opts || {}\n  cb = cb || function() {}\n\n  script.type = opts.type || 'text/javascript'\n  script.charset = opts.charset || 'utf8';\n  script.async = 'async' in opts ? !!opts.async : true\n  script.src = src\n\n  if (opts.attrs) {\n    setAttributes(script, opts.attrs)\n  }\n\n  if (opts.text) {\n    script.text = '' + opts.text\n  }\n\n  var onend = 'onload' in script ? stdOnEnd : ieOnEnd\n  onend(script, cb)\n\n  // some good legacy browsers (firefox) fail the 'in' detection above\n  // so as a fallback we always set onload\n  // old IE will ignore this and new IE will set onload\n  if (!script.onload) {\n    stdOnEnd(script, cb);\n  }\n\n  head.appendChild(script)\n}\n\nfunction setAttributes(script, attrs) {\n  for (var attr in attrs) {\n    script.setAttribute(attr, attrs[attr]);\n  }\n}\n\nfunction stdOnEnd (script, cb) {\n  script.onload = function () {\n    this.onerror = this.onload = null\n    cb(null, script)\n  }\n  script.onerror = function () {\n    // this.onload = null here is necessary\n    // because even IE9 works not like others\n    this.onerror = this.onload = null\n    cb(new Error('Failed to load ' + this.src), script)\n  }\n}\n\nfunction ieOnEnd (script, cb) {\n  script.onreadystatechange = function () {\n    if (this.readyState != 'complete' && this.readyState != 'loaded') return\n    this.onreadystatechange = null\n    cb(null, script) // there is no way to catch loading errors in IE8\n  }\n}\n","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","/*! @name @videojs/vhs-utils @version 2.2.1 @license MIT */\n'use strict';\n\nvar window = require('global/window');\n\nfunction _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }\n\nvar window__default = /*#__PURE__*/_interopDefaultLegacy(window);\n\nvar atob = function atob(s) {\n  return window__default['default'].atob ? window__default['default'].atob(s) : Buffer.from(s, 'base64').toString('binary');\n};\n\nfunction decodeB64ToUint8Array(b64Text) {\n  var decodedString = atob(b64Text);\n  var array = new Uint8Array(decodedString.length);\n\n  for (var i = 0; i < decodedString.length; i++) {\n    array[i] = decodedString.charCodeAt(i);\n  }\n\n  return array;\n}\n\nmodule.exports = decodeB64ToUint8Array;\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = require(\"events\");\nconst p2p_media_loader_core_1 = require(\"p2p-media-loader-core\");\nconst segment_manager_1 = require(\"./segment-manager\");\nconst hlsjs_loader_1 = require(\"./hlsjs-loader\");\nconst hlsjs_loader_class_1 = require(\"./hlsjs-loader-class\");\nclass Engine extends events_1.EventEmitter {\n    constructor(settings = {}) {\n        super();\n        this.loader = new p2p_media_loader_core_1.HybridLoader(settings.loader);\n        this.segmentManager = new segment_manager_1.SegmentManager(this.loader, settings.segments);\n        Object.keys(p2p_media_loader_core_1.Events)\n            .map(eventKey => p2p_media_loader_core_1.Events[eventKey])\n            .forEach(event => this.loader.on(event, (...args) => this.emit(event, ...args)));\n    }\n    static isSupported() {\n        return p2p_media_loader_core_1.HybridLoader.isSupported();\n    }\n    createLoaderClass() {\n        return hlsjs_loader_class_1.createHlsJsLoaderClass(hlsjs_loader_1.HlsJsLoader, this);\n    }\n    async destroy() {\n        await this.segmentManager.destroy();\n    }\n    getSettings() {\n        return {\n            segments: this.segmentManager.getSettings(),\n            loader: this.loader.getSettings()\n        };\n    }\n    getDetails() {\n        return {\n            loader: this.loader.getDetails()\n        };\n    }\n    setPlayingSegment(url, byterange, start, duration) {\n        this.segmentManager.setPlayingSegment(url, byterange, start, duration);\n    }\n    setPlayingSegmentByCurrentTime(playheadPosition) {\n        this.segmentManager.setPlayingSegmentByCurrentTime(playheadPosition);\n    }\n}\nexports.Engine = Engine;\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Debug = require(\"debug\");\nconst loader_interface_1 = require(\"./loader-interface\");\nconst events_1 = require(\"events\");\nconst http_media_manager_1 = require(\"./http-media-manager\");\nconst p2p_media_manager_1 = require(\"./p2p-media-manager\");\nconst media_peer_1 = require(\"./media-peer\");\nconst bandwidth_approximator_1 = require(\"./bandwidth-approximator\");\nconst segments_memory_storage_1 = require(\"./segments-memory-storage\");\nconst getBrowserRTC = require(\"get-browser-rtc\");\nconst Peer = require(\"simple-peer\");\nconst defaultSettings = {\n    cachedSegmentExpiration: 5 * 60 * 1000,\n    cachedSegmentsCount: 30,\n    useP2P: true,\n    consumeOnly: false,\n    requiredSegmentsPriority: 1,\n    simultaneousHttpDownloads: 2,\n    httpDownloadProbability: 0.1,\n    httpDownloadProbabilityInterval: 1000,\n    httpDownloadProbabilitySkipIfNoPeers: false,\n    httpFailedSegmentTimeout: 10000,\n    httpDownloadMaxPriority: 20,\n    httpDownloadInitialTimeout: 0,\n    httpDownloadInitialTimeoutPerSegment: 4000,\n    httpUseRanges: false,\n    simultaneousP2PDownloads: 3,\n    p2pDownloadMaxPriority: 20,\n    p2pSegmentDownloadTimeout: 60000,\n    webRtcMaxMessageSize: 64 * 1024 - 1,\n    trackerAnnounce: [\"wss://tracker.novage.com.ua\", \"wss://tracker.openwebtorrent.com\"],\n    peerRequestsPerAnnounce: 10,\n    rtcConfig: Peer.config\n};\nclass HybridLoader extends events_1.EventEmitter {\n    constructor(settings = {}) {\n        super();\n        this.debug = Debug(\"p2pml:hybrid-loader\");\n        this.debugSegments = Debug(\"p2pml:hybrid-loader-segments\");\n        this.segmentsQueue = [];\n        this.bandwidthApproximator = new bandwidth_approximator_1.BandwidthApproximator();\n        this.httpDownloadInitialTimeoutTimestamp = -Infinity;\n        this.processInitialSegmentTimeout = async () => {\n            if (this.httpRandomDownloadInterval === undefined) {\n                return; // Instance destroyed\n            }\n            if (this.masterSwarmId !== undefined) {\n                const storageSegments = await this.segmentsStorage.getSegmentsMap(this.masterSwarmId);\n                if (this.processSegmentsQueue(storageSegments) && !this.settings.consumeOnly) {\n                    this.p2pManager.sendSegmentsMapToAll(this.createSegmentsMap(storageSegments));\n                }\n            }\n            if (this.httpDownloadInitialTimeoutTimestamp !== -Infinity) {\n                // Set one more timeout for a next segment\n                setTimeout(this.processInitialSegmentTimeout, this.settings.httpDownloadInitialTimeoutPerSegment);\n            }\n        };\n        this.downloadRandomSegmentOverHttp = async () => {\n            if (this.masterSwarmId === undefined ||\n                this.httpRandomDownloadInterval === undefined ||\n                this.httpDownloadInitialTimeoutTimestamp !== -Infinity ||\n                this.httpManager.getActiveDownloadsCount() >= this.settings.simultaneousHttpDownloads ||\n                (this.settings.httpDownloadProbabilitySkipIfNoPeers && this.p2pManager.getPeers().size === 0) ||\n                this.settings.consumeOnly) {\n                return;\n            }\n            const storageSegments = await this.segmentsStorage.getSegmentsMap(this.masterSwarmId);\n            const segmentsMap = this.p2pManager.getOvrallSegmentsMap();\n            const pendingQueue = this.segmentsQueue.filter(s => !this.p2pManager.isDownloading(s) &&\n                !this.httpManager.isDownloading(s) &&\n                !segmentsMap.has(s.id) &&\n                !this.httpManager.isFailed(s) &&\n                (s.priority <= this.settings.httpDownloadMaxPriority) &&\n                !storageSegments.has(s.id));\n            if (pendingQueue.length == 0) {\n                return;\n            }\n            if (Math.random() > this.settings.httpDownloadProbability * pendingQueue.length) {\n                return;\n            }\n            const segment = pendingQueue[Math.floor(Math.random() * pendingQueue.length)];\n            this.debugSegments(\"HTTP download (random)\", segment.priority, segment.url);\n            this.httpManager.download(segment);\n            this.p2pManager.sendSegmentsMapToAll(this.createSegmentsMap(storageSegments));\n        };\n        this.onPieceBytesDownloaded = (method, bytes, peerId) => {\n            this.bandwidthApproximator.addBytes(bytes, this.now());\n            this.emit(loader_interface_1.Events.PieceBytesDownloaded, method, bytes, peerId);\n        };\n        this.onPieceBytesUploaded = (method, bytes, peerId) => {\n            this.emit(loader_interface_1.Events.PieceBytesUploaded, method, bytes, peerId);\n        };\n        this.onSegmentLoaded = async (segment, data, peerId) => {\n            this.debugSegments(\"segment loaded\", segment.id, segment.url);\n            if (this.masterSwarmId === undefined) {\n                return;\n            }\n            segment.data = data;\n            segment.downloadBandwidth = this.bandwidthApproximator.getBandwidth(this.now());\n            await this.segmentsStorage.storeSegment(segment);\n            this.emit(loader_interface_1.Events.SegmentLoaded, segment, peerId);\n            let storageSegments;\n            storageSegments = (storageSegments === undefined ? await this.segmentsStorage.getSegmentsMap(this.masterSwarmId) : storageSegments);\n            this.processSegmentsQueue(storageSegments);\n            if (!this.settings.consumeOnly) {\n                this.p2pManager.sendSegmentsMapToAll(this.createSegmentsMap(storageSegments));\n            }\n        };\n        this.onSegmentError = async (segment, details, peerId) => {\n            this.debugSegments(\"segment error\", segment.id, segment.url, peerId, details);\n            this.emit(loader_interface_1.Events.SegmentError, segment, details, peerId);\n            if (this.masterSwarmId !== undefined) {\n                const storageSegments = await this.segmentsStorage.getSegmentsMap(this.masterSwarmId);\n                if (this.processSegmentsQueue(storageSegments) && !this.settings.consumeOnly) {\n                    this.p2pManager.sendSegmentsMapToAll(this.createSegmentsMap(storageSegments));\n                }\n            }\n        };\n        this.onPeerConnect = async (peer) => {\n            this.emit(loader_interface_1.Events.PeerConnect, peer);\n            if (!this.settings.consumeOnly && this.masterSwarmId !== undefined) {\n                this.p2pManager.sendSegmentsMap(peer.id, this.createSegmentsMap(await this.segmentsStorage.getSegmentsMap(this.masterSwarmId)));\n            }\n        };\n        this.onPeerClose = (peerId) => {\n            this.emit(loader_interface_1.Events.PeerClose, peerId);\n        };\n        this.onTrackerUpdate = async (data) => {\n            if (this.httpDownloadInitialTimeoutTimestamp !== -Infinity &&\n                data.incomplete !== undefined && data.incomplete <= 1) {\n                this.debugSegments(\"cancel initial HTTP download timeout - no peers\");\n                this.httpDownloadInitialTimeoutTimestamp = -Infinity;\n                if (this.masterSwarmId !== undefined) {\n                    const storageSegments = await this.segmentsStorage.getSegmentsMap(this.masterSwarmId);\n                    if (this.processSegmentsQueue(storageSegments) && !this.settings.consumeOnly) {\n                        this.p2pManager.sendSegmentsMapToAll(this.createSegmentsMap(storageSegments));\n                    }\n                }\n            }\n        };\n        this.settings = Object.assign(Object.assign({}, defaultSettings), settings);\n        if (settings.bufferedSegmentsCount) {\n            if (settings.p2pDownloadMaxPriority === undefined) {\n                this.settings.p2pDownloadMaxPriority = settings.bufferedSegmentsCount;\n            }\n            if (settings.httpDownloadMaxPriority === undefined) {\n                this.settings.p2pDownloadMaxPriority = settings.bufferedSegmentsCount;\n            }\n            delete this.settings.bufferedSegmentsCount;\n        }\n        this.segmentsStorage = (this.settings.segmentsStorage === undefined\n            ? new segments_memory_storage_1.SegmentsMemoryStorage(this.settings)\n            : this.settings.segmentsStorage);\n        this.debug(\"loader settings\", this.settings);\n        this.httpManager = this.createHttpManager();\n        this.httpManager.on(\"segment-loaded\", this.onSegmentLoaded);\n        this.httpManager.on(\"segment-error\", this.onSegmentError);\n        this.httpManager.on(\"bytes-downloaded\", (bytes) => this.onPieceBytesDownloaded(\"http\", bytes));\n        this.p2pManager = this.createP2PManager();\n        this.p2pManager.on(\"segment-loaded\", this.onSegmentLoaded);\n        this.p2pManager.on(\"segment-error\", this.onSegmentError);\n        this.p2pManager.on(\"peer-data-updated\", async () => {\n            if (this.masterSwarmId === undefined) {\n                return;\n            }\n            const storageSegments = await this.segmentsStorage.getSegmentsMap(this.masterSwarmId);\n            if (this.processSegmentsQueue(storageSegments) && !this.settings.consumeOnly) {\n                this.p2pManager.sendSegmentsMapToAll(this.createSegmentsMap(storageSegments));\n            }\n        });\n        this.p2pManager.on(\"bytes-downloaded\", (bytes, peerId) => this.onPieceBytesDownloaded(\"p2p\", bytes, peerId));\n        this.p2pManager.on(\"bytes-uploaded\", (bytes, peerId) => this.onPieceBytesUploaded(\"p2p\", bytes, peerId));\n        this.p2pManager.on(\"peer-connected\", this.onPeerConnect);\n        this.p2pManager.on(\"peer-closed\", this.onPeerClose);\n        this.p2pManager.on(\"tracker-update\", this.onTrackerUpdate);\n    }\n    static isSupported() {\n        const browserRtc = getBrowserRTC();\n        return (browserRtc && (browserRtc.RTCPeerConnection.prototype.createDataChannel !== undefined));\n    }\n    createHttpManager() {\n        return new http_media_manager_1.HttpMediaManager(this.settings);\n    }\n    createP2PManager() {\n        return new p2p_media_manager_1.P2PMediaManager(this.segmentsStorage, this.settings);\n    }\n    async load(segments, streamSwarmId) {\n        if (this.httpRandomDownloadInterval === undefined) { // Do once on first call\n            this.httpRandomDownloadInterval = setInterval(this.downloadRandomSegmentOverHttp, this.settings.httpDownloadProbabilityInterval);\n            if (this.settings.httpDownloadInitialTimeout > 0 && this.settings.httpDownloadInitialTimeoutPerSegment > 0) {\n                // Initialize initial HTTP download timeout (i.e. download initial segments over P2P)\n                this.debugSegments(\"enable initial HTTP download timeout\", this.settings.httpDownloadInitialTimeout, \"per segment\", this.settings.httpDownloadInitialTimeoutPerSegment);\n                this.httpDownloadInitialTimeoutTimestamp = this.now();\n                setTimeout(this.processInitialSegmentTimeout, this.settings.httpDownloadInitialTimeoutPerSegment + 100);\n            }\n        }\n        if (segments.length > 0) {\n            this.masterSwarmId = segments[0].masterSwarmId;\n        }\n        if (this.masterSwarmId !== undefined) {\n            this.p2pManager.setStreamSwarmId(streamSwarmId, this.masterSwarmId);\n        }\n        this.debug(\"load segments\");\n        let updateSegmentsMap = false;\n        // stop all http requests and p2p downloads for segments that are not in the new load\n        for (const segment of this.segmentsQueue) {\n            if (!segments.find(f => f.url == segment.url)) {\n                this.debug(\"remove segment\", segment.url);\n                if (this.httpManager.isDownloading(segment)) {\n                    updateSegmentsMap = true;\n                    this.httpManager.abort(segment);\n                }\n                else {\n                    this.p2pManager.abort(segment);\n                }\n                this.emit(loader_interface_1.Events.SegmentAbort, segment);\n            }\n        }\n        if (this.debug.enabled) {\n            for (const segment of segments) {\n                if (!this.segmentsQueue.find(f => f.url == segment.url)) {\n                    this.debug(\"add segment\", segment.url);\n                }\n            }\n        }\n        this.segmentsQueue = segments;\n        if (this.masterSwarmId === undefined) {\n            return;\n        }\n        let storageSegments = await this.segmentsStorage.getSegmentsMap(this.masterSwarmId);\n        updateSegmentsMap = (this.processSegmentsQueue(storageSegments) || updateSegmentsMap);\n        if (await this.cleanSegmentsStorage()) {\n            storageSegments = await this.segmentsStorage.getSegmentsMap(this.masterSwarmId);\n            updateSegmentsMap = true;\n        }\n        if (updateSegmentsMap && !this.settings.consumeOnly) {\n            this.p2pManager.sendSegmentsMapToAll(this.createSegmentsMap(storageSegments));\n        }\n    }\n    async getSegment(id) {\n        return this.masterSwarmId === undefined\n            ? undefined\n            : this.segmentsStorage.getSegment(id, this.masterSwarmId);\n    }\n    getSettings() {\n        return this.settings;\n    }\n    getDetails() {\n        return {\n            peerId: this.p2pManager.getPeerId()\n        };\n    }\n    async destroy() {\n        if (this.httpRandomDownloadInterval !== undefined) {\n            clearInterval(this.httpRandomDownloadInterval);\n            this.httpRandomDownloadInterval = undefined;\n        }\n        this.httpDownloadInitialTimeoutTimestamp = -Infinity;\n        this.segmentsQueue = [];\n        this.httpManager.destroy();\n        this.p2pManager.destroy();\n        this.masterSwarmId = undefined;\n        await this.segmentsStorage.destroy();\n    }\n    processSegmentsQueue(storageSegments) {\n        this.debugSegments(\"process segments queue. priority\", this.segmentsQueue.length > 0 ? this.segmentsQueue[0].priority : 0);\n        if (this.masterSwarmId === undefined || this.segmentsQueue.length === 0) {\n            return false;\n        }\n        let updateSegmentsMap = false;\n        let segmentsMap;\n        let httpAllowed = true;\n        if (this.httpDownloadInitialTimeoutTimestamp !== -Infinity) {\n            let firstNotDownloadePriority;\n            for (const segment of this.segmentsQueue) {\n                if (!storageSegments.has(segment.id)) {\n                    firstNotDownloadePriority = segment.priority;\n                    break;\n                }\n            }\n            const httpTimeout = this.now() - this.httpDownloadInitialTimeoutTimestamp;\n            httpAllowed = (httpTimeout >= this.settings.httpDownloadInitialTimeout)\n                || ((firstNotDownloadePriority !== undefined) && (httpTimeout > this.settings.httpDownloadInitialTimeoutPerSegment) && (firstNotDownloadePriority <= 0));\n            if (httpAllowed) {\n                this.debugSegments(\"cancel initial HTTP download timeout - timed out\");\n                this.httpDownloadInitialTimeoutTimestamp = -Infinity;\n            }\n        }\n        for (let index = 0; index < this.segmentsQueue.length; index++) {\n            const segment = this.segmentsQueue[index];\n            if (storageSegments.has(segment.id) || this.httpManager.isDownloading(segment)) {\n                continue;\n            }\n            if (segment.priority <= this.settings.requiredSegmentsPriority && httpAllowed && !this.httpManager.isFailed(segment)) {\n                // Download required segments over HTTP\n                if (this.httpManager.getActiveDownloadsCount() >= this.settings.simultaneousHttpDownloads) {\n                    // Not enough HTTP download resources. Abort one of the HTTP downloads.\n                    for (let i = this.segmentsQueue.length - 1; i > index; i--) {\n                        const segmentToAbort = this.segmentsQueue[i];\n                        if (this.httpManager.isDownloading(segmentToAbort)) {\n                            this.debugSegments(\"cancel HTTP download\", segmentToAbort.priority, segmentToAbort.url);\n                            this.httpManager.abort(segmentToAbort);\n                            break;\n                        }\n                    }\n                }\n                if (this.httpManager.getActiveDownloadsCount() < this.settings.simultaneousHttpDownloads) {\n                    // Abort P2P download of the required segment if any and force HTTP download\n                    const downloadedPieces = this.p2pManager.abort(segment);\n                    this.httpManager.download(segment, downloadedPieces);\n                    this.debugSegments(\"HTTP download (priority)\", segment.priority, segment.url);\n                    updateSegmentsMap = true;\n                    continue;\n                }\n            }\n            if (this.p2pManager.isDownloading(segment)) {\n                continue;\n            }\n            if (segment.priority <= this.settings.requiredSegmentsPriority) { // Download required segments over P2P\n                segmentsMap = segmentsMap ? segmentsMap : this.p2pManager.getOvrallSegmentsMap();\n                if (segmentsMap.get(segment.id) !== media_peer_1.MediaPeerSegmentStatus.Loaded) {\n                    continue;\n                }\n                if (this.p2pManager.getActiveDownloadsCount() >= this.settings.simultaneousP2PDownloads) {\n                    // Not enough P2P download resources. Abort one of the P2P downloads.\n                    for (let i = this.segmentsQueue.length - 1; i > index; i--) {\n                        const segmentToAbort = this.segmentsQueue[i];\n                        if (this.p2pManager.isDownloading(segmentToAbort)) {\n                            this.debugSegments(\"cancel P2P download\", segmentToAbort.priority, segmentToAbort.url);\n                            this.p2pManager.abort(segmentToAbort);\n                            break;\n                        }\n                    }\n                }\n                if (this.p2pManager.getActiveDownloadsCount() < this.settings.simultaneousP2PDownloads) {\n                    if (this.p2pManager.download(segment)) {\n                        this.debugSegments(\"P2P download (priority)\", segment.priority, segment.url);\n                        continue;\n                    }\n                }\n                continue;\n            }\n            if (this.p2pManager.getActiveDownloadsCount() < this.settings.simultaneousP2PDownloads &&\n                segment.priority <= this.settings.p2pDownloadMaxPriority) {\n                if (this.p2pManager.download(segment)) {\n                    this.debugSegments(\"P2P download\", segment.priority, segment.url);\n                }\n            }\n        }\n        return updateSegmentsMap;\n    }\n    getStreamSwarmId(segment) {\n        return segment.streamId === undefined ? segment.masterSwarmId : `${segment.masterSwarmId}+${segment.streamId}`;\n    }\n    createSegmentsMap(storageSegments) {\n        const segmentsMap = {};\n        const addSegmentToMap = (segment, status) => {\n            const streamSwarmId = this.getStreamSwarmId(segment);\n            const segmentId = segment.sequence;\n            let segmentsIdsAndStatuses = segmentsMap[streamSwarmId];\n            if (segmentsIdsAndStatuses === undefined) {\n                segmentsIdsAndStatuses = [\"\", []];\n                segmentsMap[streamSwarmId] = segmentsIdsAndStatuses;\n            }\n            const segmentsStatuses = segmentsIdsAndStatuses[1];\n            segmentsIdsAndStatuses[0] += ((segmentsStatuses.length == 0) ? segmentId : `|${segmentId}`);\n            segmentsStatuses.push(status);\n        };\n        for (const storageSegment of storageSegments.values()) {\n            addSegmentToMap(storageSegment.segment, media_peer_1.MediaPeerSegmentStatus.Loaded);\n        }\n        for (const download of this.httpManager.getActiveDownloads().values()) {\n            addSegmentToMap(download.segment, media_peer_1.MediaPeerSegmentStatus.LoadingByHttp);\n        }\n        return segmentsMap;\n    }\n    async cleanSegmentsStorage() {\n        if (this.masterSwarmId === undefined) {\n            return false;\n        }\n        return this.segmentsStorage.clean(this.masterSwarmId, (id) => this.segmentsQueue.find(queueSegment => queueSegment.id === id) !== undefined);\n    }\n    now() {\n        return performance.now();\n    }\n}\nexports.HybridLoader = HybridLoader;\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\t\t// Debug.formatArgs = formatArgs;\n\t\t// debug.rawLog = rawLog;\n\n\t\t// env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Debug = require(\"debug\");\nconst stringly_typed_event_emitter_1 = require(\"./stringly-typed-event-emitter\");\nclass HttpMediaManager extends stringly_typed_event_emitter_1.STEEmitter {\n    constructor(settings) {\n        super();\n        this.settings = settings;\n        this.xhrRequests = new Map();\n        this.failedSegments = new Map();\n        this.debug = Debug(\"p2pml:http-media-manager\");\n        this.now = () => performance.now();\n    }\n    download(segment, downloadedPieces) {\n        if (this.isDownloading(segment)) {\n            return;\n        }\n        this.cleanTimedOutFailedSegments();\n        const segmentUrl = this.settings.segmentUrlBuilder\n            ? this.settings.segmentUrlBuilder(segment)\n            : segment.url;\n        this.debug(\"http segment download\", segmentUrl);\n        segment.requestUrl = segmentUrl;\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", segmentUrl, true);\n        xhr.responseType = \"arraybuffer\";\n        if (segment.range) {\n            xhr.setRequestHeader(\"Range\", segment.range);\n            downloadedPieces = undefined; // TODO: process downloadedPieces for segments with range headers too\n        }\n        else if ((downloadedPieces !== undefined) && this.settings.httpUseRanges) {\n            let bytesDownloaded = 0;\n            for (const piece of downloadedPieces) {\n                bytesDownloaded += piece.byteLength;\n            }\n            xhr.setRequestHeader(\"Range\", `bytes=${bytesDownloaded}-`);\n            this.debug(\"continue download from\", bytesDownloaded);\n        }\n        else {\n            downloadedPieces = undefined;\n        }\n        this.setupXhrEvents(xhr, segment, downloadedPieces);\n        if (this.settings.xhrSetup) {\n            this.settings.xhrSetup(xhr, segmentUrl);\n        }\n        this.xhrRequests.set(segment.id, { xhr, segment });\n        xhr.send();\n    }\n    abort(segment) {\n        const request = this.xhrRequests.get(segment.id);\n        if (request) {\n            request.xhr.abort();\n            this.xhrRequests.delete(segment.id);\n            this.debug(\"http segment abort\", segment.id);\n        }\n    }\n    isDownloading(segment) {\n        return this.xhrRequests.has(segment.id);\n    }\n    isFailed(segment) {\n        const time = this.failedSegments.get(segment.id);\n        return time !== undefined && time > this.now();\n    }\n    getActiveDownloads() {\n        return this.xhrRequests;\n    }\n    getActiveDownloadsCount() {\n        return this.xhrRequests.size;\n    }\n    destroy() {\n        this.xhrRequests.forEach(request => request.xhr.abort());\n        this.xhrRequests.clear();\n    }\n    setupXhrEvents(xhr, segment, downloadedPieces) {\n        let prevBytesLoaded = 0;\n        xhr.addEventListener(\"progress\", (event) => {\n            const bytesLoaded = event.loaded - prevBytesLoaded;\n            this.emit(\"bytes-downloaded\", bytesLoaded);\n            prevBytesLoaded = event.loaded;\n        });\n        xhr.addEventListener(\"load\", async (event) => {\n            if ((event.target.status < 200) || (event.target.status >= 300)) {\n                this.segmentFailure(segment, event, xhr);\n                return;\n            }\n            let data = event.target.response;\n            if ((downloadedPieces !== undefined) && (event.target.status === 206)) {\n                let bytesDownloaded = 0;\n                for (const piece of downloadedPieces) {\n                    bytesDownloaded += piece.byteLength;\n                }\n                const segmentData = new Uint8Array(bytesDownloaded + data.byteLength);\n                let offset = 0;\n                for (const piece of downloadedPieces) {\n                    segmentData.set(new Uint8Array(piece), offset);\n                    offset += piece.byteLength;\n                }\n                segmentData.set(new Uint8Array(data), offset);\n                data = segmentData.buffer;\n            }\n            await this.segmentDownloadFinished(segment, data, xhr);\n        });\n        xhr.addEventListener(\"error\", (event) => {\n            this.segmentFailure(segment, event, xhr);\n        });\n        xhr.addEventListener(\"timeout\", (event) => {\n            this.segmentFailure(segment, event, xhr);\n        });\n    }\n    async segmentDownloadFinished(segment, data, xhr) {\n        segment.responseUrl = xhr.responseURL === null ? undefined : xhr.responseURL;\n        if (this.settings.segmentValidator) {\n            try {\n                await this.settings.segmentValidator(Object.assign(Object.assign({}, segment), { data: data }), \"http\");\n            }\n            catch (error) {\n                this.debug(\"segment validator failed\", error);\n                this.segmentFailure(segment, error, xhr);\n                return;\n            }\n        }\n        this.xhrRequests.delete(segment.id);\n        this.emit(\"segment-loaded\", segment, data);\n    }\n    segmentFailure(segment, error, xhr) {\n        segment.responseUrl = xhr.responseURL === null ? undefined : xhr.responseURL;\n        this.xhrRequests.delete(segment.id);\n        this.failedSegments.set(segment.id, this.now() + this.settings.httpFailedSegmentTimeout);\n        this.emit(\"segment-error\", segment, error);\n    }\n    cleanTimedOutFailedSegments() {\n        const now = this.now();\n        const candidates = [];\n        this.failedSegments.forEach((time, id) => {\n            if (time < now) {\n                candidates.push(id);\n            }\n        });\n        candidates.forEach(id => this.failedSegments.delete(id));\n    }\n}\nexports.HttpMediaManager = HttpMediaManager;\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Debug = require(\"debug\");\nconst Client = require(\"bittorrent-tracker/client\");\nconst stringly_typed_event_emitter_1 = require(\"./stringly-typed-event-emitter\");\nconst media_peer_1 = require(\"./media-peer\");\nconst buffer_1 = require(\"buffer\");\nconst sha1 = require(\"sha.js/sha1\");\nconst index_1 = require(\"./index\");\nconst PEER_PROTOCOL_VERSION = 2;\nconst PEER_ID_VERSION_STRING = index_1.version.replace(/\\d*./g, v => `0${parseInt(v, 10) % 100}`.slice(-2)).slice(0, 4);\nconst PEER_ID_VERSION_PREFIX = `-WW${PEER_ID_VERSION_STRING}-`; // Using WebTorrent client ID in order to not be banned by websocket trackers\nclass PeerSegmentRequest {\n    constructor(peerId, segment) {\n        this.peerId = peerId;\n        this.segment = segment;\n    }\n}\nfunction generatePeerId() {\n    const PEER_ID_SYMBOLS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    const PEER_ID_LENGTH = 20;\n    let peerId = PEER_ID_VERSION_PREFIX;\n    for (let i = 0; i < PEER_ID_LENGTH - PEER_ID_VERSION_PREFIX.length; i++) {\n        peerId += PEER_ID_SYMBOLS.charAt(Math.floor(Math.random() * PEER_ID_SYMBOLS.length));\n    }\n    return new TextEncoder().encode(peerId).buffer;\n}\nclass P2PMediaManager extends stringly_typed_event_emitter_1.STEEmitter {\n    constructor(sementsStorage, settings) {\n        super();\n        this.sementsStorage = sementsStorage;\n        this.settings = settings;\n        this.trackerClient = null;\n        this.peers = new Map();\n        this.peerCandidates = new Map();\n        this.peerSegmentRequests = new Map();\n        this.streamSwarmId = null;\n        this.debug = Debug(\"p2pml:p2p-media-manager\");\n        this.pendingTrackerClient = null;\n        this.onTrackerError = (error) => {\n            this.debug(\"tracker error\", error);\n        };\n        this.onTrackerWarning = (warning) => {\n            this.debug(\"tracker warning\", warning);\n        };\n        this.onTrackerUpdate = (data) => {\n            this.debug(\"tracker update\", data);\n            this.emit(\"tracker-update\", data);\n        };\n        this.onTrackerPeer = (trackerPeer) => {\n            this.debug(\"tracker peer\", trackerPeer.id, trackerPeer);\n            if (this.peers.has(trackerPeer.id)) {\n                this.debug(\"tracker peer already connected\", trackerPeer.id, trackerPeer);\n                trackerPeer.destroy();\n                return;\n            }\n            const peer = new media_peer_1.MediaPeer(trackerPeer, this.settings);\n            peer.on(\"connect\", this.onPeerConnect);\n            peer.on(\"close\", this.onPeerClose);\n            peer.on(\"data-updated\", this.onPeerDataUpdated);\n            peer.on(\"segment-request\", this.onSegmentRequest);\n            peer.on(\"segment-loaded\", this.onSegmentLoaded);\n            peer.on(\"segment-absent\", this.onSegmentAbsent);\n            peer.on(\"segment-error\", this.onSegmentError);\n            peer.on(\"segment-timeout\", this.onSegmentTimeout);\n            peer.on(\"bytes-downloaded\", this.onPieceBytesDownloaded);\n            peer.on(\"bytes-uploaded\", this.onPieceBytesUploaded);\n            let peerCandidatesById = this.peerCandidates.get(peer.id);\n            if (!peerCandidatesById) {\n                peerCandidatesById = [];\n                this.peerCandidates.set(peer.id, peerCandidatesById);\n            }\n            peerCandidatesById.push(peer);\n        };\n        this.onPieceBytesDownloaded = (peer, bytes) => {\n            this.emit(\"bytes-downloaded\", bytes, peer.id);\n        };\n        this.onPieceBytesUploaded = (peer, bytes) => {\n            this.emit(\"bytes-uploaded\", bytes, peer.id);\n        };\n        this.onPeerConnect = (peer) => {\n            const connectedPeer = this.peers.get(peer.id);\n            if (connectedPeer) {\n                this.debug(\"tracker peer already connected (in peer connect)\", peer.id, peer);\n                peer.destroy();\n                return;\n            }\n            // First peer with the ID connected\n            this.peers.set(peer.id, peer);\n            // Destroy all other peer candidates\n            const peerCandidatesById = this.peerCandidates.get(peer.id);\n            if (peerCandidatesById) {\n                for (const peerCandidate of peerCandidatesById) {\n                    if (peerCandidate != peer) {\n                        peerCandidate.destroy();\n                    }\n                }\n                this.peerCandidates.delete(peer.id);\n            }\n            this.emit(\"peer-connected\", { id: peer.id, remoteAddress: peer.remoteAddress });\n        };\n        this.onPeerClose = (peer) => {\n            if (this.peers.get(peer.id) != peer) {\n                // Try to delete the peer candidate\n                const peerCandidatesById = this.peerCandidates.get(peer.id);\n                if (!peerCandidatesById) {\n                    return;\n                }\n                const index = peerCandidatesById.indexOf(peer);\n                if (index != -1) {\n                    peerCandidatesById.splice(index, 1);\n                }\n                if (peerCandidatesById.length == 0) {\n                    this.peerCandidates.delete(peer.id);\n                }\n                return;\n            }\n            for (const [key, value] of this.peerSegmentRequests) {\n                if (value.peerId == peer.id) {\n                    this.peerSegmentRequests.delete(key);\n                }\n            }\n            this.peers.delete(peer.id);\n            this.emit(\"peer-data-updated\");\n            this.emit(\"peer-closed\", peer.id);\n        };\n        this.onPeerDataUpdated = () => {\n            this.emit(\"peer-data-updated\");\n        };\n        this.onSegmentRequest = async (peer, segmentId) => {\n            if (this.masterSwarmId === undefined) {\n                return;\n            }\n            const segment = await this.sementsStorage.getSegment(segmentId, this.masterSwarmId);\n            if (segment) {\n                peer.sendSegmentData(segmentId, segment.data);\n            }\n            else {\n                peer.sendSegmentAbsent(segmentId);\n            }\n        };\n        this.onSegmentLoaded = async (peer, segmentId, data) => {\n            const peerSegmentRequest = this.peerSegmentRequests.get(segmentId);\n            if (!peerSegmentRequest) {\n                return;\n            }\n            const segment = peerSegmentRequest.segment;\n            if (this.settings.segmentValidator) {\n                try {\n                    await this.settings.segmentValidator(Object.assign(Object.assign({}, segment), { data: data }), \"p2p\", peer.id);\n                }\n                catch (error) {\n                    this.debug(\"segment validator failed\", error);\n                    this.peerSegmentRequests.delete(segmentId);\n                    this.emit(\"segment-error\", segment, error, peer.id);\n                    this.onPeerClose(peer);\n                    return;\n                }\n            }\n            this.peerSegmentRequests.delete(segmentId);\n            this.emit(\"segment-loaded\", segment, data, peer.id);\n        };\n        this.onSegmentAbsent = (peer, segmentId) => {\n            this.peerSegmentRequests.delete(segmentId);\n            this.emit(\"peer-data-updated\");\n        };\n        this.onSegmentError = (peer, segmentId, description) => {\n            const peerSegmentRequest = this.peerSegmentRequests.get(segmentId);\n            if (peerSegmentRequest) {\n                this.peerSegmentRequests.delete(segmentId);\n                this.emit(\"segment-error\", peerSegmentRequest.segment, description, peer.id);\n            }\n        };\n        this.onSegmentTimeout = (peer, segmentId) => {\n            const peerSegmentRequest = this.peerSegmentRequests.get(segmentId);\n            if (peerSegmentRequest) {\n                this.peerSegmentRequests.delete(segmentId);\n                peer.destroy();\n                if (this.peers.delete(peerSegmentRequest.peerId)) {\n                    this.emit(\"peer-data-updated\");\n                }\n            }\n        };\n        this.peerId = settings.useP2P ? generatePeerId() : new ArrayBuffer(0);\n        if (this.debug.enabled) {\n            this.debug(\"peer ID\", this.getPeerId(), new TextDecoder().decode(this.peerId));\n        }\n    }\n    getPeers() {\n        return this.peers;\n    }\n    getPeerId() {\n        return buffer_1.Buffer.from(this.peerId).toString(\"hex\");\n    }\n    async setStreamSwarmId(streamSwarmId, masterSwarmId) {\n        if (this.streamSwarmId === streamSwarmId) {\n            return;\n        }\n        this.destroy(true);\n        this.streamSwarmId = streamSwarmId;\n        this.masterSwarmId = masterSwarmId;\n        this.debug(\"stream swarm ID\", this.streamSwarmId);\n        this.pendingTrackerClient = {\n            isDestroyed: false\n        };\n        const pendingTrackerClient = this.pendingTrackerClient;\n        // TODO: native browser 'crypto.subtle' implementation doesn't work in Chrome in insecure pages\n        // TODO: Edge doesn't support SHA-1. Change to SHA-256 once Edge support is required.\n        // const infoHash = await crypto.subtle.digest(\"SHA-1\", new TextEncoder().encode(PEER_PROTOCOL_VERSION + this.streamSwarmId));\n        const infoHash = new sha1().update(PEER_PROTOCOL_VERSION + this.streamSwarmId).digest();\n        // destroy may be called while waiting for the hash to be calculated\n        if (!pendingTrackerClient.isDestroyed) {\n            this.pendingTrackerClient = null;\n            this.createClient(infoHash);\n        }\n        else if (this.trackerClient != null) {\n            this.trackerClient.destroy();\n            this.trackerClient = null;\n        }\n    }\n    createClient(infoHash) {\n        if (!this.settings.useP2P) {\n            return;\n        }\n        const clientOptions = {\n            infoHash: buffer_1.Buffer.from(infoHash, 0, 20),\n            peerId: buffer_1.Buffer.from(this.peerId, 0, 20),\n            announce: this.settings.trackerAnnounce,\n            rtcConfig: this.settings.rtcConfig,\n            port: 6881,\n            getAnnounceOpts: () => {\n                return { numwant: this.settings.peerRequestsPerAnnounce };\n            }\n        };\n        let oldTrackerClient = this.trackerClient;\n        this.trackerClient = new Client(clientOptions);\n        this.trackerClient.on(\"error\", this.onTrackerError);\n        this.trackerClient.on(\"warning\", this.onTrackerWarning);\n        this.trackerClient.on(\"update\", this.onTrackerUpdate);\n        this.trackerClient.on(\"peer\", this.onTrackerPeer);\n        this.trackerClient.start();\n        if (oldTrackerClient != null) {\n            oldTrackerClient.destroy();\n            oldTrackerClient = null;\n        }\n    }\n    download(segment) {\n        if (this.isDownloading(segment)) {\n            return false;\n        }\n        const candidates = [];\n        for (const peer of this.peers.values()) {\n            if ((peer.getDownloadingSegmentId() == null) &&\n                (peer.getSegmentsMap().get(segment.id) === media_peer_1.MediaPeerSegmentStatus.Loaded)) {\n                candidates.push(peer);\n            }\n        }\n        if (candidates.length === 0) {\n            return false;\n        }\n        const peer = candidates[Math.floor(Math.random() * candidates.length)];\n        peer.requestSegment(segment.id);\n        this.peerSegmentRequests.set(segment.id, new PeerSegmentRequest(peer.id, segment));\n        return true;\n    }\n    abort(segment) {\n        let downloadingSegment;\n        const peerSegmentRequest = this.peerSegmentRequests.get(segment.id);\n        if (peerSegmentRequest) {\n            const peer = this.peers.get(peerSegmentRequest.peerId);\n            if (peer) {\n                downloadingSegment = peer.cancelSegmentRequest();\n            }\n            this.peerSegmentRequests.delete(segment.id);\n        }\n        return downloadingSegment;\n    }\n    isDownloading(segment) {\n        return this.peerSegmentRequests.has(segment.id);\n    }\n    getActiveDownloadsCount() {\n        return this.peerSegmentRequests.size;\n    }\n    destroy(swarmChange = false) {\n        this.streamSwarmId = null;\n        if (this.trackerClient) {\n            this.trackerClient.stop();\n            if (swarmChange) {\n                // Don't destroy trackerClient to reuse its WebSocket connection to the tracker server\n                this.trackerClient.removeAllListeners(\"error\");\n                this.trackerClient.removeAllListeners(\"warning\");\n                this.trackerClient.removeAllListeners(\"update\");\n                this.trackerClient.removeAllListeners(\"peer\");\n            }\n            else {\n                this.trackerClient.destroy();\n                this.trackerClient = null;\n            }\n        }\n        if (this.pendingTrackerClient) {\n            this.pendingTrackerClient.isDestroyed = true;\n            this.pendingTrackerClient = null;\n        }\n        this.peers.forEach(peer => peer.destroy());\n        this.peers.clear();\n        this.peerSegmentRequests.clear();\n        for (const peerCandidateById of this.peerCandidates.values()) {\n            for (const peerCandidate of peerCandidateById) {\n                peerCandidate.destroy();\n            }\n        }\n        this.peerCandidates.clear();\n    }\n    sendSegmentsMapToAll(segmentsMap) {\n        this.peers.forEach(peer => peer.sendSegmentsMap(segmentsMap));\n    }\n    sendSegmentsMap(peerId, segmentsMap) {\n        const peer = this.peers.get(peerId);\n        if (peer) {\n            peer.sendSegmentsMap(segmentsMap);\n        }\n    }\n    getOvrallSegmentsMap() {\n        const overallSegmentsMap = new Map();\n        for (const peer of this.peers.values()) {\n            for (const [segmentId, segmentStatus] of peer.getSegmentsMap()) {\n                if (segmentStatus === media_peer_1.MediaPeerSegmentStatus.Loaded) {\n                    overallSegmentsMap.set(segmentId, media_peer_1.MediaPeerSegmentStatus.Loaded);\n                }\n                else if (!overallSegmentsMap.get(segmentId)) {\n                    overallSegmentsMap.set(segmentId, media_peer_1.MediaPeerSegmentStatus.LoadingByHttp);\n                }\n            }\n        }\n        return overallSegmentsMap;\n    }\n}\nexports.P2PMediaManager = P2PMediaManager;\n","const debug = require('debug')('bittorrent-tracker:client')\nconst EventEmitter = require('events')\nconst once = require('once')\nconst parallel = require('run-parallel')\nconst Peer = require('simple-peer')\n\nconst common = require('./lib/common')\nconst HTTPTracker = require('./lib/client/http-tracker') // empty object in browser\nconst UDPTracker = require('./lib/client/udp-tracker') // empty object in browser\nconst WebSocketTracker = require('./lib/client/websocket-tracker')\n\n/**\n * BitTorrent tracker client.\n *\n * Find torrent peers, to help a torrent client participate in a torrent swarm.\n *\n * @param {Object} opts                          options object\n * @param {string|Buffer} opts.infoHash          torrent info hash\n * @param {string|Buffer} opts.peerId            peer id\n * @param {string|Array.<string>} opts.announce  announce\n * @param {number} opts.port                     torrent client listening port\n * @param {function} opts.getAnnounceOpts        callback to provide data to tracker\n * @param {number} opts.rtcConfig                RTCPeerConnection configuration object\n * @param {number} opts.userAgent                User-Agent header for http requests\n * @param {number} opts.wrtc                     custom webrtc impl (useful in node.js)\n */\nclass Client extends EventEmitter {\n  constructor (opts = {}) {\n    super()\n\n    if (!opts.peerId) throw new Error('Option `peerId` is required')\n    if (!opts.infoHash) throw new Error('Option `infoHash` is required')\n    if (!opts.announce) throw new Error('Option `announce` is required')\n    if (!process.browser && !opts.port) throw new Error('Option `port` is required')\n\n    this.peerId = typeof opts.peerId === 'string'\n      ? opts.peerId\n      : opts.peerId.toString('hex')\n    this._peerIdBuffer = Buffer.from(this.peerId, 'hex')\n    this._peerIdBinary = this._peerIdBuffer.toString('binary')\n\n    this.infoHash = typeof opts.infoHash === 'string'\n      ? opts.infoHash.toLowerCase()\n      : opts.infoHash.toString('hex')\n    this._infoHashBuffer = Buffer.from(this.infoHash, 'hex')\n    this._infoHashBinary = this._infoHashBuffer.toString('binary')\n\n    debug('new client %s', this.infoHash)\n\n    this.destroyed = false\n\n    this._port = opts.port\n    this._getAnnounceOpts = opts.getAnnounceOpts\n    this._rtcConfig = opts.rtcConfig\n    this._userAgent = opts.userAgent\n\n    // Support lazy 'wrtc' module initialization\n    // See: https://github.com/webtorrent/webtorrent-hybrid/issues/46\n    this._wrtc = typeof opts.wrtc === 'function' ? opts.wrtc() : opts.wrtc\n\n    let announce = typeof opts.announce === 'string'\n      ? [opts.announce]\n      : opts.announce == null ? [] : opts.announce\n\n    // Remove trailing slash from trackers to catch duplicates\n    announce = announce.map(announceUrl => {\n      announceUrl = announceUrl.toString()\n      if (announceUrl[announceUrl.length - 1] === '/') {\n        announceUrl = announceUrl.substring(0, announceUrl.length - 1)\n      }\n      return announceUrl\n    })\n    // remove duplicates by converting to Set and back\n    announce = Array.from(new Set(announce))\n\n    const webrtcSupport = this._wrtc !== false && (!!this._wrtc || Peer.WEBRTC_SUPPORT)\n\n    const nextTickWarn = err => {\n      process.nextTick(() => {\n        this.emit('warning', err)\n      })\n    }\n\n    this._trackers = announce\n      .map(announceUrl => {\n        let parsedUrl\n        try {\n          parsedUrl = new URL(announceUrl)\n        } catch (err) {\n          nextTickWarn(new Error(`Invalid tracker URL: ${announceUrl}`))\n          return null\n        }\n\n        const port = parsedUrl.port\n        if (port < 0 || port > 65535) {\n          nextTickWarn(new Error(`Invalid tracker port: ${announceUrl}`))\n          return null\n        }\n\n        const protocol = parsedUrl.protocol\n        if ((protocol === 'http:' || protocol === 'https:') &&\n            typeof HTTPTracker === 'function') {\n          return new HTTPTracker(this, announceUrl)\n        } else if (protocol === 'udp:' && typeof UDPTracker === 'function') {\n          return new UDPTracker(this, announceUrl)\n        } else if ((protocol === 'ws:' || protocol === 'wss:') && webrtcSupport) {\n          // Skip ws:// trackers on https:// sites because they throw SecurityError\n          if (protocol === 'ws:' && typeof window !== 'undefined' &&\n              window.location.protocol === 'https:') {\n            nextTickWarn(new Error(`Unsupported tracker protocol: ${announceUrl}`))\n            return null\n          }\n          return new WebSocketTracker(this, announceUrl)\n        } else {\n          nextTickWarn(new Error(`Unsupported tracker protocol: ${announceUrl}`))\n          return null\n        }\n      })\n      .filter(Boolean)\n  }\n\n  /**\n   * Send a `start` announce to the trackers.\n   * @param {Object} opts\n   * @param {number=} opts.uploaded\n   * @param {number=} opts.downloaded\n   * @param {number=} opts.left (if not set, calculated automatically)\n   */\n  start (opts) {\n    opts = this._defaultAnnounceOpts(opts)\n    opts.event = 'started'\n    debug('send `start` %o', opts)\n    this._announce(opts)\n\n    // start announcing on intervals\n    this._trackers.forEach(tracker => {\n      tracker.setInterval()\n    })\n  }\n\n  /**\n   * Send a `stop` announce to the trackers.\n   * @param {Object} opts\n   * @param {number=} opts.uploaded\n   * @param {number=} opts.downloaded\n   * @param {number=} opts.numwant\n   * @param {number=} opts.left (if not set, calculated automatically)\n   */\n  stop (opts) {\n    opts = this._defaultAnnounceOpts(opts)\n    opts.event = 'stopped'\n    debug('send `stop` %o', opts)\n    this._announce(opts)\n  }\n\n  /**\n   * Send a `complete` announce to the trackers.\n   * @param {Object} opts\n   * @param {number=} opts.uploaded\n   * @param {number=} opts.downloaded\n   * @param {number=} opts.numwant\n   * @param {number=} opts.left (if not set, calculated automatically)\n   */\n  complete (opts) {\n    if (!opts) opts = {}\n    opts = this._defaultAnnounceOpts(opts)\n    opts.event = 'completed'\n    debug('send `complete` %o', opts)\n    this._announce(opts)\n  }\n\n  /**\n   * Send a `update` announce to the trackers.\n   * @param {Object} opts\n   * @param {number=} opts.uploaded\n   * @param {number=} opts.downloaded\n   * @param {number=} opts.numwant\n   * @param {number=} opts.left (if not set, calculated automatically)\n   */\n  update (opts) {\n    opts = this._defaultAnnounceOpts(opts)\n    if (opts.event) delete opts.event\n    debug('send `update` %o', opts)\n    this._announce(opts)\n  }\n\n  _announce (opts) {\n    this._trackers.forEach(tracker => {\n      // tracker should not modify `opts` object, it's passed to all trackers\n      tracker.announce(opts)\n    })\n  }\n\n  /**\n   * Send a scrape request to the trackers.\n   * @param {Object} opts\n   */\n  scrape (opts) {\n    debug('send `scrape`')\n    if (!opts) opts = {}\n    this._trackers.forEach(tracker => {\n      // tracker should not modify `opts` object, it's passed to all trackers\n      tracker.scrape(opts)\n    })\n  }\n\n  setInterval (intervalMs) {\n    debug('setInterval %d', intervalMs)\n    this._trackers.forEach(tracker => {\n      tracker.setInterval(intervalMs)\n    })\n  }\n\n  destroy (cb) {\n    if (this.destroyed) return\n    this.destroyed = true\n    debug('destroy')\n\n    const tasks = this._trackers.map(tracker => cb => {\n      tracker.destroy(cb)\n    })\n\n    parallel(tasks, cb)\n\n    this._trackers = []\n    this._getAnnounceOpts = null\n  }\n\n  _defaultAnnounceOpts (opts = {}) {\n    if (opts.numwant == null) opts.numwant = common.DEFAULT_ANNOUNCE_PEERS\n\n    if (opts.uploaded == null) opts.uploaded = 0\n    if (opts.downloaded == null) opts.downloaded = 0\n\n    if (this._getAnnounceOpts) opts = Object.assign({}, opts, this._getAnnounceOpts())\n\n    return opts\n  }\n}\n\n/**\n * Simple convenience function to scrape a tracker for an info hash without needing to\n * create a Client, pass it a parsed torrent, etc. Support scraping a tracker for multiple\n * torrents at the same time.\n * @params {Object} opts\n * @param  {string|Array.<string>} opts.infoHash\n * @param  {string} opts.announce\n * @param  {function} cb\n */\nClient.scrape = (opts, cb) => {\n  cb = once(cb)\n\n  if (!opts.infoHash) throw new Error('Option `infoHash` is required')\n  if (!opts.announce) throw new Error('Option `announce` is required')\n\n  const clientOpts = Object.assign({}, opts, {\n    infoHash: Array.isArray(opts.infoHash) ? opts.infoHash[0] : opts.infoHash,\n    peerId: Buffer.from('01234567890123456789'), // dummy value\n    port: 6881 // dummy value\n  })\n\n  const client = new Client(clientOpts)\n  client.once('error', cb)\n  client.once('warning', cb)\n\n  let len = Array.isArray(opts.infoHash) ? opts.infoHash.length : 1\n  const results = {}\n  client.on('scrape', data => {\n    len -= 1\n    results[data.infoHash] = data\n    if (len === 0) {\n      client.destroy()\n      const keys = Object.keys(results)\n      if (keys.length === 1) {\n        cb(null, results[keys[0]])\n      } else {\n        cb(null, results)\n      }\n    }\n  })\n\n  opts.infoHash = Array.isArray(opts.infoHash)\n    ? opts.infoHash.map(infoHash => {\n      return Buffer.from(infoHash, 'hex')\n    })\n    : Buffer.from(opts.infoHash, 'hex')\n  client.scrape({ infoHash: opts.infoHash })\n  return client\n}\n\nmodule.exports = Client\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","var wrappy = require('wrappy')\nmodule.exports = wrappy(once)\nmodule.exports.strict = wrappy(onceStrict)\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n\n  Object.defineProperty(Function.prototype, 'onceStrict', {\n    value: function () {\n      return onceStrict(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var f = function () {\n    if (f.called) return f.value\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  f.called = false\n  return f\n}\n\nfunction onceStrict (fn) {\n  var f = function () {\n    if (f.called)\n      throw new Error(f.onceError)\n    f.called = true\n    return f.value = fn.apply(this, arguments)\n  }\n  var name = fn.name || 'Function wrapped with `once`'\n  f.onceError = name + \" shouldn't be called more than once\"\n  f.called = false\n  return f\n}\n","// Returns a wrapper function that returns a wrapped callback\n// The wrapper function should do some stuff, and return a\n// presumably different callback function.\n// This makes sure that own properties are retained, so that\n// decorations and such are not lost along the way.\nmodule.exports = wrappy\nfunction wrappy (fn, cb) {\n  if (fn && cb) return wrappy(fn)(cb)\n\n  if (typeof fn !== 'function')\n    throw new TypeError('need wrapper function')\n\n  Object.keys(fn).forEach(function (k) {\n    wrapper[k] = fn[k]\n  })\n\n  return wrapper\n\n  function wrapper() {\n    var args = new Array(arguments.length)\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i]\n    }\n    var ret = fn.apply(this, args)\n    var cb = args[args.length-1]\n    if (typeof ret === 'function' && ret !== cb) {\n      Object.keys(cb).forEach(function (k) {\n        ret[k] = cb[k]\n      })\n    }\n    return ret\n  }\n}\n","module.exports = runParallel\n\nfunction runParallel (tasks, cb) {\n  var results, pending, keys\n  var isSync = true\n\n  if (Array.isArray(tasks)) {\n    results = []\n    pending = tasks.length\n  } else {\n    keys = Object.keys(tasks)\n    results = {}\n    pending = keys.length\n  }\n\n  function done (err) {\n    function end () {\n      if (cb) cb(err, results)\n      cb = null\n    }\n    if (isSync) process.nextTick(end)\n    else end()\n  }\n\n  function each (i, err, result) {\n    results[i] = result\n    if (--pending === 0 || err) {\n      done(err)\n    }\n  }\n\n  if (!pending) {\n    // empty\n    done(null)\n  } else if (keys) {\n    // object\n    keys.forEach(function (key) {\n      tasks[key](function (err, result) { each(key, err, result) })\n    })\n  } else {\n    // array\n    tasks.forEach(function (task, i) {\n      task(function (err, result) { each(i, err, result) })\n    })\n  }\n\n  isSync = false\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","'use strict';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _require = require('buffer'),\n    Buffer = _require.Buffer;\n\nvar _require2 = require('util'),\n    inspect = _require2.inspect;\n\nvar custom = inspect && inspect.custom || 'inspect';\n\nfunction copyBuffer(src, target, offset) {\n  Buffer.prototype.copy.call(src, target, offset);\n}\n\nmodule.exports =\n/*#__PURE__*/\nfunction () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  _createClass(BufferList, [{\n    key: \"push\",\n    value: function push(v) {\n      var entry = {\n        data: v,\n        next: null\n      };\n      if (this.length > 0) this.tail.next = entry;else this.head = entry;\n      this.tail = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"unshift\",\n    value: function unshift(v) {\n      var entry = {\n        data: v,\n        next: this.head\n      };\n      if (this.length === 0) this.tail = entry;\n      this.head = entry;\n      ++this.length;\n    }\n  }, {\n    key: \"shift\",\n    value: function shift() {\n      if (this.length === 0) return;\n      var ret = this.head.data;\n      if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n      --this.length;\n      return ret;\n    }\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.head = this.tail = null;\n      this.length = 0;\n    }\n  }, {\n    key: \"join\",\n    value: function join(s) {\n      if (this.length === 0) return '';\n      var p = this.head;\n      var ret = '' + p.data;\n\n      while (p = p.next) {\n        ret += s + p.data;\n      }\n\n      return ret;\n    }\n  }, {\n    key: \"concat\",\n    value: function concat(n) {\n      if (this.length === 0) return Buffer.alloc(0);\n      var ret = Buffer.allocUnsafe(n >>> 0);\n      var p = this.head;\n      var i = 0;\n\n      while (p) {\n        copyBuffer(p.data, ret, i);\n        i += p.data.length;\n        p = p.next;\n      }\n\n      return ret;\n    } // Consumes a specified amount of bytes or characters from the buffered data.\n\n  }, {\n    key: \"consume\",\n    value: function consume(n, hasStrings) {\n      var ret;\n\n      if (n < this.head.data.length) {\n        // `slice` is the same for buffers and strings.\n        ret = this.head.data.slice(0, n);\n        this.head.data = this.head.data.slice(n);\n      } else if (n === this.head.data.length) {\n        // First chunk is a perfect match.\n        ret = this.shift();\n      } else {\n        // Result spans more than one buffer.\n        ret = hasStrings ? this._getString(n) : this._getBuffer(n);\n      }\n\n      return ret;\n    }\n  }, {\n    key: \"first\",\n    value: function first() {\n      return this.head.data;\n    } // Consumes a specified amount of characters from the buffered data.\n\n  }, {\n    key: \"_getString\",\n    value: function _getString(n) {\n      var p = this.head;\n      var c = 1;\n      var ret = p.data;\n      n -= ret.length;\n\n      while (p = p.next) {\n        var str = p.data;\n        var nb = n > str.length ? str.length : n;\n        if (nb === str.length) ret += str;else ret += str.slice(0, n);\n        n -= nb;\n\n        if (n === 0) {\n          if (nb === str.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = str.slice(nb);\n          }\n\n          break;\n        }\n\n        ++c;\n      }\n\n      this.length -= c;\n      return ret;\n    } // Consumes a specified amount of bytes from the buffered data.\n\n  }, {\n    key: \"_getBuffer\",\n    value: function _getBuffer(n) {\n      var ret = Buffer.allocUnsafe(n);\n      var p = this.head;\n      var c = 1;\n      p.data.copy(ret);\n      n -= p.data.length;\n\n      while (p = p.next) {\n        var buf = p.data;\n        var nb = n > buf.length ? buf.length : n;\n        buf.copy(ret, ret.length - n, 0, nb);\n        n -= nb;\n\n        if (n === 0) {\n          if (nb === buf.length) {\n            ++c;\n            if (p.next) this.head = p.next;else this.head = this.tail = null;\n          } else {\n            this.head = p;\n            p.data = buf.slice(nb);\n          }\n\n          break;\n        }\n\n        ++c;\n      }\n\n      this.length -= c;\n      return ret;\n    } // Make sure the linked list only shows the minimal necessary information.\n\n  }, {\n    key: custom,\n    value: function value(_, options) {\n      return inspect(this, _objectSpread({}, options, {\n        // Only inspect one level.\n        depth: 0,\n        // It should not recurse.\n        customInspect: false\n      }));\n    }\n  }]);\n\n  return BufferList;\n}();","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","'use strict';\n\nvar _Object$setPrototypeO;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar finished = require('./end-of-stream');\n\nvar kLastResolve = Symbol('lastResolve');\nvar kLastReject = Symbol('lastReject');\nvar kError = Symbol('error');\nvar kEnded = Symbol('ended');\nvar kLastPromise = Symbol('lastPromise');\nvar kHandlePromise = Symbol('handlePromise');\nvar kStream = Symbol('stream');\n\nfunction createIterResult(value, done) {\n  return {\n    value: value,\n    done: done\n  };\n}\n\nfunction readAndResolve(iter) {\n  var resolve = iter[kLastResolve];\n\n  if (resolve !== null) {\n    var data = iter[kStream].read(); // we defer if data is null\n    // we can be expecting either 'end' or\n    // 'error'\n\n    if (data !== null) {\n      iter[kLastPromise] = null;\n      iter[kLastResolve] = null;\n      iter[kLastReject] = null;\n      resolve(createIterResult(data, false));\n    }\n  }\n}\n\nfunction onReadable(iter) {\n  // we wait for the next tick, because it might\n  // emit an error with process.nextTick\n  process.nextTick(readAndResolve, iter);\n}\n\nfunction wrapForNext(lastPromise, iter) {\n  return function (resolve, reject) {\n    lastPromise.then(function () {\n      if (iter[kEnded]) {\n        resolve(createIterResult(undefined, true));\n        return;\n      }\n\n      iter[kHandlePromise](resolve, reject);\n    }, reject);\n  };\n}\n\nvar AsyncIteratorPrototype = Object.getPrototypeOf(function () {});\nvar ReadableStreamAsyncIteratorPrototype = Object.setPrototypeOf((_Object$setPrototypeO = {\n  get stream() {\n    return this[kStream];\n  },\n\n  next: function next() {\n    var _this = this;\n\n    // if we have detected an error in the meanwhile\n    // reject straight away\n    var error = this[kError];\n\n    if (error !== null) {\n      return Promise.reject(error);\n    }\n\n    if (this[kEnded]) {\n      return Promise.resolve(createIterResult(undefined, true));\n    }\n\n    if (this[kStream].destroyed) {\n      // We need to defer via nextTick because if .destroy(err) is\n      // called, the error will be emitted via nextTick, and\n      // we cannot guarantee that there is no error lingering around\n      // waiting to be emitted.\n      return new Promise(function (resolve, reject) {\n        process.nextTick(function () {\n          if (_this[kError]) {\n            reject(_this[kError]);\n          } else {\n            resolve(createIterResult(undefined, true));\n          }\n        });\n      });\n    } // if we have multiple next() calls\n    // we will wait for the previous Promise to finish\n    // this logic is optimized to support for await loops,\n    // where next() is only called once at a time\n\n\n    var lastPromise = this[kLastPromise];\n    var promise;\n\n    if (lastPromise) {\n      promise = new Promise(wrapForNext(lastPromise, this));\n    } else {\n      // fast path needed to support multiple this.push()\n      // without triggering the next() queue\n      var data = this[kStream].read();\n\n      if (data !== null) {\n        return Promise.resolve(createIterResult(data, false));\n      }\n\n      promise = new Promise(this[kHandlePromise]);\n    }\n\n    this[kLastPromise] = promise;\n    return promise;\n  }\n}, _defineProperty(_Object$setPrototypeO, Symbol.asyncIterator, function () {\n  return this;\n}), _defineProperty(_Object$setPrototypeO, \"return\", function _return() {\n  var _this2 = this;\n\n  // destroy(err, cb) is a private API\n  // we can guarantee we have that here, because we control the\n  // Readable class this is attached to\n  return new Promise(function (resolve, reject) {\n    _this2[kStream].destroy(null, function (err) {\n      if (err) {\n        reject(err);\n        return;\n      }\n\n      resolve(createIterResult(undefined, true));\n    });\n  });\n}), _Object$setPrototypeO), AsyncIteratorPrototype);\n\nvar createReadableStreamAsyncIterator = function createReadableStreamAsyncIterator(stream) {\n  var _Object$create;\n\n  var iterator = Object.create(ReadableStreamAsyncIteratorPrototype, (_Object$create = {}, _defineProperty(_Object$create, kStream, {\n    value: stream,\n    writable: true\n  }), _defineProperty(_Object$create, kLastResolve, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kLastReject, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kError, {\n    value: null,\n    writable: true\n  }), _defineProperty(_Object$create, kEnded, {\n    value: stream._readableState.endEmitted,\n    writable: true\n  }), _defineProperty(_Object$create, kHandlePromise, {\n    value: function value(resolve, reject) {\n      var data = iterator[kStream].read();\n\n      if (data) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        resolve(createIterResult(data, false));\n      } else {\n        iterator[kLastResolve] = resolve;\n        iterator[kLastReject] = reject;\n      }\n    },\n    writable: true\n  }), _Object$create));\n  iterator[kLastPromise] = null;\n  finished(stream, function (err) {\n    if (err && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n      var reject = iterator[kLastReject]; // reject if we are waiting for data in the Promise\n      // returned by next() and store the error\n\n      if (reject !== null) {\n        iterator[kLastPromise] = null;\n        iterator[kLastResolve] = null;\n        iterator[kLastReject] = null;\n        reject(err);\n      }\n\n      iterator[kError] = err;\n      return;\n    }\n\n    var resolve = iterator[kLastResolve];\n\n    if (resolve !== null) {\n      iterator[kLastPromise] = null;\n      iterator[kLastResolve] = null;\n      iterator[kLastReject] = null;\n      resolve(createIterResult(undefined, true));\n    }\n\n    iterator[kEnded] = true;\n  });\n  stream.on('readable', onReadable.bind(null, iterator));\n  return iterator;\n};\n\nmodule.exports = createReadableStreamAsyncIterator;","module.exports = function () {\n  throw new Error('Readable.from is not available in the browser')\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\nrequire('inherits')(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n'use strict';\n\nvar eos;\n\nfunction once(callback) {\n  var called = false;\n  return function () {\n    if (called) return;\n    called = true;\n    callback.apply(void 0, arguments);\n  };\n}\n\nvar _require$codes = require('../../../errors').codes,\n    ERR_MISSING_ARGS = _require$codes.ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED = _require$codes.ERR_STREAM_DESTROYED;\n\nfunction noop(err) {\n  // Rethrow the error if it exists to avoid swallowing it\n  if (err) throw err;\n}\n\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function';\n}\n\nfunction destroyer(stream, reading, writing, callback) {\n  callback = once(callback);\n  var closed = false;\n  stream.on('close', function () {\n    closed = true;\n  });\n  if (eos === undefined) eos = require('./end-of-stream');\n  eos(stream, {\n    readable: reading,\n    writable: writing\n  }, function (err) {\n    if (err) return callback(err);\n    closed = true;\n    callback();\n  });\n  var destroyed = false;\n  return function (err) {\n    if (closed) return;\n    if (destroyed) return;\n    destroyed = true; // request.destroy just do .end - .abort is what we want\n\n    if (isRequest(stream)) return stream.abort();\n    if (typeof stream.destroy === 'function') return stream.destroy();\n    callback(err || new ERR_STREAM_DESTROYED('pipe'));\n  };\n}\n\nfunction call(fn) {\n  fn();\n}\n\nfunction pipe(from, to) {\n  return from.pipe(to);\n}\n\nfunction popCallback(streams) {\n  if (!streams.length) return noop;\n  if (typeof streams[streams.length - 1] !== 'function') return noop;\n  return streams.pop();\n}\n\nfunction pipeline() {\n  for (var _len = arguments.length, streams = new Array(_len), _key = 0; _key < _len; _key++) {\n    streams[_key] = arguments[_key];\n  }\n\n  var callback = popCallback(streams);\n  if (Array.isArray(streams[0])) streams = streams[0];\n\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams');\n  }\n\n  var error;\n  var destroys = streams.map(function (stream, i) {\n    var reading = i < streams.length - 1;\n    var writing = i > 0;\n    return destroyer(stream, reading, writing, function (err) {\n      if (!error) error = err;\n      if (err) destroys.forEach(call);\n      if (reading) return;\n      destroys.forEach(call);\n      callback(error);\n    });\n  });\n  return streams.reduce(pipe);\n}\n\nmodule.exports = pipeline;","'use strict';\n\nfunction assign(obj, props) {\n    for (const key in props) {\n        Object.defineProperty(obj, key, {\n            value: props[key],\n            enumerable: true,\n            configurable: true,\n        });\n    }\n\n    return obj;\n}\n\nfunction createError(err, code, props) {\n    if (!err || typeof err === 'string') {\n        throw new TypeError('Please pass an Error to err-code');\n    }\n\n    if (!props) {\n        props = {};\n    }\n\n    if (typeof code === 'object') {\n        props = code;\n        code = undefined;\n    }\n\n    if (code != null) {\n        props.code = code;\n    }\n\n    try {\n        return assign(err, props);\n    } catch (_) {\n        props.message = err.message;\n        props.stack = err.stack;\n\n        const ErrClass = function () {};\n\n        ErrClass.prototype = Object.create(Object.getPrototypeOf(err));\n\n        return assign(new ErrClass(), props);\n    }\n}\n\nmodule.exports = createError;\n","const debug = require('debug')('bittorrent-tracker:websocket-tracker')\nconst Peer = require('simple-peer')\nconst randombytes = require('randombytes')\nconst Socket = require('simple-websocket')\n\nconst common = require('../common')\nconst Tracker = require('./tracker')\n\n// Use a socket pool, so tracker clients share WebSocket objects for the same server.\n// In practice, WebSockets are pretty slow to establish, so this gives a nice performance\n// boost, and saves browser resources.\nconst socketPool = {}\n\nconst RECONNECT_MINIMUM = 10 * 1000\nconst RECONNECT_MAXIMUM = 60 * 60 * 1000\nconst RECONNECT_VARIANCE = 5 * 60 * 1000\nconst OFFER_TIMEOUT = 50 * 1000\n\nclass WebSocketTracker extends Tracker {\n  constructor (client, announceUrl, opts) {\n    super(client, announceUrl)\n    debug('new websocket tracker %s', announceUrl)\n\n    this.peers = {} // peers (offer id -> peer)\n    this.socket = null\n\n    this.reconnecting = false\n    this.retries = 0\n    this.reconnectTimer = null\n\n    // Simple boolean flag to track whether the socket has received data from\n    // the websocket server since the last time socket.send() was called.\n    this.expectingResponse = false\n\n    this._openSocket()\n  }\n\n  announce (opts) {\n    if (this.destroyed || this.reconnecting) return\n    if (!this.socket.connected) {\n      this.socket.once('connect', () => {\n        this.announce(opts)\n      })\n      return\n    }\n\n    const params = Object.assign({}, opts, {\n      action: 'announce',\n      info_hash: this.client._infoHashBinary,\n      peer_id: this.client._peerIdBinary\n    })\n    if (this._trackerId) params.trackerid = this._trackerId\n\n    if (opts.event === 'stopped' || opts.event === 'completed') {\n      // Don't include offers with 'stopped' or 'completed' event\n      this._send(params)\n    } else {\n      // Limit the number of offers that are generated, since it can be slow\n      const numwant = Math.min(opts.numwant, 10)\n\n      this._generateOffers(numwant, offers => {\n        params.numwant = numwant\n        params.offers = offers\n        this._send(params)\n      })\n    }\n  }\n\n  scrape (opts) {\n    if (this.destroyed || this.reconnecting) return\n    if (!this.socket.connected) {\n      this.socket.once('connect', () => {\n        this.scrape(opts)\n      })\n      return\n    }\n\n    const infoHashes = (Array.isArray(opts.infoHash) && opts.infoHash.length > 0)\n      ? opts.infoHash.map(infoHash => {\n        return infoHash.toString('binary')\n      })\n      : (opts.infoHash && opts.infoHash.toString('binary')) || this.client._infoHashBinary\n    const params = {\n      action: 'scrape',\n      info_hash: infoHashes\n    }\n\n    this._send(params)\n  }\n\n  destroy (cb = noop) {\n    if (this.destroyed) return cb(null)\n\n    this.destroyed = true\n\n    clearInterval(this.interval)\n    clearTimeout(this.reconnectTimer)\n\n    // Destroy peers\n    for (const peerId in this.peers) {\n      const peer = this.peers[peerId]\n      clearTimeout(peer.trackerTimeout)\n      peer.destroy()\n    }\n    this.peers = null\n\n    if (this.socket) {\n      this.socket.removeListener('connect', this._onSocketConnectBound)\n      this.socket.removeListener('data', this._onSocketDataBound)\n      this.socket.removeListener('close', this._onSocketCloseBound)\n      this.socket.removeListener('error', this._onSocketErrorBound)\n      this.socket = null\n    }\n\n    this._onSocketConnectBound = null\n    this._onSocketErrorBound = null\n    this._onSocketDataBound = null\n    this._onSocketCloseBound = null\n\n    if (socketPool[this.announceUrl]) {\n      socketPool[this.announceUrl].consumers -= 1\n    }\n\n    // Other instances are using the socket, so there's nothing left to do here\n    if (socketPool[this.announceUrl].consumers > 0) return cb()\n\n    let socket = socketPool[this.announceUrl]\n    delete socketPool[this.announceUrl]\n    socket.on('error', noop) // ignore all future errors\n    socket.once('close', cb)\n\n    // If there is no data response expected, destroy immediately.\n    if (!this.expectingResponse) return destroyCleanup()\n\n    // Otherwise, wait a short time for potential responses to come in from the\n    // server, then force close the socket.\n    var timeout = setTimeout(destroyCleanup, common.DESTROY_TIMEOUT)\n\n    // But, if a response comes from the server before the timeout fires, do cleanup\n    // right away.\n    socket.once('data', destroyCleanup)\n\n    function destroyCleanup () {\n      if (timeout) {\n        clearTimeout(timeout)\n        timeout = null\n      }\n      socket.removeListener('data', destroyCleanup)\n      socket.destroy()\n      socket = null\n    }\n  }\n\n  _openSocket () {\n    this.destroyed = false\n\n    if (!this.peers) this.peers = {}\n\n    this._onSocketConnectBound = () => {\n      this._onSocketConnect()\n    }\n    this._onSocketErrorBound = err => {\n      this._onSocketError(err)\n    }\n    this._onSocketDataBound = data => {\n      this._onSocketData(data)\n    }\n    this._onSocketCloseBound = () => {\n      this._onSocketClose()\n    }\n\n    this.socket = socketPool[this.announceUrl]\n    if (this.socket) {\n      socketPool[this.announceUrl].consumers += 1\n      if (this.socket.connected) {\n        this._onSocketConnectBound()\n      }\n    } else {\n      this.socket = socketPool[this.announceUrl] = new Socket(this.announceUrl)\n      this.socket.consumers = 1\n      this.socket.once('connect', this._onSocketConnectBound)\n    }\n\n    this.socket.on('data', this._onSocketDataBound)\n    this.socket.once('close', this._onSocketCloseBound)\n    this.socket.once('error', this._onSocketErrorBound)\n  }\n\n  _onSocketConnect () {\n    if (this.destroyed) return\n\n    if (this.reconnecting) {\n      this.reconnecting = false\n      this.retries = 0\n      this.announce(this.client._defaultAnnounceOpts())\n    }\n  }\n\n  _onSocketData (data) {\n    if (this.destroyed) return\n\n    this.expectingResponse = false\n\n    try {\n      data = JSON.parse(data)\n    } catch (err) {\n      this.client.emit('warning', new Error('Invalid tracker response'))\n      return\n    }\n\n    if (data.action === 'announce') {\n      this._onAnnounceResponse(data)\n    } else if (data.action === 'scrape') {\n      this._onScrapeResponse(data)\n    } else {\n      this._onSocketError(new Error(`invalid action in WS response: ${data.action}`))\n    }\n  }\n\n  _onAnnounceResponse (data) {\n    if (data.info_hash !== this.client._infoHashBinary) {\n      debug(\n        'ignoring websocket data from %s for %s (looking for %s: reused socket)',\n        this.announceUrl, common.binaryToHex(data.info_hash), this.client.infoHash\n      )\n      return\n    }\n\n    if (data.peer_id && data.peer_id === this.client._peerIdBinary) {\n      // ignore offers/answers from this client\n      return\n    }\n\n    debug(\n      'received %s from %s for %s',\n      JSON.stringify(data), this.announceUrl, this.client.infoHash\n    )\n\n    const failure = data['failure reason']\n    if (failure) return this.client.emit('warning', new Error(failure))\n\n    const warning = data['warning message']\n    if (warning) this.client.emit('warning', new Error(warning))\n\n    const interval = data.interval || data['min interval']\n    if (interval) this.setInterval(interval * 1000)\n\n    const trackerId = data['tracker id']\n    if (trackerId) {\n      // If absent, do not discard previous trackerId value\n      this._trackerId = trackerId\n    }\n\n    if (data.complete != null) {\n      const response = Object.assign({}, data, {\n        announce: this.announceUrl,\n        infoHash: common.binaryToHex(data.info_hash)\n      })\n      this.client.emit('update', response)\n    }\n\n    let peer\n    if (data.offer && data.peer_id) {\n      debug('creating peer (from remote offer)')\n      peer = this._createPeer()\n      peer.id = common.binaryToHex(data.peer_id)\n      peer.once('signal', answer => {\n        const params = {\n          action: 'announce',\n          info_hash: this.client._infoHashBinary,\n          peer_id: this.client._peerIdBinary,\n          to_peer_id: data.peer_id,\n          answer,\n          offer_id: data.offer_id\n        }\n        if (this._trackerId) params.trackerid = this._trackerId\n        this._send(params)\n      })\n      peer.signal(data.offer)\n      this.client.emit('peer', peer)\n    }\n\n    if (data.answer && data.peer_id) {\n      const offerId = common.binaryToHex(data.offer_id)\n      peer = this.peers[offerId]\n      if (peer) {\n        peer.id = common.binaryToHex(data.peer_id)\n        peer.signal(data.answer)\n        this.client.emit('peer', peer)\n\n        clearTimeout(peer.trackerTimeout)\n        peer.trackerTimeout = null\n        delete this.peers[offerId]\n      } else {\n        debug(`got unexpected answer: ${JSON.stringify(data.answer)}`)\n      }\n    }\n  }\n\n  _onScrapeResponse (data) {\n    data = data.files || {}\n\n    const keys = Object.keys(data)\n    if (keys.length === 0) {\n      this.client.emit('warning', new Error('invalid scrape response'))\n      return\n    }\n\n    keys.forEach(infoHash => {\n      // TODO: optionally handle data.flags.min_request_interval\n      // (separate from announce interval)\n      const response = Object.assign(data[infoHash], {\n        announce: this.announceUrl,\n        infoHash: common.binaryToHex(infoHash)\n      })\n      this.client.emit('scrape', response)\n    })\n  }\n\n  _onSocketClose () {\n    if (this.destroyed) return\n    this.destroy()\n    this._startReconnectTimer()\n  }\n\n  _onSocketError (err) {\n    if (this.destroyed) return\n    this.destroy()\n    // errors will often happen if a tracker is offline, so don't treat it as fatal\n    this.client.emit('warning', err)\n    this._startReconnectTimer()\n  }\n\n  _startReconnectTimer () {\n    const ms = Math.floor(Math.random() * RECONNECT_VARIANCE) + Math.min(Math.pow(2, this.retries) * RECONNECT_MINIMUM, RECONNECT_MAXIMUM)\n\n    this.reconnecting = true\n    clearTimeout(this.reconnectTimer)\n    this.reconnectTimer = setTimeout(() => {\n      this.retries++\n      this._openSocket()\n    }, ms)\n    if (this.reconnectTimer.unref) this.reconnectTimer.unref()\n\n    debug('reconnecting socket in %s ms', ms)\n  }\n\n  _send (params) {\n    if (this.destroyed) return\n    this.expectingResponse = true\n    const message = JSON.stringify(params)\n    debug('send %s', message)\n    this.socket.send(message)\n  }\n\n  _generateOffers (numwant, cb) {\n    const self = this\n    const offers = []\n    debug('generating %s offers', numwant)\n\n    for (let i = 0; i < numwant; ++i) {\n      generateOffer()\n    }\n    checkDone()\n\n    function generateOffer () {\n      const offerId = randombytes(20).toString('hex')\n      debug('creating peer (from _generateOffers)')\n      const peer = self.peers[offerId] = self._createPeer({ initiator: true })\n      peer.once('signal', offer => {\n        offers.push({\n          offer,\n          offer_id: common.hexToBinary(offerId)\n        })\n        checkDone()\n      })\n      peer.trackerTimeout = setTimeout(() => {\n        debug('tracker timeout: destroying peer')\n        peer.trackerTimeout = null\n        delete self.peers[offerId]\n        peer.destroy()\n      }, OFFER_TIMEOUT)\n      if (peer.trackerTimeout.unref) peer.trackerTimeout.unref()\n    }\n\n    function checkDone () {\n      if (offers.length === numwant) {\n        debug('generated %s offers', numwant)\n        cb(offers)\n      }\n    }\n  }\n\n  _createPeer (opts) {\n    const self = this\n\n    opts = Object.assign({\n      trickle: false,\n      config: self.client._rtcConfig,\n      wrtc: self.client._wrtc\n    }, opts)\n\n    const peer = new Peer(opts)\n\n    peer.once('error', onError)\n    peer.once('connect', onConnect)\n\n    return peer\n\n    // Handle peer 'error' events that are fired *before* the peer is emitted in\n    // a 'peer' event.\n    function onError (err) {\n      self.client.emit('warning', new Error(`Connection error: ${err.message}`))\n      peer.destroy()\n    }\n\n    // Once the peer is emitted in a 'peer' event, then it's the consumer's\n    // responsibility to listen for errors, so the listeners are removed here.\n    function onConnect () {\n      peer.removeListener('error', onError)\n      peer.removeListener('connect', onConnect)\n    }\n  }\n}\n\nWebSocketTracker.prototype.DEFAULT_ANNOUNCE_INTERVAL = 30 * 1000 // 30 seconds\n// Normally this shouldn't be accessed but is occasionally useful\nWebSocketTracker._socketPool = socketPool\n\nfunction noop () {}\n\nmodule.exports = WebSocketTracker\n","/* global WebSocket, DOMException */\n\nconst debug = require('debug')('simple-websocket')\nconst randombytes = require('randombytes')\nconst stream = require('readable-stream')\nconst queueMicrotask = require('queue-microtask') // TODO: remove when Node 10 is not supported\nconst ws = require('ws') // websockets in node - will be empty object in browser\n\nconst _WebSocket = typeof ws !== 'function' ? WebSocket : ws\n\nconst MAX_BUFFERED_AMOUNT = 64 * 1024\n\n/**\n * WebSocket. Same API as node core `net.Socket`. Duplex stream.\n * @param {Object} opts\n * @param {string=} opts.url websocket server url\n * @param {string=} opts.socket raw websocket instance to wrap\n */\nclass Socket extends stream.Duplex {\n  constructor (opts = {}) {\n    // Support simple usage: `new Socket(url)`\n    if (typeof opts === 'string') {\n      opts = { url: opts }\n    }\n\n    opts = Object.assign({\n      allowHalfOpen: false\n    }, opts)\n\n    super(opts)\n\n    if (opts.url == null && opts.socket == null) {\n      throw new Error('Missing required `url` or `socket` option')\n    }\n    if (opts.url != null && opts.socket != null) {\n      throw new Error('Must specify either `url` or `socket` option, not both')\n    }\n\n    this._id = randombytes(4).toString('hex').slice(0, 7)\n    this._debug('new websocket: %o', opts)\n\n    this.connected = false\n    this.destroyed = false\n\n    this._chunk = null\n    this._cb = null\n    this._interval = null\n\n    if (opts.socket) {\n      this.url = opts.socket.url\n      this._ws = opts.socket\n      this.connected = opts.socket.readyState === _WebSocket.OPEN\n    } else {\n      this.url = opts.url\n      try {\n        if (typeof ws === 'function') {\n          // `ws` package accepts options\n          this._ws = new _WebSocket(opts.url, opts)\n        } else {\n          this._ws = new _WebSocket(opts.url)\n        }\n      } catch (err) {\n        queueMicrotask(() => this.destroy(err))\n        return\n      }\n    }\n\n    this._ws.binaryType = 'arraybuffer'\n    this._ws.onopen = () => {\n      this._onOpen()\n    }\n    this._ws.onmessage = event => {\n      this._onMessage(event)\n    }\n    this._ws.onclose = () => {\n      this._onClose()\n    }\n    this._ws.onerror = () => {\n      this.destroy(new Error('connection error to ' + this.url))\n    }\n\n    this._onFinishBound = () => {\n      this._onFinish()\n    }\n    this.once('finish', this._onFinishBound)\n  }\n\n  /**\n   * Send text/binary data to the WebSocket server.\n   * @param {TypedArrayView|ArrayBuffer|Buffer|string|Blob|Object} chunk\n   */\n  send (chunk) {\n    this._ws.send(chunk)\n  }\n\n  // TODO: Delete this method once readable-stream is updated to contain a default\n  // implementation of destroy() that automatically calls _destroy()\n  // See: https://github.com/nodejs/readable-stream/issues/283\n  destroy (err) {\n    this._destroy(err, () => {})\n  }\n\n  _destroy (err, cb) {\n    if (this.destroyed) return\n\n    this._debug('destroy (error: %s)', err && (err.message || err))\n\n    this.readable = this.writable = false\n    if (!this._readableState.ended) this.push(null)\n    if (!this._writableState.finished) this.end()\n\n    this.connected = false\n    this.destroyed = true\n\n    clearInterval(this._interval)\n    this._interval = null\n    this._chunk = null\n    this._cb = null\n\n    if (this._onFinishBound) this.removeListener('finish', this._onFinishBound)\n    this._onFinishBound = null\n\n    if (this._ws) {\n      const ws = this._ws\n      const onClose = () => {\n        ws.onclose = null\n      }\n      if (ws.readyState === _WebSocket.CLOSED) {\n        onClose()\n      } else {\n        try {\n          ws.onclose = onClose\n          ws.close()\n        } catch (err) {\n          onClose()\n        }\n      }\n\n      ws.onopen = null\n      ws.onmessage = null\n      ws.onerror = () => {}\n    }\n    this._ws = null\n\n    if (err) {\n      if (typeof DOMException !== 'undefined' && err instanceof DOMException) {\n        // Convert Edge DOMException object to Error object\n        const code = err.code\n        err = new Error(err.message)\n        err.code = code\n      }\n      this.emit('error', err)\n    }\n    this.emit('close')\n    cb()\n  }\n\n  _read () {}\n\n  _write (chunk, encoding, cb) {\n    if (this.destroyed) return cb(new Error('cannot write after socket is destroyed'))\n\n    if (this.connected) {\n      try {\n        this.send(chunk)\n      } catch (err) {\n        return this.destroy(err)\n      }\n      if (typeof ws !== 'function' && this._ws.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n        this._debug('start backpressure: bufferedAmount %d', this._ws.bufferedAmount)\n        this._cb = cb\n      } else {\n        cb(null)\n      }\n    } else {\n      this._debug('write before connect')\n      this._chunk = chunk\n      this._cb = cb\n    }\n  }\n\n  // When stream finishes writing, close socket. Half open connections are not\n  // supported.\n  _onFinish () {\n    if (this.destroyed) return\n\n    // Wait a bit before destroying so the socket flushes.\n    // TODO: is there a more reliable way to accomplish this?\n    const destroySoon = () => {\n      setTimeout(() => this.destroy(), 1000)\n    }\n\n    if (this.connected) {\n      destroySoon()\n    } else {\n      this.once('connect', destroySoon)\n    }\n  }\n\n  _onMessage (event) {\n    if (this.destroyed) return\n    let data = event.data\n    if (data instanceof ArrayBuffer) data = Buffer.from(data)\n    this.push(data)\n  }\n\n  _onOpen () {\n    if (this.connected || this.destroyed) return\n    this.connected = true\n\n    if (this._chunk) {\n      try {\n        this.send(this._chunk)\n      } catch (err) {\n        return this.destroy(err)\n      }\n      this._chunk = null\n      this._debug('sent chunk from \"write before connect\"')\n\n      const cb = this._cb\n      this._cb = null\n      cb(null)\n    }\n\n    // Backpressure is not implemented in Node.js. The `ws` module has a buggy\n    // `bufferedAmount` property. See: https://github.com/websockets/ws/issues/492\n    if (typeof ws !== 'function') {\n      this._interval = setInterval(() => this._onInterval(), 150)\n      if (this._interval.unref) this._interval.unref()\n    }\n\n    this._debug('connect')\n    this.emit('connect')\n  }\n\n  _onInterval () {\n    if (!this._cb || !this._ws || this._ws.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n      return\n    }\n    this._debug('ending backpressure: bufferedAmount %d', this._ws.bufferedAmount)\n    const cb = this._cb\n    this._cb = null\n    cb(null)\n  }\n\n  _onClose () {\n    if (this.destroyed) return\n    this._debug('on close')\n    this.destroy()\n  }\n\n  _debug () {\n    const args = [].slice.call(arguments)\n    args[0] = '[' + this._id + '] ' + args[0]\n    debug.apply(null, args)\n  }\n}\n\nSocket.WEBSOCKET_SUPPORT = !!_WebSocket\n\nmodule.exports = Socket\n","const EventEmitter = require('events')\n\nclass Tracker extends EventEmitter {\n  constructor (client, announceUrl) {\n    super()\n\n    this.client = client\n    this.announceUrl = announceUrl\n\n    this.interval = null\n    this.destroyed = false\n  }\n\n  setInterval (intervalMs) {\n    if (intervalMs == null) intervalMs = this.DEFAULT_ANNOUNCE_INTERVAL\n\n    clearInterval(this.interval)\n\n    if (intervalMs) {\n      this.interval = setInterval(() => {\n        this.announce(this.client._defaultAnnounceOpts())\n      }, intervalMs)\n      if (this.interval.unref) this.interval.unref()\n    }\n  }\n}\n\nmodule.exports = Tracker\n","/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = require('inherits')\nvar Hash = require('./hash')\nvar Buffer = require('safe-buffer').Buffer\n\nvar K = [\n  0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n]\n\nvar W = new Array(80)\n\nfunction Sha1 () {\n  this.init()\n  this._w = W\n\n  Hash.call(this, 64, 56)\n}\n\ninherits(Sha1, Hash)\n\nSha1.prototype.init = function () {\n  this._a = 0x67452301\n  this._b = 0xefcdab89\n  this._c = 0x98badcfe\n  this._d = 0x10325476\n  this._e = 0xc3d2e1f0\n\n  return this\n}\n\nfunction rotl1 (num) {\n  return (num << 1) | (num >>> 31)\n}\n\nfunction rotl5 (num) {\n  return (num << 5) | (num >>> 27)\n}\n\nfunction rotl30 (num) {\n  return (num << 30) | (num >>> 2)\n}\n\nfunction ft (s, b, c, d) {\n  if (s === 0) return (b & c) | ((~b) & d)\n  if (s === 2) return (b & c) | (b & d) | (c & d)\n  return b ^ c ^ d\n}\n\nSha1.prototype._update = function (M) {\n  var W = this._w\n\n  var a = this._a | 0\n  var b = this._b | 0\n  var c = this._c | 0\n  var d = this._d | 0\n  var e = this._e | 0\n\n  for (var i = 0; i < 16; ++i) W[i] = M.readInt32BE(i * 4)\n  for (; i < 80; ++i) W[i] = rotl1(W[i - 3] ^ W[i - 8] ^ W[i - 14] ^ W[i - 16])\n\n  for (var j = 0; j < 80; ++j) {\n    var s = ~~(j / 20)\n    var t = (rotl5(a) + ft(s, b, c, d) + e + W[j] + K[s]) | 0\n\n    e = d\n    d = c\n    c = rotl30(b)\n    b = a\n    a = t\n  }\n\n  this._a = (a + this._a) | 0\n  this._b = (b + this._b) | 0\n  this._c = (c + this._c) | 0\n  this._d = (d + this._d) | 0\n  this._e = (e + this._e) | 0\n}\n\nSha1.prototype._hash = function () {\n  var H = Buffer.allocUnsafe(20)\n\n  H.writeInt32BE(this._a | 0, 0)\n  H.writeInt32BE(this._b | 0, 4)\n  H.writeInt32BE(this._c | 0, 8)\n  H.writeInt32BE(this._d | 0, 12)\n  H.writeInt32BE(this._e | 0, 16)\n\n  return H\n}\n\nmodule.exports = Sha1\n","var Buffer = require('safe-buffer').Buffer\n\n// prototype class for hash functions\nfunction Hash (blockSize, finalSize) {\n  this._block = Buffer.alloc(blockSize)\n  this._finalSize = finalSize\n  this._blockSize = blockSize\n  this._len = 0\n}\n\nHash.prototype.update = function (data, enc) {\n  if (typeof data === 'string') {\n    enc = enc || 'utf8'\n    data = Buffer.from(data, enc)\n  }\n\n  var block = this._block\n  var blockSize = this._blockSize\n  var length = data.length\n  var accum = this._len\n\n  for (var offset = 0; offset < length;) {\n    var assigned = accum % blockSize\n    var remainder = Math.min(length - offset, blockSize - assigned)\n\n    for (var i = 0; i < remainder; i++) {\n      block[assigned + i] = data[offset + i]\n    }\n\n    accum += remainder\n    offset += remainder\n\n    if ((accum % blockSize) === 0) {\n      this._update(block)\n    }\n  }\n\n  this._len += length\n  return this\n}\n\nHash.prototype.digest = function (enc) {\n  var rem = this._len % this._blockSize\n\n  this._block[rem] = 0x80\n\n  // zero (rem + 1) trailing bits, where (rem + 1) is the smallest\n  // non-negative solution to the equation (length + 1 + (rem + 1)) === finalSize mod blockSize\n  this._block.fill(0, rem + 1)\n\n  if (rem >= this._finalSize) {\n    this._update(this._block)\n    this._block.fill(0)\n  }\n\n  var bits = this._len * 8\n\n  // uint32\n  if (bits <= 0xffffffff) {\n    this._block.writeUInt32BE(bits, this._blockSize - 4)\n\n  // uint64\n  } else {\n    var lowBits = (bits & 0xffffffff) >>> 0\n    var highBits = (bits - lowBits) / 0x100000000\n\n    this._block.writeUInt32BE(highBits, this._blockSize - 8)\n    this._block.writeUInt32BE(lowBits, this._blockSize - 4)\n  }\n\n  this._update(this._block)\n  var hash = this._hash()\n\n  return enc ? hash.toString(enc) : hash\n}\n\nHash.prototype._update = function () {\n  throw new Error('_update must be implemented by subclass')\n}\n\nmodule.exports = Hash\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst SMOOTH_INTERVAL = 1 * 1000;\nconst MEASURE_INTERVAL = 60 * 1000;\nclass NumberWithTime {\n    constructor(value, timeStamp) {\n        this.value = value;\n        this.timeStamp = timeStamp;\n    }\n}\nclass BandwidthApproximator {\n    constructor() {\n        this.lastBytes = [];\n        this.currentBytesSum = 0;\n        this.lastBandwidth = [];\n    }\n    addBytes(bytes, timeStamp) {\n        this.lastBytes.push(new NumberWithTime(bytes, timeStamp));\n        this.currentBytesSum += bytes;\n        while (timeStamp - this.lastBytes[0].timeStamp > SMOOTH_INTERVAL) {\n            this.currentBytesSum -= this.lastBytes.shift().value;\n        }\n        this.lastBandwidth.push(new NumberWithTime(this.currentBytesSum / SMOOTH_INTERVAL, timeStamp));\n    }\n    // in bytes per millisecond\n    getBandwidth(timeStamp) {\n        while (this.lastBandwidth.length != 0 && timeStamp - this.lastBandwidth[0].timeStamp > MEASURE_INTERVAL) {\n            this.lastBandwidth.shift();\n        }\n        let maxBandwidth = 0;\n        for (const bandwidth of this.lastBandwidth) {\n            if (bandwidth.value > maxBandwidth) {\n                maxBandwidth = bandwidth.value;\n            }\n        }\n        return maxBandwidth;\n    }\n    getSmoothInterval() {\n        return SMOOTH_INTERVAL;\n    }\n    getMeasureInterval() {\n        return MEASURE_INTERVAL;\n    }\n}\nexports.BandwidthApproximator = BandwidthApproximator;\n","\"use strict\";\n/**\n * Copyright 2019 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass SegmentsMemoryStorage {\n    constructor(settings) {\n        this.settings = settings;\n        this.cache = new Map();\n    }\n    async storeSegment(segment) {\n        this.cache.set(segment.id, { segment, lastAccessed: performance.now() });\n    }\n    async getSegmentsMap(masterSwarmId) {\n        return this.cache;\n    }\n    async getSegment(id, masterSwarmId) {\n        const cacheItem = this.cache.get(id);\n        if (cacheItem === undefined) {\n            return undefined;\n        }\n        cacheItem.lastAccessed = performance.now();\n        return cacheItem.segment;\n    }\n    async hasSegment(id, masterSwarmId) {\n        return this.cache.has(id);\n    }\n    async clean(masterSwarmId, lockedSementsfilter) {\n        const segmentsToDelete = [];\n        const remainingSegments = [];\n        // Delete old segments\n        const now = performance.now();\n        for (const cachedSegment of this.cache.values()) {\n            if (now - cachedSegment.lastAccessed > this.settings.cachedSegmentExpiration) {\n                segmentsToDelete.push(cachedSegment.segment.id);\n            }\n            else {\n                remainingSegments.push(cachedSegment);\n            }\n        }\n        // Delete segments over cached count\n        let countOverhead = remainingSegments.length - this.settings.cachedSegmentsCount;\n        if (countOverhead > 0) {\n            remainingSegments.sort((a, b) => a.lastAccessed - b.lastAccessed);\n            for (const cachedSegment of remainingSegments) {\n                if ((lockedSementsfilter === undefined) || !lockedSementsfilter(cachedSegment.segment.id)) {\n                    segmentsToDelete.push(cachedSegment.segment.id);\n                    countOverhead--;\n                    if (countOverhead == 0) {\n                        break;\n                    }\n                }\n            }\n        }\n        segmentsToDelete.forEach(id => this.cache.delete(id));\n        return segmentsToDelete.length > 0;\n    }\n    async destroy() {\n        this.cache.clear();\n    }\n}\nexports.SegmentsMemoryStorage = SegmentsMemoryStorage;\n","/*! @name m3u8-parser @version 4.5.0 @license Apache-2.0 */\nimport _inheritsLoose from '@babel/runtime/helpers/inheritsLoose';\nimport Stream from '@videojs/vhs-utils/dist/stream.js';\nimport _extends from '@babel/runtime/helpers/extends';\nimport _assertThisInitialized from '@babel/runtime/helpers/assertThisInitialized';\nimport decodeB64ToUint8Array from '@videojs/vhs-utils/dist/decode-b64-to-uint8-array.js';\n\n/**\n * A stream that buffers string input and generates a `data` event for each\n * line.\n *\n * @class LineStream\n * @extends Stream\n */\n\nvar LineStream =\n/*#__PURE__*/\nfunction (_Stream) {\n  _inheritsLoose(LineStream, _Stream);\n\n  function LineStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.buffer = '';\n    return _this;\n  }\n  /**\n   * Add new data to be parsed.\n   *\n   * @param {string} data the text to process\n   */\n\n\n  var _proto = LineStream.prototype;\n\n  _proto.push = function push(data) {\n    var nextNewline;\n    this.buffer += data;\n    nextNewline = this.buffer.indexOf('\\n');\n\n    for (; nextNewline > -1; nextNewline = this.buffer.indexOf('\\n')) {\n      this.trigger('data', this.buffer.substring(0, nextNewline));\n      this.buffer = this.buffer.substring(nextNewline + 1);\n    }\n  };\n\n  return LineStream;\n}(Stream);\n\n/**\n * \"forgiving\" attribute list psuedo-grammar:\n * attributes -> keyvalue (',' keyvalue)*\n * keyvalue   -> key '=' value\n * key        -> [^=]*\n * value      -> '\"' [^\"]* '\"' | [^,]*\n */\n\nvar attributeSeparator = function attributeSeparator() {\n  var key = '[^=]*';\n  var value = '\"[^\"]*\"|[^,]*';\n  var keyvalue = '(?:' + key + ')=(?:' + value + ')';\n  return new RegExp('(?:^|,)(' + keyvalue + ')');\n};\n/**\n * Parse attributes from a line given the separator\n *\n * @param {string} attributes the attribute line to parse\n */\n\n\nvar parseAttributes = function parseAttributes(attributes) {\n  // split the string using attributes as the separator\n  var attrs = attributes.split(attributeSeparator());\n  var result = {};\n  var i = attrs.length;\n  var attr;\n\n  while (i--) {\n    // filter out unmatched portions of the string\n    if (attrs[i] === '') {\n      continue;\n    } // split the key and value\n\n\n    attr = /([^=]*)=(.*)/.exec(attrs[i]).slice(1); // trim whitespace and remove optional quotes around the value\n\n    attr[0] = attr[0].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^\\s+|\\s+$/g, '');\n    attr[1] = attr[1].replace(/^['\"](.*)['\"]$/g, '$1');\n    result[attr[0]] = attr[1];\n  }\n\n  return result;\n};\n/**\n * A line-level M3U8 parser event stream. It expects to receive input one\n * line at a time and performs a context-free parse of its contents. A stream\n * interpretation of a manifest can be useful if the manifest is expected to\n * be too large to fit comfortably into memory or the entirety of the input\n * is not immediately available. Otherwise, it's probably much easier to work\n * with a regular `Parser` object.\n *\n * Produces `data` events with an object that captures the parser's\n * interpretation of the input. That object has a property `tag` that is one\n * of `uri`, `comment`, or `tag`. URIs only have a single additional\n * property, `line`, which captures the entirety of the input without\n * interpretation. Comments similarly have a single additional property\n * `text` which is the input without the leading `#`.\n *\n * Tags always have a property `tagType` which is the lower-cased version of\n * the M3U8 directive without the `#EXT` or `#EXT-X-` prefix. For instance,\n * `#EXT-X-MEDIA-SEQUENCE` becomes `media-sequence` when parsed. Unrecognized\n * tags are given the tag type `unknown` and a single additional property\n * `data` with the remainder of the input.\n *\n * @class ParseStream\n * @extends Stream\n */\n\n\nvar ParseStream =\n/*#__PURE__*/\nfunction (_Stream) {\n  _inheritsLoose(ParseStream, _Stream);\n\n  function ParseStream() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.customParsers = [];\n    _this.tagMappers = [];\n    return _this;\n  }\n  /**\n   * Parses an additional line of input.\n   *\n   * @param {string} line a single line of an M3U8 file to parse\n   */\n\n\n  var _proto = ParseStream.prototype;\n\n  _proto.push = function push(line) {\n    var _this2 = this;\n\n    var match;\n    var event; // strip whitespace\n\n    line = line.trim();\n\n    if (line.length === 0) {\n      // ignore empty lines\n      return;\n    } // URIs\n\n\n    if (line[0] !== '#') {\n      this.trigger('data', {\n        type: 'uri',\n        uri: line\n      });\n      return;\n    } // map tags\n\n\n    var newLines = this.tagMappers.reduce(function (acc, mapper) {\n      var mappedLine = mapper(line); // skip if unchanged\n\n      if (mappedLine === line) {\n        return acc;\n      }\n\n      return acc.concat([mappedLine]);\n    }, [line]);\n    newLines.forEach(function (newLine) {\n      for (var i = 0; i < _this2.customParsers.length; i++) {\n        if (_this2.customParsers[i].call(_this2, newLine)) {\n          return;\n        }\n      } // Comments\n\n\n      if (newLine.indexOf('#EXT') !== 0) {\n        _this2.trigger('data', {\n          type: 'comment',\n          text: newLine.slice(1)\n        });\n\n        return;\n      } // strip off any carriage returns here so the regex matching\n      // doesn't have to account for them.\n\n\n      newLine = newLine.replace('\\r', ''); // Tags\n\n      match = /^#EXTM3U/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'm3u'\n        });\n\n        return;\n      }\n\n      match = /^#EXTINF:?([0-9\\.]*)?,?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'inf'\n        };\n\n        if (match[1]) {\n          event.duration = parseFloat(match[1]);\n        }\n\n        if (match[2]) {\n          event.title = match[2];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'targetduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'totalduration'\n        };\n\n        if (match[1]) {\n          event.duration = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'version'\n        };\n\n        if (match[1]) {\n          event.version = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\\-?[0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'discontinuity-sequence'\n        };\n\n        if (match[1]) {\n          event.number = parseInt(match[1], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'playlist-type'\n        };\n\n        if (match[1]) {\n          event.playlistType = match[1];\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'byterange'\n        };\n\n        if (match[1]) {\n          event.length = parseInt(match[1], 10);\n        }\n\n        if (match[2]) {\n          event.offset = parseInt(match[2], 10);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'allow-cache'\n        };\n\n        if (match[1]) {\n          event.allowed = !/NO/.test(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MAP:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'map'\n        };\n\n        if (match[1]) {\n          var attributes = parseAttributes(match[1]);\n\n          if (attributes.URI) {\n            event.uri = attributes.URI;\n          }\n\n          if (attributes.BYTERANGE) {\n            var _attributes$BYTERANGE = attributes.BYTERANGE.split('@'),\n                length = _attributes$BYTERANGE[0],\n                offset = _attributes$BYTERANGE[1];\n\n            event.byterange = {};\n\n            if (length) {\n              event.byterange.length = parseInt(length, 10);\n            }\n\n            if (offset) {\n              event.byterange.offset = parseInt(offset, 10);\n            }\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-STREAM-INF:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'stream-inf'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n\n          if (event.attributes.RESOLUTION) {\n            var split = event.attributes.RESOLUTION.split('x');\n            var resolution = {};\n\n            if (split[0]) {\n              resolution.width = parseInt(split[0], 10);\n            }\n\n            if (split[1]) {\n              resolution.height = parseInt(split[1], 10);\n            }\n\n            event.attributes.RESOLUTION = resolution;\n          }\n\n          if (event.attributes.BANDWIDTH) {\n            event.attributes.BANDWIDTH = parseInt(event.attributes.BANDWIDTH, 10);\n          }\n\n          if (event.attributes['PROGRAM-ID']) {\n            event.attributes['PROGRAM-ID'] = parseInt(event.attributes['PROGRAM-ID'], 10);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-MEDIA:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'media'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-ENDLIST/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'endlist'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-DISCONTINUITY/.exec(newLine);\n\n      if (match) {\n        _this2.trigger('data', {\n          type: 'tag',\n          tagType: 'discontinuity'\n        });\n\n        return;\n      }\n\n      match = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'program-date-time'\n        };\n\n        if (match[1]) {\n          event.dateTimeString = match[1];\n          event.dateTimeObject = new Date(match[1]);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-KEY:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'key'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]); // parse the IV string into a Uint32Array\n\n          if (event.attributes.IV) {\n            if (event.attributes.IV.substring(0, 2).toLowerCase() === '0x') {\n              event.attributes.IV = event.attributes.IV.substring(2);\n            }\n\n            event.attributes.IV = event.attributes.IV.match(/.{8}/g);\n            event.attributes.IV[0] = parseInt(event.attributes.IV[0], 16);\n            event.attributes.IV[1] = parseInt(event.attributes.IV[1], 16);\n            event.attributes.IV[2] = parseInt(event.attributes.IV[2], 16);\n            event.attributes.IV[3] = parseInt(event.attributes.IV[3], 16);\n            event.attributes.IV = new Uint32Array(event.attributes.IV);\n          }\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-START:?(.*)$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'start'\n        };\n\n        if (match[1]) {\n          event.attributes = parseAttributes(match[1]);\n          event.attributes['TIME-OFFSET'] = parseFloat(event.attributes['TIME-OFFSET']);\n          event.attributes.PRECISE = /YES/.test(event.attributes.PRECISE);\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out-cont'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-out'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      }\n\n      match = /^#EXT-X-CUE-IN:?(.*)?$/.exec(newLine);\n\n      if (match) {\n        event = {\n          type: 'tag',\n          tagType: 'cue-in'\n        };\n\n        if (match[1]) {\n          event.data = match[1];\n        } else {\n          event.data = '';\n        }\n\n        _this2.trigger('data', event);\n\n        return;\n      } // unknown tag type\n\n\n      _this2.trigger('data', {\n        type: 'tag',\n        data: newLine.slice(4)\n      });\n    });\n  }\n  /**\n   * Add a parser for custom headers\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.customType   the custom type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(_ref) {\n    var _this3 = this;\n\n    var expression = _ref.expression,\n        customType = _ref.customType,\n        dataParser = _ref.dataParser,\n        segment = _ref.segment;\n\n    if (typeof dataParser !== 'function') {\n      dataParser = function dataParser(line) {\n        return line;\n      };\n    }\n\n    this.customParsers.push(function (line) {\n      var match = expression.exec(line);\n\n      if (match) {\n        _this3.trigger('data', {\n          type: 'custom',\n          data: dataParser(line),\n          customType: customType,\n          segment: segment\n        });\n\n        return true;\n      }\n    });\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(_ref2) {\n    var expression = _ref2.expression,\n        map = _ref2.map;\n\n    var mapFn = function mapFn(line) {\n      if (expression.test(line)) {\n        return map(line);\n      }\n\n      return line;\n    };\n\n    this.tagMappers.push(mapFn);\n  };\n\n  return ParseStream;\n}(Stream);\n\n/**\n * A parser for M3U8 files. The current interpretation of the input is\n * exposed as a property `manifest` on parser objects. It's just two lines to\n * create and parse a manifest once you have the contents available as a string:\n *\n * ```js\n * var parser = new m3u8.Parser();\n * parser.push(xhr.responseText);\n * ```\n *\n * New input can later be applied to update the manifest object by calling\n * `push` again.\n *\n * The parser attempts to create a usable manifest object even if the\n * underlying input is somewhat nonsensical. It emits `info` and `warning`\n * events during the parse if it encounters input that seems invalid or\n * requires some property of the manifest object to be defaulted.\n *\n * @class Parser\n * @extends Stream\n */\n\nvar Parser =\n/*#__PURE__*/\nfunction (_Stream) {\n  _inheritsLoose(Parser, _Stream);\n\n  function Parser() {\n    var _this;\n\n    _this = _Stream.call(this) || this;\n    _this.lineStream = new LineStream();\n    _this.parseStream = new ParseStream();\n\n    _this.lineStream.pipe(_this.parseStream);\n    /* eslint-disable consistent-this */\n\n\n    var self = _assertThisInitialized(_this);\n    /* eslint-enable consistent-this */\n\n\n    var uris = [];\n    var currentUri = {}; // if specified, the active EXT-X-MAP definition\n\n    var currentMap; // if specified, the active decryption key\n\n    var _key;\n\n    var noop = function noop() {};\n\n    var defaultMediaGroups = {\n      'AUDIO': {},\n      'VIDEO': {},\n      'CLOSED-CAPTIONS': {},\n      'SUBTITLES': {}\n    }; // This is the Widevine UUID from DASH IF IOP. The same exact string is\n    // used in MPDs with Widevine encrypted streams.\n\n    var widevineUuid = 'urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed'; // group segments into numbered timelines delineated by discontinuities\n\n    var currentTimeline = 0; // the manifest is empty until the parse stream begins delivering data\n\n    _this.manifest = {\n      allowCache: true,\n      discontinuityStarts: [],\n      segments: []\n    }; // keep track of the last seen segment's byte range end, as segments are not required\n    // to provide the offset, in which case it defaults to the next byte after the\n    // previous segment\n\n    var lastByterangeEnd = 0; // update the manifest with the m3u8 entry from the parse stream\n\n    _this.parseStream.on('data', function (entry) {\n      var mediaGroup;\n      var rendition;\n      ({\n        tag: function tag() {\n          // switch based on the tag type\n          (({\n            'allow-cache': function allowCache() {\n              this.manifest.allowCache = entry.allowed;\n\n              if (!('allowed' in entry)) {\n                this.trigger('info', {\n                  message: 'defaulting allowCache to YES'\n                });\n                this.manifest.allowCache = true;\n              }\n            },\n            byterange: function byterange() {\n              var byterange = {};\n\n              if ('length' in entry) {\n                currentUri.byterange = byterange;\n                byterange.length = entry.length;\n\n                if (!('offset' in entry)) {\n                  /*\n                   * From the latest spec (as of this writing):\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.2.2\n                   *\n                   * Same text since EXT-X-BYTERANGE's introduction in draft 7:\n                   * https://tools.ietf.org/html/draft-pantos-http-live-streaming-07#section-3.3.1)\n                   *\n                   * \"If o [offset] is not present, the sub-range begins at the next byte\n                   * following the sub-range of the previous media segment.\"\n                   */\n                  entry.offset = lastByterangeEnd;\n                }\n              }\n\n              if ('offset' in entry) {\n                currentUri.byterange = byterange;\n                byterange.offset = entry.offset;\n              }\n\n              lastByterangeEnd = byterange.offset + byterange.length;\n            },\n            endlist: function endlist() {\n              this.manifest.endList = true;\n            },\n            inf: function inf() {\n              if (!('mediaSequence' in this.manifest)) {\n                this.manifest.mediaSequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting media sequence to zero'\n                });\n              }\n\n              if (!('discontinuitySequence' in this.manifest)) {\n                this.manifest.discontinuitySequence = 0;\n                this.trigger('info', {\n                  message: 'defaulting discontinuity sequence to zero'\n                });\n              }\n\n              if (entry.duration > 0) {\n                currentUri.duration = entry.duration;\n              }\n\n              if (entry.duration === 0) {\n                currentUri.duration = 0.01;\n                this.trigger('info', {\n                  message: 'updating zero segment duration to a small value'\n                });\n              }\n\n              this.manifest.segments = uris;\n            },\n            key: function key() {\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without attribute list'\n                });\n                return;\n              } // clear the active encryption key\n\n\n              if (entry.attributes.METHOD === 'NONE') {\n                _key = null;\n                return;\n              }\n\n              if (!entry.attributes.URI) {\n                this.trigger('warn', {\n                  message: 'ignoring key declaration without URI'\n                });\n                return;\n              } // check if the content is encrypted for Widevine\n              // Widevine/HLS spec: https://storage.googleapis.com/wvdocs/Widevine_DRM_HLS.pdf\n\n\n              if (entry.attributes.KEYFORMAT === widevineUuid) {\n                var VALID_METHODS = ['SAMPLE-AES', 'SAMPLE-AES-CTR', 'SAMPLE-AES-CENC'];\n\n                if (VALID_METHODS.indexOf(entry.attributes.METHOD) === -1) {\n                  this.trigger('warn', {\n                    message: 'invalid key method provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (entry.attributes.METHOD === 'SAMPLE-AES-CENC') {\n                  this.trigger('warn', {\n                    message: 'SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead'\n                  });\n                }\n\n                if (entry.attributes.URI.substring(0, 23) !== 'data:text/plain;base64,') {\n                  this.trigger('warn', {\n                    message: 'invalid key URI provided for Widevine'\n                  });\n                  return;\n                }\n\n                if (!(entry.attributes.KEYID && entry.attributes.KEYID.substring(0, 2) === '0x')) {\n                  this.trigger('warn', {\n                    message: 'invalid key ID provided for Widevine'\n                  });\n                  return;\n                } // if Widevine key attributes are valid, store them as `contentProtection`\n                // on the manifest to emulate Widevine tag structure in a DASH mpd\n\n\n                this.manifest.contentProtection = {\n                  'com.widevine.alpha': {\n                    attributes: {\n                      schemeIdUri: entry.attributes.KEYFORMAT,\n                      // remove '0x' from the key id string\n                      keyId: entry.attributes.KEYID.substring(2)\n                    },\n                    // decode the base64-encoded PSSH box\n                    pssh: decodeB64ToUint8Array(entry.attributes.URI.split(',')[1])\n                  }\n                };\n                return;\n              }\n\n              if (!entry.attributes.METHOD) {\n                this.trigger('warn', {\n                  message: 'defaulting key method to AES-128'\n                });\n              } // setup an encryption key for upcoming segments\n\n\n              _key = {\n                method: entry.attributes.METHOD || 'AES-128',\n                uri: entry.attributes.URI\n              };\n\n              if (typeof entry.attributes.IV !== 'undefined') {\n                _key.iv = entry.attributes.IV;\n              }\n            },\n            'media-sequence': function mediaSequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid media sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.mediaSequence = entry.number;\n            },\n            'discontinuity-sequence': function discontinuitySequence() {\n              if (!isFinite(entry.number)) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid discontinuity sequence: ' + entry.number\n                });\n                return;\n              }\n\n              this.manifest.discontinuitySequence = entry.number;\n              currentTimeline = entry.number;\n            },\n            'playlist-type': function playlistType() {\n              if (!/VOD|EVENT/.test(entry.playlistType)) {\n                this.trigger('warn', {\n                  message: 'ignoring unknown playlist type: ' + entry.playlist\n                });\n                return;\n              }\n\n              this.manifest.playlistType = entry.playlistType;\n            },\n            map: function map() {\n              currentMap = {};\n\n              if (entry.uri) {\n                currentMap.uri = entry.uri;\n              }\n\n              if (entry.byterange) {\n                currentMap.byterange = entry.byterange;\n              }\n            },\n            'stream-inf': function streamInf() {\n              this.manifest.playlists = uris;\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!entry.attributes) {\n                this.trigger('warn', {\n                  message: 'ignoring empty stream-inf attributes'\n                });\n                return;\n              }\n\n              if (!currentUri.attributes) {\n                currentUri.attributes = {};\n              }\n\n              _extends(currentUri.attributes, entry.attributes);\n            },\n            media: function media() {\n              this.manifest.mediaGroups = this.manifest.mediaGroups || defaultMediaGroups;\n\n              if (!(entry.attributes && entry.attributes.TYPE && entry.attributes['GROUP-ID'] && entry.attributes.NAME)) {\n                this.trigger('warn', {\n                  message: 'ignoring incomplete or missing media group'\n                });\n                return;\n              } // find the media group, creating defaults as necessary\n\n\n              var mediaGroupType = this.manifest.mediaGroups[entry.attributes.TYPE];\n              mediaGroupType[entry.attributes['GROUP-ID']] = mediaGroupType[entry.attributes['GROUP-ID']] || {};\n              mediaGroup = mediaGroupType[entry.attributes['GROUP-ID']]; // collect the rendition metadata\n\n              rendition = {\n                default: /yes/i.test(entry.attributes.DEFAULT)\n              };\n\n              if (rendition.default) {\n                rendition.autoselect = true;\n              } else {\n                rendition.autoselect = /yes/i.test(entry.attributes.AUTOSELECT);\n              }\n\n              if (entry.attributes.LANGUAGE) {\n                rendition.language = entry.attributes.LANGUAGE;\n              }\n\n              if (entry.attributes.URI) {\n                rendition.uri = entry.attributes.URI;\n              }\n\n              if (entry.attributes['INSTREAM-ID']) {\n                rendition.instreamId = entry.attributes['INSTREAM-ID'];\n              }\n\n              if (entry.attributes.CHARACTERISTICS) {\n                rendition.characteristics = entry.attributes.CHARACTERISTICS;\n              }\n\n              if (entry.attributes.FORCED) {\n                rendition.forced = /yes/i.test(entry.attributes.FORCED);\n              } // insert the new rendition\n\n\n              mediaGroup[entry.attributes.NAME] = rendition;\n            },\n            discontinuity: function discontinuity() {\n              currentTimeline += 1;\n              currentUri.discontinuity = true;\n              this.manifest.discontinuityStarts.push(uris.length);\n            },\n            'program-date-time': function programDateTime() {\n              if (typeof this.manifest.dateTimeString === 'undefined') {\n                // PROGRAM-DATE-TIME is a media-segment tag, but for backwards\n                // compatibility, we add the first occurence of the PROGRAM-DATE-TIME tag\n                // to the manifest object\n                // TODO: Consider removing this in future major version\n                this.manifest.dateTimeString = entry.dateTimeString;\n                this.manifest.dateTimeObject = entry.dateTimeObject;\n              }\n\n              currentUri.dateTimeString = entry.dateTimeString;\n              currentUri.dateTimeObject = entry.dateTimeObject;\n            },\n            targetduration: function targetduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid target duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.targetDuration = entry.duration;\n            },\n            totalduration: function totalduration() {\n              if (!isFinite(entry.duration) || entry.duration < 0) {\n                this.trigger('warn', {\n                  message: 'ignoring invalid total duration: ' + entry.duration\n                });\n                return;\n              }\n\n              this.manifest.totalDuration = entry.duration;\n            },\n            start: function start() {\n              if (!entry.attributes || isNaN(entry.attributes['TIME-OFFSET'])) {\n                this.trigger('warn', {\n                  message: 'ignoring start declaration without appropriate attribute list'\n                });\n                return;\n              }\n\n              this.manifest.start = {\n                timeOffset: entry.attributes['TIME-OFFSET'],\n                precise: entry.attributes.PRECISE\n              };\n            },\n            'cue-out': function cueOut() {\n              currentUri.cueOut = entry.data;\n            },\n            'cue-out-cont': function cueOutCont() {\n              currentUri.cueOutCont = entry.data;\n            },\n            'cue-in': function cueIn() {\n              currentUri.cueIn = entry.data;\n            }\n          })[entry.tagType] || noop).call(self);\n        },\n        uri: function uri() {\n          currentUri.uri = entry.uri;\n          uris.push(currentUri); // if no explicit duration was declared, use the target duration\n\n          if (this.manifest.targetDuration && !('duration' in currentUri)) {\n            this.trigger('warn', {\n              message: 'defaulting segment duration to the target duration'\n            });\n            currentUri.duration = this.manifest.targetDuration;\n          } // annotate with encryption information, if necessary\n\n\n          if (_key) {\n            currentUri.key = _key;\n          }\n\n          currentUri.timeline = currentTimeline; // annotate with initialization segment information, if necessary\n\n          if (currentMap) {\n            currentUri.map = currentMap;\n          } // prepare for the next URI\n\n\n          currentUri = {};\n        },\n        comment: function comment() {// comments are not important for playback\n        },\n        custom: function custom() {\n          // if this is segment-level data attach the output to the segment\n          if (entry.segment) {\n            currentUri.custom = currentUri.custom || {};\n            currentUri.custom[entry.customType] = entry.data; // if this is manifest-level data attach to the top level manifest object\n          } else {\n            this.manifest.custom = this.manifest.custom || {};\n            this.manifest.custom[entry.customType] = entry.data;\n          }\n        }\n      })[entry.type].call(self);\n    });\n\n    return _this;\n  }\n  /**\n   * Parse the input string and update the manifest object.\n   *\n   * @param {string} chunk a potentially incomplete portion of the manifest\n   */\n\n\n  var _proto = Parser.prototype;\n\n  _proto.push = function push(chunk) {\n    this.lineStream.push(chunk);\n  }\n  /**\n   * Flush any remaining input. This can be handy if the last line of an M3U8\n   * manifest did not contain a trailing newline but the file has been\n   * completely received.\n   */\n  ;\n\n  _proto.end = function end() {\n    // flush any buffered input\n    this.lineStream.push('\\n');\n  }\n  /**\n   * Add an additional parser for non-standard tags\n   *\n   * @param {Object}   options              a map of options for the added parser\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {string}   options.type         the type to register to the output\n   * @param {Function} [options.dataParser] function to parse the line into an object\n   * @param {boolean}  [options.segment]    should tag data be attached to the segment object\n   */\n  ;\n\n  _proto.addParser = function addParser(options) {\n    this.parseStream.addParser(options);\n  }\n  /**\n   * Add a custom header mapper\n   *\n   * @param {Object}   options\n   * @param {RegExp}   options.expression   a regular expression to match the custom header\n   * @param {Function} options.map          function to translate tag into a different tag\n   */\n  ;\n\n  _proto.addTagMapper = function addTagMapper(options) {\n    this.parseStream.addTagMapper(options);\n  };\n\n  return Parser;\n}(Stream);\n\nexport { LineStream, ParseStream, Parser };\n","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","\"use strict\";\n/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DEFAULT_DOWNLOAD_LATENCY = 1;\nconst DEFAULT_DOWNLOAD_BANDWIDTH = 12500; // bytes per millisecond\nclass HlsJsLoader {\n    constructor(segmentManager) {\n        this.stats = {}; // required for older versions of hls.js\n        this.segmentManager = segmentManager;\n    }\n    async load(context, _config, callbacks) {\n        if (context.type) {\n            try {\n                const result = await this.segmentManager.loadPlaylist(context.url);\n                this.successPlaylist(result, context, callbacks);\n            }\n            catch (e) {\n                this.error(e, context, callbacks);\n            }\n        }\n        else if (context.frag) {\n            try {\n                const result = await this.segmentManager.loadSegment(context.url, (context.rangeStart == undefined) || (context.rangeEnd == undefined)\n                    ? undefined\n                    : { offset: context.rangeStart, length: context.rangeEnd - context.rangeStart });\n                if (result.content !== undefined) {\n                    setTimeout(() => this.successSegment(result.content, result.downloadBandwidth, context, callbacks), 0);\n                }\n            }\n            catch (e) {\n                setTimeout(() => this.error(e, context, callbacks), 0);\n            }\n        }\n        else {\n            console.warn(\"Unknown load request\", context);\n        }\n    }\n    abort(context) {\n        this.segmentManager.abortSegment(context.url, (context.rangeStart == undefined) || (context.rangeEnd == undefined)\n            ? undefined\n            : { offset: context.rangeStart, length: context.rangeEnd - context.rangeStart });\n    }\n    successPlaylist(xhr, context, callbacks) {\n        const now = performance.now();\n        this.stats.trequest = now - 300;\n        this.stats.tfirst = now - 200;\n        this.stats.tload = now;\n        this.stats.loaded = xhr.response.length;\n        callbacks.onSuccess({\n            url: xhr.responseURL,\n            data: xhr.response\n        }, this.stats, context);\n    }\n    successSegment(content, downloadBandwidth, context, callbacks) {\n        const now = performance.now();\n        const downloadTime = content.byteLength / (((downloadBandwidth === undefined) || (downloadBandwidth <= 0)) ? DEFAULT_DOWNLOAD_BANDWIDTH : downloadBandwidth);\n        this.stats.trequest = now - DEFAULT_DOWNLOAD_LATENCY - downloadTime;\n        this.stats.tfirst = now - downloadTime;\n        this.stats.tload = now;\n        this.stats.loaded = content.byteLength;\n        callbacks.onSuccess({\n            url: context.url,\n            data: content\n        }, this.stats, context);\n    }\n    error(error, context, callbacks) {\n        callbacks.onError(error, context);\n    }\n}\nexports.HlsJsLoader = HlsJsLoader;\n","/**\n * Copyright 2018 Novage LLC.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nfunction createHlsJsLoaderClass(HlsJsLoader, engine) {\n    function HlsJsLoaderClass() {\n        this.impl = new HlsJsLoader(engine.segmentManager);\n        this.stats = this.impl.stats;\n    }\n\n    HlsJsLoaderClass.prototype.load = function (context, config, callbacks) {\n        this.context = context;\n        this.impl.load(context, config, callbacks);\n    };\n\n    HlsJsLoaderClass.prototype.abort = function () {\n        this.impl.abort(this.context);\n    };\n\n    HlsJsLoaderClass.prototype.destroy = function () {\n        if (this.context) {\n            this.impl.abort(this.context);\n        }\n    };\n\n    HlsJsLoaderClass.getEngine = function () {\n        return engine;\n    };\n\n    return HlsJsLoaderClass;\n}\n\nmodule.exports.createHlsJsLoaderClass = createHlsJsLoaderClass;\n","import { lazy } from 'react'\nimport { supportsWebKitPresentationMode } from '../utils'\nimport { canPlay, AUDIO_EXTENSIONS } from '../patterns'\n\nexport default [\n  {\n    key: 'youtube',\n    name: 'YouTube',\n    canPlay: canPlay.youtube,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerYouTube' */'./YouTube'))\n  },\n  {\n    key: 'soundcloud',\n    name: 'SoundCloud',\n    canPlay: canPlay.soundcloud,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerSoundCloud' */'./SoundCloud'))\n  },\n  {\n    key: 'vimeo',\n    name: 'Vimeo',\n    canPlay: canPlay.vimeo,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerVimeo' */'./Vimeo'))\n  },\n  {\n    key: 'facebook',\n    name: 'Facebook',\n    canPlay: canPlay.facebook,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerFacebook' */'./Facebook'))\n  },\n  {\n    key: 'streamable',\n    name: 'Streamable',\n    canPlay: canPlay.streamable,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerStreamable' */'./Streamable'))\n  },\n  {\n    key: 'wistia',\n    name: 'Wistia',\n    canPlay: canPlay.wistia,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerWistia' */'./Wistia'))\n  },\n  {\n    key: 'twitch',\n    name: 'Twitch',\n    canPlay: canPlay.twitch,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerTwitch' */'./Twitch'))\n  },\n  {\n    key: 'dailymotion',\n    name: 'DailyMotion',\n    canPlay: canPlay.dailymotion,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerDailyMotion' */'./DailyMotion'))\n  },\n  {\n    key: 'mixcloud',\n    name: 'Mixcloud',\n    canPlay: canPlay.mixcloud,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerMixcloud' */'./Mixcloud'))\n  },\n  {\n    key: 'vidyard',\n    name: 'Vidyard',\n    canPlay: canPlay.vidyard,\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerVidyard' */'./Vidyard'))\n  },\n  {\n    key: 'hlsjsp2p',\n    name: 'HlsJsP2P',\n    canPlay: canPlay.hlsjsp2p,\n    canEnablePIP: url => {\n      return canPlay.file(url) && (document.pictureInPictureEnabled || supportsWebKitPresentationMode()) && !AUDIO_EXTENSIONS.test(url)\n    },\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerHlsJsP2P' */'./HlsJsP2P'))\n  },\n  {\n    key: 'file',\n    name: 'FilePlayer',\n    canPlay: canPlay.file,\n    canEnablePIP: url => {\n      return canPlay.file(url) && (document.pictureInPictureEnabled || supportsWebKitPresentationMode()) && !AUDIO_EXTENSIONS.test(url)\n    },\n    lazyPlayer: lazy(() => import(/* webpackChunkName: 'reactPlayerFilePlayer' */'./FilePlayer'))\n  }\n]\n","function areInputsEqual(newInputs, lastInputs) {\n    if (newInputs.length !== lastInputs.length) {\n        return false;\n    }\n    for (var i = 0; i < newInputs.length; i++) {\n        if (newInputs[i] !== lastInputs[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction memoizeOne(resultFn, isEqual) {\n    if (isEqual === void 0) { isEqual = areInputsEqual; }\n    var lastThis;\n    var lastArgs = [];\n    var lastResult;\n    var calledOnce = false;\n    function memoized() {\n        var newArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            newArgs[_i] = arguments[_i];\n        }\n        if (calledOnce && lastThis === this && isEqual(newArgs, lastArgs)) {\n            return lastResult;\n        }\n        lastResult = resultFn.apply(this, newArgs);\n        calledOnce = true;\n        lastThis = this;\n        lastArgs = newArgs;\n        return lastResult;\n    }\n    return memoized;\n}\n\nexport default memoizeOne;\n","import PropTypes from 'prop-types'\n\nconst { string, bool, number, array, oneOfType, shape, object, func, node } = PropTypes\n\nexport const propTypes = {\n  url: oneOfType([string, array, object]),\n  playing: bool,\n  loop: bool,\n  controls: bool,\n  volume: number,\n  muted: bool,\n  playbackRate: number,\n  width: oneOfType([string, number]),\n  height: oneOfType([string, number]),\n  style: object,\n  progressInterval: number,\n  playsinline: bool,\n  pip: bool,\n  stopOnUnmount: bool,\n  light: oneOfType([bool, string]),\n  playIcon: node,\n  wrapper: oneOfType([\n    string,\n    func,\n    shape({ render: func.isRequired })\n  ]),\n  config: shape({\n    soundcloud: shape({\n      options: object\n    }),\n    youtube: shape({\n      playerVars: object,\n      embedOptions: object,\n      onUnstarted: func\n    }),\n    facebook: shape({\n      appId: string,\n      version: string,\n      playerId: string,\n      attributes: object\n    }),\n    dailymotion: shape({\n      params: object\n    }),\n    vimeo: shape({\n      playerOptions: object\n    }),\n    file: shape({\n      attributes: object,\n      tracks: array,\n      forceVideo: bool,\n      forceAudio: bool,\n      forceHLS: bool,\n      forceDASH: bool,\n      forceFLV: bool,\n      hlsOptions: object,\n      hlsVersion: string,\n      dashVersion: string,\n      flvVersion: string\n    }),\n    wistia: shape({\n      options: object,\n      playerId: string\n    }),\n    mixcloud: shape({\n      options: object\n    }),\n    twitch: shape({\n      options: object,\n      playerId: string\n    }),\n    vidyard: shape({\n      options: object\n    })\n  }),\n  onReady: func,\n  onStart: func,\n  onPlay: func,\n  onPause: func,\n  onBuffer: func,\n  onBufferEnd: func,\n  onEnded: func,\n  onError: func,\n  onDuration: func,\n  onSeek: func,\n  onProgress: func,\n  onEnablePIP: func,\n  onDisablePIP: func\n}\n\nconst noop = () => {}\n\nexport const defaultProps = {\n  playing: false,\n  loop: false,\n  controls: false,\n  volume: null,\n  muted: false,\n  playbackRate: 1,\n  width: '640px',\n  height: '360px',\n  style: {},\n  progressInterval: 1000,\n  playsinline: false,\n  pip: false,\n  stopOnUnmount: true,\n  light: false,\n  wrapper: 'div',\n  config: {\n    soundcloud: {\n      options: {\n        visual: true, // Undocumented, but makes player fill container and look better\n        buying: false,\n        liking: false,\n        download: false,\n        sharing: false,\n        show_comments: false,\n        show_playcount: false\n      }\n    },\n    youtube: {\n      playerVars: {\n        playsinline: 1,\n        showinfo: 0,\n        rel: 0,\n        iv_load_policy: 3,\n        modestbranding: 1\n      },\n      embedOptions: {},\n      onUnstarted: noop\n    },\n    facebook: {\n      appId: '1309697205772819',\n      version: 'v3.3',\n      playerId: null,\n      attributes: {}\n    },\n    dailymotion: {\n      params: {\n        api: 1,\n        'endscreen-enable': false\n      }\n    },\n    vimeo: {\n      playerOptions: {\n        autopause: false,\n        byline: false,\n        portrait: false,\n        title: false\n      }\n    },\n    file: {\n      attributes: {},\n      tracks: [],\n      forceVideo: false,\n      forceAudio: false,\n      forceHLS: false,\n      forceDASH: false,\n      forceFLV: false,\n      hlsOptions: {},\n      hlsVersion: '0.14.16',\n      dashVersion: '3.1.3',\n      flvVersion: '1.5.0'\n    },\n    wistia: {\n      options: {},\n      playerId: null\n    },\n    mixcloud: {\n      options: {\n        hide_cover: 1\n      }\n    },\n    twitch: {\n      options: {},\n      playerId: null\n    },\n    vidyard: {\n      options: {}\n    }\n  },\n  onReady: noop,\n  onStart: noop,\n  onPlay: noop,\n  onPause: noop,\n  onBuffer: noop,\n  onBufferEnd: noop,\n  onEnded: noop,\n  onError: noop,\n  onDuration: noop,\n  onSeek: noop,\n  onProgress: noop,\n  onEnablePIP: noop,\n  onDisablePIP: noop\n}\n","import React, { Component } from 'react'\nimport isEqual from 'react-fast-compare'\n\nimport { propTypes, defaultProps } from './props'\n\nconst SEEK_ON_PLAY_EXPIRY = 5000\n\nexport default class Player extends Component {\n  static displayName = 'Player'\n  static propTypes = propTypes\n  static defaultProps = defaultProps\n\n  mounted = false\n  isReady = false\n  isPlaying = false // Track playing state internally to prevent bugs\n  isLoading = true // Use isLoading to prevent onPause when switching URL\n  loadOnReady = null\n  startOnPlay = true\n  seekOnPlay = null\n  onDurationCalled = false\n\n  componentDidMount () {\n    this.mounted = true\n  }\n\n  componentWillUnmount () {\n    clearTimeout(this.progressTimeout)\n    clearTimeout(this.durationCheckTimeout)\n    if (this.isReady && this.props.stopOnUnmount) {\n      this.player.stop()\n\n      if (this.player.disablePIP) {\n        this.player.disablePIP()\n      }\n    }\n    this.mounted = false\n  }\n\n  componentDidUpdate (prevProps) {\n    // If there isnt a player available, dont do anything\n    if (!this.player) {\n      return\n    }\n    // Invoke player methods based on changed props\n    const { url, playing, volume, muted, playbackRate, pip, loop, activePlayer } = this.props\n    if (!isEqual(prevProps.url, url)) {\n      if (this.isLoading && !activePlayer.forceLoad) {\n        console.warn(`ReactPlayer: the attempt to load ${url} is being deferred until the player has loaded`)\n        this.loadOnReady = url\n        return\n      }\n      this.isLoading = true\n      this.startOnPlay = true\n      this.onDurationCalled = false\n      this.player.load(url, this.isReady)\n    }\n    if (!prevProps.playing && playing && !this.isPlaying) {\n      this.player.play()\n    }\n    if (prevProps.playing && !playing && this.isPlaying) {\n      this.player.pause()\n    }\n    if (!prevProps.pip && pip && this.player.enablePIP) {\n      this.player.enablePIP()\n    }\n    if (prevProps.pip && !pip && this.player.disablePIP) {\n      this.player.disablePIP()\n    }\n    if (prevProps.volume !== volume && volume !== null) {\n      this.player.setVolume(volume)\n    }\n    if (prevProps.muted !== muted) {\n      if (muted) {\n        this.player.mute()\n      } else {\n        this.player.unmute()\n        if (volume !== null) {\n          // Set volume next tick to fix a bug with DailyMotion\n          setTimeout(() => this.player.setVolume(volume))\n        }\n      }\n    }\n    if (prevProps.playbackRate !== playbackRate && this.player.setPlaybackRate) {\n      this.player.setPlaybackRate(playbackRate)\n    }\n    if (prevProps.loop !== loop && this.player.setLoop) {\n      this.player.setLoop(loop)\n    }\n  }\n\n  handlePlayerMount = player => {\n    this.player = player\n    this.player.load(this.props.url)\n    this.progress()\n  }\n\n  getDuration () {\n    if (!this.isReady) return null\n    return this.player.getDuration()\n  }\n\n  getCurrentTime () {\n    if (!this.isReady) return null\n    return this.player.getCurrentTime()\n  }\n\n  getSecondsLoaded () {\n    if (!this.isReady) return null\n    return this.player.getSecondsLoaded()\n  }\n\n  getInternalPlayer = (key) => {\n    if (!this.player) return null\n    return this.player[key]\n  }\n\n  progress = () => {\n    if (this.props.url && this.player && this.isReady) {\n      const playedSeconds = this.getCurrentTime() || 0\n      const loadedSeconds = this.getSecondsLoaded()\n      const duration = this.getDuration()\n      if (duration) {\n        const progress = {\n          playedSeconds,\n          played: playedSeconds / duration\n        }\n        if (loadedSeconds !== null) {\n          progress.loadedSeconds = loadedSeconds\n          progress.loaded = loadedSeconds / duration\n        }\n        // Only call onProgress if values have changed\n        if (progress.playedSeconds !== this.prevPlayed || progress.loadedSeconds !== this.prevLoaded) {\n          this.props.onProgress(progress)\n        }\n        this.prevPlayed = progress.playedSeconds\n        this.prevLoaded = progress.loadedSeconds\n      }\n    }\n    this.progressTimeout = setTimeout(this.progress, this.props.progressFrequency || this.props.progressInterval)\n  }\n\n  seekTo (amount, type) {\n    // When seeking before player is ready, store value and seek later\n    if (!this.isReady && amount !== 0) {\n      this.seekOnPlay = amount\n      setTimeout(() => { this.seekOnPlay = null }, SEEK_ON_PLAY_EXPIRY)\n      return\n    }\n    const isFraction = !type ? (amount > 0 && amount < 1) : type === 'fraction'\n    if (isFraction) {\n      // Convert fraction to seconds based on duration\n      const duration = this.player.getDuration()\n      if (!duration) {\n        console.warn('ReactPlayer: could not seek using fraction duration not yet available')\n        return\n      }\n      this.player.seekTo(duration * amount)\n      return\n    }\n    this.player.seekTo(amount)\n  }\n\n  handleReady = () => {\n    if (!this.mounted) return\n    this.isReady = true\n    this.isLoading = false\n    const { onReady, playing, volume, muted } = this.props\n    onReady()\n    if (!muted && volume !== null) {\n      this.player.setVolume(volume)\n    }\n    if (this.loadOnReady) {\n      this.player.load(this.loadOnReady, true)\n      this.loadOnReady = null\n    } else if (playing) {\n      this.player.play()\n    }\n    this.handleDurationCheck()\n  }\n\n  handlePlay = () => {\n    this.isPlaying = true\n    this.isLoading = false\n    const { onStart, onPlay, playbackRate } = this.props\n    if (this.startOnPlay) {\n      if (this.player.setPlaybackRate && playbackRate !== 1) {\n        this.player.setPlaybackRate(playbackRate)\n      }\n      onStart()\n      this.startOnPlay = false\n    }\n    onPlay()\n    if (this.seekOnPlay) {\n      this.seekTo(this.seekOnPlay)\n      this.seekOnPlay = null\n    }\n    this.handleDurationCheck()\n  }\n\n  handlePause = (e) => {\n    this.isPlaying = false\n    if (!this.isLoading) {\n      this.props.onPause(e)\n    }\n  }\n\n  handleEnded = () => {\n    const { activePlayer, loop, onEnded } = this.props\n    if (activePlayer.loopOnEnded && loop) {\n      this.seekTo(0)\n    }\n    if (!loop) {\n      this.isPlaying = false\n      onEnded()\n    }\n  }\n\n  handleError = (...args) => {\n    this.isLoading = false\n    this.props.onError(...args)\n  }\n\n  handleDurationCheck = () => {\n    clearTimeout(this.durationCheckTimeout)\n    const duration = this.getDuration()\n    if (duration) {\n      if (!this.onDurationCalled) {\n        this.props.onDuration(duration)\n        this.onDurationCalled = true\n      }\n    } else {\n      this.durationCheckTimeout = setTimeout(this.handleDurationCheck, 100)\n    }\n  }\n\n  handleLoaded = () => {\n    // Sometimes we know loading has stopped but onReady/onPlay are never called\n    // so this provides a way for players to avoid getting stuck\n    this.isLoading = false\n  }\n\n  render () {\n    const Player = this.props.activePlayer\n    if (!Player) {\n      return null\n    }\n    return (\n      <Player\n        {...this.props}\n        onMount={this.handlePlayerMount}\n        onReady={this.handleReady}\n        onPlay={this.handlePlay}\n        onPause={this.handlePause}\n        onEnded={this.handleEnded}\n        onLoaded={this.handleLoaded}\n        onError={this.handleError}\n      />\n    )\n  }\n}\n","import React, { Component, Suspense, lazy } from 'react'\nimport merge from 'deepmerge'\nimport memoize from 'memoize-one'\nimport isEqual from 'react-fast-compare'\n\nimport { propTypes, defaultProps } from './props'\nimport { omit } from './utils'\nimport Player from './Player'\n\nconst Preview = lazy(() => import(/* webpackChunkName: 'reactPlayerPreview' */'./Preview'))\n\nconst IS_BROWSER = typeof window !== 'undefined' && window.document\nconst SUPPORTED_PROPS = Object.keys(propTypes)\n\n// Return null when rendering on the server\n// as Suspense is not supported yet\nconst UniversalSuspense = IS_BROWSER ? Suspense : () => null\n\nconst customPlayers = []\n\nexport const createReactPlayer = (players, fallback) => {\n  return class ReactPlayer extends Component {\n    static displayName = 'ReactPlayer'\n    static propTypes = propTypes\n    static defaultProps = defaultProps\n    static addCustomPlayer = player => { customPlayers.push(player) }\n    static removeCustomPlayers = () => { customPlayers.length = 0 }\n\n    static canPlay = url => {\n      for (const Player of [...customPlayers, ...players]) {\n        if (Player.canPlay(url)) {\n          return true\n        }\n      }\n      return false\n    }\n\n    static canEnablePIP = url => {\n      for (const Player of [...customPlayers, ...players]) {\n        if (Player.canEnablePIP && Player.canEnablePIP(url)) {\n          return true\n        }\n      }\n      return false\n    }\n\n    state = {\n      showPreview: !!this.props.light\n    }\n\n    // Use references, as refs is used by React\n    references = {\n      wrapper: wrapper => { this.wrapper = wrapper },\n      player: player => { this.player = player }\n    }\n\n    shouldComponentUpdate (nextProps, nextState) {\n      return !isEqual(this.props, nextProps) || !isEqual(this.state, nextState)\n    }\n\n    componentDidUpdate (prevProps) {\n      const { light } = this.props\n      if (!prevProps.light && light) {\n        this.setState({ showPreview: true })\n      }\n      if (prevProps.light && !light) {\n        this.setState({ showPreview: false })\n      }\n    }\n\n    handleClickPreview = () => {\n      this.setState({ showPreview: false })\n    }\n\n    showPreview = () => {\n      this.setState({ showPreview: true })\n    }\n\n    getDuration = () => {\n      if (!this.player) return null\n      return this.player.getDuration()\n    }\n\n    getCurrentTime = () => {\n      if (!this.player) return null\n      return this.player.getCurrentTime()\n    }\n\n    getSecondsLoaded = () => {\n      if (!this.player) return null\n      return this.player.getSecondsLoaded()\n    }\n\n    getInternalPlayer = (key = 'player') => {\n      if (!this.player) return null\n      return this.player.getInternalPlayer(key)\n    }\n\n    seekTo = (fraction, type) => {\n      if (!this.player) return null\n      this.player.seekTo(fraction, type)\n    }\n\n    handleReady = () => {\n      this.props.onReady(this)\n    }\n\n    getActivePlayer = memoize(url => {\n      for (const player of [...customPlayers, ...players]) {\n        if (player.canPlay(url)) {\n          return player\n        }\n      }\n      if (fallback) {\n        return fallback\n      }\n      return null\n    })\n\n    getConfig = memoize((url, key) => {\n      const { config } = this.props\n      return merge.all([\n        defaultProps.config,\n        defaultProps.config[key] || {},\n        config,\n        config[key] || {}\n      ])\n    })\n\n    getAttributes = memoize(url => {\n      return omit(this.props, SUPPORTED_PROPS)\n    })\n\n    renderPreview (url) {\n      if (!url) return null\n      const { light, playIcon } = this.props\n      return (\n        <Preview\n          url={url}\n          light={light}\n          playIcon={playIcon}\n          onClick={this.handleClickPreview}\n        />\n      )\n    }\n\n    renderActivePlayer = url => {\n      if (!url) return null\n      const player = this.getActivePlayer(url)\n      if (!player) return null\n      const config = this.getConfig(url, player.key)\n      return (\n        <Player\n          {...this.props}\n          key={player.key}\n          ref={this.references.player}\n          config={config}\n          activePlayer={player.lazyPlayer || player}\n          onReady={this.handleReady}\n        />\n      )\n    }\n\n    render () {\n      const { url, style, width, height, wrapper: Wrapper } = this.props\n      const { showPreview } = this.state\n      const attributes = this.getAttributes(url)\n      return (\n        <Wrapper ref={this.references.wrapper} style={{ ...style, width, height }} {...attributes}>\n          <UniversalSuspense fallback={null}>\n            {showPreview\n              ? this.renderPreview(url)\n              : this.renderActivePlayer(url)}\n          </UniversalSuspense>\n        </Wrapper>\n      )\n    }\n  }\n}\n","import players from './players'\nimport { createReactPlayer } from './ReactPlayer'\n\n// Fall back to FilePlayer if nothing else can play the URL\nconst fallback = players[players.length - 1]\n\nexport default createReactPlayer(players, fallback)\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, parseStartTime, parseEndTime } from '../utils'\nimport { canPlay, MATCH_URL_YOUTUBE } from '../patterns'\n\nconst SDK_URL = 'https://www.youtube.com/iframe_api'\nconst SDK_GLOBAL = 'YT'\nconst SDK_GLOBAL_READY = 'onYouTubeIframeAPIReady'\nconst MATCH_PLAYLIST = /(?:list|channel)=([a-zA-Z0-9_-]+)/\nconst MATCH_USER_UPLOADS = /user\\/([a-zA-Z0-9_-]+)\\/?/\nconst MATCH_NOCOOKIE = /youtube-nocookie\\.com/\nconst NOCOOKIE_HOST = 'https://www.youtube-nocookie.com'\n\nexport default class YouTube extends Component {\n  static displayName = 'YouTube'\n  static canPlay = canPlay.youtube\n  callPlayer = callPlayer\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  getID (url) {\n    if (!url || url instanceof Array || MATCH_PLAYLIST.test(url)) {\n      return null\n    }\n    return url.match(MATCH_URL_YOUTUBE)[1]\n  }\n\n  load (url, isReady) {\n    const { playing, muted, playsinline, controls, loop, config, onError } = this.props\n    const { playerVars, embedOptions } = config\n    const id = this.getID(url)\n    if (isReady) {\n      if (MATCH_PLAYLIST.test(url) || MATCH_USER_UPLOADS.test(url) || url instanceof Array) {\n        this.player.loadPlaylist(this.parsePlaylist(url))\n        return\n      }\n      this.player.cueVideoById({\n        videoId: id,\n        startSeconds: parseStartTime(url) || playerVars.start,\n        endSeconds: parseEndTime(url) || playerVars.end\n      })\n      return\n    }\n    getSDK(SDK_URL, SDK_GLOBAL, SDK_GLOBAL_READY, YT => YT.loaded).then(YT => {\n      if (!this.container) return\n      this.player = new YT.Player(this.container, {\n        width: '100%',\n        height: '100%',\n        videoId: id,\n        playerVars: {\n          autoplay: playing ? 1 : 0,\n          mute: muted ? 1 : 0,\n          controls: controls ? 1 : 0,\n          start: parseStartTime(url),\n          end: parseEndTime(url),\n          origin: window.location.origin,\n          playsinline: playsinline ? 1 : 0,\n          ...this.parsePlaylist(url),\n          ...playerVars\n        },\n        events: {\n          onReady: () => {\n            if (loop) {\n              this.player.setLoop(true) // Enable playlist looping\n            }\n            this.props.onReady()\n          },\n          onStateChange: this.onStateChange,\n          onError: event => onError(event.data)\n        },\n        host: MATCH_NOCOOKIE.test(url) ? NOCOOKIE_HOST : undefined,\n        ...embedOptions\n      })\n    }, onError)\n    if (embedOptions.events) {\n      console.warn('Using `embedOptions.events` will likely break things. Use ReactPlayers callback props instead, eg onReady, onPlay, onPause')\n    }\n  }\n\n  parsePlaylist = (url) => {\n    if (url instanceof Array) {\n      return {\n        listType: 'playlist',\n        playlist: url.map(this.getID).join(',')\n      }\n    }\n    if (MATCH_PLAYLIST.test(url)) {\n      const [, playlistId] = url.match(MATCH_PLAYLIST)\n      return {\n        listType: 'playlist',\n        list: playlistId.replace(/^UC/, 'UU')\n      }\n    }\n    if (MATCH_USER_UPLOADS.test(url)) {\n      const [, username] = url.match(MATCH_USER_UPLOADS)\n      return {\n        listType: 'user_uploads',\n        list: username\n      }\n    }\n    return {}\n  }\n\n  onStateChange = (event) => {\n    const { data } = event\n    const { onPlay, onPause, onBuffer, onBufferEnd, onEnded, onReady, loop, config: { playerVars, onUnstarted } } = this.props\n    const { UNSTARTED, PLAYING, PAUSED, BUFFERING, ENDED, CUED } = window[SDK_GLOBAL].PlayerState\n    if (data === UNSTARTED) onUnstarted()\n    if (data === PLAYING) {\n      onPlay()\n      onBufferEnd()\n    }\n    if (data === PAUSED) onPause()\n    if (data === BUFFERING) onBuffer()\n    if (data === ENDED) {\n      const isPlaylist = !!this.callPlayer('getPlaylist')\n      // Only loop manually if not playing a playlist\n      if (loop && !isPlaylist) {\n        if (playerVars.start) {\n          this.seekTo(playerVars.start)\n        } else {\n          this.play()\n        }\n      }\n      onEnded()\n    }\n    if (data === CUED) onReady()\n  }\n\n  play () {\n    this.callPlayer('playVideo')\n  }\n\n  pause () {\n    this.callPlayer('pauseVideo')\n  }\n\n  stop () {\n    if (!document.body.contains(this.callPlayer('getIframe'))) return\n    this.callPlayer('stopVideo')\n  }\n\n  seekTo (amount) {\n    this.callPlayer('seekTo', amount)\n    if (!this.props.playing) {\n      this.pause()\n    }\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction * 100)\n  }\n\n  mute = () => {\n    this.callPlayer('mute')\n  }\n\n  unmute = () => {\n    this.callPlayer('unMute')\n  }\n\n  setPlaybackRate (rate) {\n    this.callPlayer('setPlaybackRate', rate)\n  }\n\n  setLoop (loop) {\n    this.callPlayer('setLoop', loop)\n  }\n\n  getDuration () {\n    return this.callPlayer('getDuration')\n  }\n\n  getCurrentTime () {\n    return this.callPlayer('getCurrentTime')\n  }\n\n  getSecondsLoaded () {\n    return this.callPlayer('getVideoLoadedFraction') * this.getDuration()\n  }\n\n  ref = container => {\n    this.container = container\n  }\n\n  render () {\n    const { display } = this.props\n    const style = {\n      width: '100%',\n      height: '100%',\n      display\n    }\n    return (\n      <div style={style}>\n        <div ref={this.ref} />\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK } from '../utils'\nimport { canPlay } from '../patterns'\n\nconst SDK_URL = 'https://w.soundcloud.com/player/api.js'\nconst SDK_GLOBAL = 'SC'\n\nexport default class SoundCloud extends Component {\n  static displayName = 'SoundCloud'\n  static canPlay = canPlay.soundcloud\n  static loopOnEnded = true\n  callPlayer = callPlayer\n  duration = null\n  currentTime = null\n  fractionLoaded = null\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url, isReady) {\n    getSDK(SDK_URL, SDK_GLOBAL).then(SC => {\n      if (!this.iframe) return\n      const { PLAY, PLAY_PROGRESS, PAUSE, FINISH, ERROR } = SC.Widget.Events\n      if (!isReady) {\n        this.player = SC.Widget(this.iframe)\n        this.player.bind(PLAY, this.props.onPlay)\n        this.player.bind(PAUSE, () => {\n          const remaining = this.duration - this.currentTime\n          if (remaining < 0.05) {\n            // Prevent onPause firing right before onEnded\n            return\n          }\n          this.props.onPause()\n        })\n        this.player.bind(PLAY_PROGRESS, e => {\n          this.currentTime = e.currentPosition / 1000\n          this.fractionLoaded = e.loadedProgress\n        })\n        this.player.bind(FINISH, () => this.props.onEnded())\n        this.player.bind(ERROR, e => this.props.onError(e))\n      }\n      this.player.load(url, {\n        ...this.props.config.options,\n        callback: () => {\n          this.player.getDuration(duration => {\n            this.duration = duration / 1000\n            this.props.onReady()\n          })\n        }\n      })\n    })\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    // Nothing to do\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('seekTo', seconds * 1000)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction * 100)\n  }\n\n  mute = () => {\n    this.setVolume(0)\n  }\n\n  unmute = () => {\n    if (this.props.volume !== null) {\n      this.setVolume(this.props.volume)\n    }\n  }\n\n  getDuration () {\n    return this.duration\n  }\n\n  getCurrentTime () {\n    return this.currentTime\n  }\n\n  getSecondsLoaded () {\n    return this.fractionLoaded * this.duration\n  }\n\n  ref = iframe => {\n    this.iframe = iframe\n  }\n\n  render () {\n    const { display } = this.props\n    const style = {\n      width: '100%',\n      height: '100%',\n      display\n    }\n    return (\n      <iframe\n        ref={this.ref}\n        src={`https://w.soundcloud.com/player/?url=${encodeURIComponent(this.props.url)}`}\n        style={style}\n        frameBorder={0}\n        allow='autoplay'\n      />\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK } from '../utils'\nimport { canPlay } from '../patterns'\n\nconst SDK_URL = 'https://player.vimeo.com/api/player.js'\nconst SDK_GLOBAL = 'Vimeo'\n\nexport default class Vimeo extends Component {\n  static displayName = 'Vimeo'\n  static canPlay = canPlay.vimeo\n  static forceLoad = true // Prevent checking isLoading when URL changes\n  callPlayer = callPlayer\n  duration = null\n  currentTime = null\n  secondsLoaded = null\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url) {\n    this.duration = null\n    getSDK(SDK_URL, SDK_GLOBAL).then(Vimeo => {\n      if (!this.container) return\n      this.player = new Vimeo.Player(this.container, {\n        url,\n        autoplay: this.props.playing,\n        muted: this.props.muted,\n        loop: this.props.loop,\n        playsinline: this.props.playsinline,\n        controls: this.props.controls,\n        ...this.props.config.playerOptions\n      })\n      this.player.ready().then(() => {\n        const iframe = this.container.querySelector('iframe')\n        iframe.style.width = '100%'\n        iframe.style.height = '100%'\n      }).catch(this.props.onError)\n      this.player.on('loaded', () => {\n        this.props.onReady()\n        this.refreshDuration()\n      })\n      this.player.on('play', () => {\n        this.props.onPlay()\n        this.refreshDuration()\n      })\n      this.player.on('pause', this.props.onPause)\n      this.player.on('seeked', e => this.props.onSeek(e.seconds))\n      this.player.on('ended', this.props.onEnded)\n      this.player.on('error', this.props.onError)\n      this.player.on('timeupdate', ({ seconds }) => {\n        this.currentTime = seconds\n      })\n      this.player.on('progress', ({ seconds }) => {\n        this.secondsLoaded = seconds\n      })\n      this.player.on('bufferstart', this.props.onBuffer)\n      this.player.on('bufferend', this.props.onBufferEnd)\n    }, this.props.onError)\n  }\n\n  refreshDuration () {\n    this.player.getDuration().then(duration => {\n      this.duration = duration\n    })\n  }\n\n  play () {\n    const promise = this.callPlayer('play')\n    if (promise) {\n      promise.catch(this.props.onError)\n    }\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    this.callPlayer('unload')\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('setCurrentTime', seconds)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction)\n  }\n\n  setLoop (loop) {\n    this.callPlayer('setLoop', loop)\n  }\n\n  setPlaybackRate (rate) {\n    this.callPlayer('setPlaybackRate', rate)\n  }\n\n  mute = () => {\n    this.setVolume(0)\n  }\n\n  unmute = () => {\n    if (this.props.volume !== null) {\n      this.setVolume(this.props.volume)\n    }\n  }\n\n  getDuration () {\n    return this.duration\n  }\n\n  getCurrentTime () {\n    return this.currentTime\n  }\n\n  getSecondsLoaded () {\n    return this.secondsLoaded\n  }\n\n  ref = container => {\n    this.container = container\n  }\n\n  render () {\n    const { display } = this.props\n    const style = {\n      width: '100%',\n      height: '100%',\n      overflow: 'hidden',\n      display\n    }\n    return (\n      <div\n        key={this.props.url}\n        ref={this.ref}\n        style={style}\n      />\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, randomString } from '../utils'\nimport { canPlay } from '../patterns'\n\nconst SDK_URL = 'https://connect.facebook.net/en_US/sdk.js'\nconst SDK_GLOBAL = 'FB'\nconst SDK_GLOBAL_READY = 'fbAsyncInit'\nconst PLAYER_ID_PREFIX = 'facebook-player-'\n\nexport default class Facebook extends Component {\n  static displayName = 'Facebook'\n  static canPlay = canPlay.facebook\n  static loopOnEnded = true\n  callPlayer = callPlayer\n  playerID = this.props.config.playerId || `${PLAYER_ID_PREFIX}${randomString()}`\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url, isReady) {\n    if (isReady) {\n      getSDK(SDK_URL, SDK_GLOBAL, SDK_GLOBAL_READY).then(FB => FB.XFBML.parse())\n      return\n    }\n    getSDK(SDK_URL, SDK_GLOBAL, SDK_GLOBAL_READY).then(FB => {\n      FB.init({\n        appId: this.props.config.appId,\n        xfbml: true,\n        version: this.props.config.version\n      })\n      FB.Event.subscribe('xfbml.render', msg => {\n        // Here we know the SDK has loaded, even if onReady/onPlay\n        // is not called due to a video that cannot be embedded\n        this.props.onLoaded()\n      })\n      FB.Event.subscribe('xfbml.ready', msg => {\n        if (msg.type === 'video' && msg.id === this.playerID) {\n          this.player = msg.instance\n          this.player.subscribe('startedPlaying', this.props.onPlay)\n          this.player.subscribe('paused', this.props.onPause)\n          this.player.subscribe('finishedPlaying', this.props.onEnded)\n          this.player.subscribe('startedBuffering', this.props.onBuffer)\n          this.player.subscribe('finishedBuffering', this.props.onBufferEnd)\n          this.player.subscribe('error', this.props.onError)\n          if (!this.props.muted) {\n            // Player is muted by default\n            this.callPlayer('unmute')\n          }\n          this.props.onReady()\n\n          // For some reason Facebook have added `visibility: hidden`\n          // to the iframe when autoplay fails, so here we set it back\n          document.getElementById(this.playerID).querySelector('iframe').style.visibility = 'visible'\n        }\n      })\n    })\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    // Nothing to do\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('seek', seconds)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction)\n  }\n\n  mute = () => {\n    this.callPlayer('mute')\n  }\n\n  unmute = () => {\n    this.callPlayer('unmute')\n  }\n\n  getDuration () {\n    return this.callPlayer('getDuration')\n  }\n\n  getCurrentTime () {\n    return this.callPlayer('getCurrentPosition')\n  }\n\n  getSecondsLoaded () {\n    return null\n  }\n\n  render () {\n    const { attributes } = this.props.config\n    const style = {\n      width: '100%',\n      height: '100%'\n    }\n    return (\n      <div\n        style={style}\n        id={this.playerID}\n        className='fb-video'\n        data-href={this.props.url}\n        data-autoplay={this.props.playing ? 'true' : 'false'}\n        data-allowfullscreen='true'\n        data-controls={this.props.controls ? 'true' : 'false'}\n        {...attributes}\n      />\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK } from '../utils'\nimport { canPlay, MATCH_URL_STREAMABLE } from '../patterns'\n\nconst SDK_URL = 'https://cdn.embed.ly/player-0.1.0.min.js'\nconst SDK_GLOBAL = 'playerjs'\n\nexport default class Streamable extends Component {\n  static displayName = 'Streamable'\n  static canPlay = canPlay.streamable\n  callPlayer = callPlayer\n  duration = null\n  currentTime = null\n  secondsLoaded = null\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url) {\n    getSDK(SDK_URL, SDK_GLOBAL).then(playerjs => {\n      if (!this.iframe) return\n      this.player = new playerjs.Player(this.iframe)\n      this.player.setLoop(this.props.loop)\n      this.player.on('ready', this.props.onReady)\n      this.player.on('play', this.props.onPlay)\n      this.player.on('pause', this.props.onPause)\n      this.player.on('seeked', this.props.onSeek)\n      this.player.on('ended', this.props.onEnded)\n      this.player.on('error', this.props.onError)\n      this.player.on('timeupdate', ({ duration, seconds }) => {\n        this.duration = duration\n        this.currentTime = seconds\n      })\n      this.player.on('buffered', ({ percent }) => {\n        if (this.duration) {\n          this.secondsLoaded = this.duration * percent\n        }\n      })\n      if (this.props.muted) {\n        this.player.mute()\n      }\n    }, this.props.onError)\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    // Nothing to do\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('setCurrentTime', seconds)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction * 100)\n  }\n\n  setLoop (loop) {\n    this.callPlayer('setLoop', loop)\n  }\n\n  mute = () => {\n    this.callPlayer('mute')\n  }\n\n  unmute = () => {\n    this.callPlayer('unmute')\n  }\n\n  getDuration () {\n    return this.duration\n  }\n\n  getCurrentTime () {\n    return this.currentTime\n  }\n\n  getSecondsLoaded () {\n    return this.secondsLoaded\n  }\n\n  ref = iframe => {\n    this.iframe = iframe\n  }\n\n  render () {\n    const id = this.props.url.match(MATCH_URL_STREAMABLE)[1]\n    const style = {\n      width: '100%',\n      height: '100%'\n    }\n    return (\n      <iframe\n        ref={this.ref}\n        src={`https://streamable.com/o/${id}`}\n        frameBorder='0'\n        scrolling='no'\n        style={style}\n        allowFullScreen\n      />\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, randomString } from '../utils'\nimport { canPlay, MATCH_URL_WISTIA } from '../patterns'\n\nconst SDK_URL = 'https://fast.wistia.com/assets/external/E-v1.js'\nconst SDK_GLOBAL = 'Wistia'\nconst PLAYER_ID_PREFIX = 'wistia-player-'\n\nexport default class Wistia extends Component {\n  static displayName = 'Wistia'\n  static canPlay = canPlay.wistia\n  static loopOnEnded = true\n  callPlayer = callPlayer\n  playerID = this.props.config.playerId || `${PLAYER_ID_PREFIX}${randomString()}`\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url) {\n    const { playing, muted, controls, onReady, config, onError } = this.props\n    getSDK(SDK_URL, SDK_GLOBAL).then(() => {\n      window._wq = window._wq || []\n      window._wq.push({\n        id: this.playerID,\n        options: {\n          autoPlay: playing,\n          silentAutoPlay: 'allow',\n          muted: muted,\n          controlsVisibleOnLoad: controls,\n          fullscreenButton: controls,\n          playbar: controls,\n          playbackRateControl: controls,\n          qualityControl: controls,\n          volumeControl: controls,\n          settingsControl: controls,\n          smallPlayButton: controls,\n          ...config.options\n        },\n        onReady: player => {\n          this.player = player\n          this.unbind()\n          this.player.bind('play', this.onPlay)\n          this.player.bind('pause', this.onPause)\n          this.player.bind('seek', this.onSeek)\n          this.player.bind('end', this.onEnded)\n          onReady()\n        }\n      })\n    }, onError)\n  }\n\n  unbind () {\n    this.player.unbind('play', this.onPlay)\n    this.player.unbind('pause', this.onPause)\n    this.player.unbind('seek', this.onSeek)\n    this.player.unbind('end', this.onEnded)\n  }\n\n  // Proxy methods to prevent listener leaks\n  onPlay = (...args) => this.props.onPlay(...args)\n  onPause = (...args) => this.props.onPause(...args)\n  onSeek = (...args) => this.props.onSeek(...args)\n  onEnded = (...args) => this.props.onEnded(...args)\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    this.unbind()\n    this.callPlayer('remove')\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('time', seconds)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('volume', fraction)\n  }\n\n  mute = () => {\n    this.callPlayer('mute')\n  }\n\n  unmute = () => {\n    this.callPlayer('unmute')\n  }\n\n  setPlaybackRate (rate) {\n    this.callPlayer('playbackRate', rate)\n  }\n\n  getDuration () {\n    return this.callPlayer('duration')\n  }\n\n  getCurrentTime () {\n    return this.callPlayer('time')\n  }\n\n  getSecondsLoaded () {\n    return null\n  }\n\n  render () {\n    const { url } = this.props\n    const videoID = url && url.match(MATCH_URL_WISTIA)[1]\n    const className = `wistia_embed wistia_async_${videoID}`\n    const style = {\n      width: '100%',\n      height: '100%'\n    }\n    return (\n      <div id={this.playerID} key={videoID} className={className} style={style} />\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, parseStartTime, randomString } from '../utils'\nimport { canPlay, MATCH_URL_TWITCH_CHANNEL, MATCH_URL_TWITCH_VIDEO } from '../patterns'\n\nconst SDK_URL = 'https://player.twitch.tv/js/embed/v1.js'\nconst SDK_GLOBAL = 'Twitch'\nconst PLAYER_ID_PREFIX = 'twitch-player-'\n\nexport default class Twitch extends Component {\n  static displayName = 'Twitch'\n  static canPlay = canPlay.twitch\n  static loopOnEnded = true\n  callPlayer = callPlayer\n  playerID = this.props.config.playerId || `${PLAYER_ID_PREFIX}${randomString()}`\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url, isReady) {\n    const { playsinline, onError, config, controls } = this.props\n    const isChannel = MATCH_URL_TWITCH_CHANNEL.test(url)\n    const id = isChannel ? url.match(MATCH_URL_TWITCH_CHANNEL)[1] : url.match(MATCH_URL_TWITCH_VIDEO)[1]\n    if (isReady) {\n      if (isChannel) {\n        this.player.setChannel(id)\n      } else {\n        this.player.setVideo('v' + id)\n      }\n      return\n    }\n    getSDK(SDK_URL, SDK_GLOBAL).then(Twitch => {\n      this.player = new Twitch.Player(this.playerID, {\n        video: isChannel ? '' : id,\n        channel: isChannel ? id : '',\n        height: '100%',\n        width: '100%',\n        playsinline: playsinline,\n        autoplay: this.props.playing,\n        muted: this.props.muted,\n        // https://github.com/CookPete/react-player/issues/733#issuecomment-549085859\n        controls: isChannel ? true : controls,\n        time: parseStartTime(url),\n        ...config.options\n      })\n      const { READY, PLAYING, PAUSE, ENDED, ONLINE, OFFLINE } = Twitch.Player\n      this.player.addEventListener(READY, this.props.onReady)\n      this.player.addEventListener(PLAYING, this.props.onPlay)\n      this.player.addEventListener(PAUSE, this.props.onPause)\n      this.player.addEventListener(ENDED, this.props.onEnded)\n\n      // Prevent weird isLoading behaviour when streams are offline\n      this.player.addEventListener(ONLINE, this.props.onLoaded)\n      this.player.addEventListener(OFFLINE, this.props.onLoaded)\n    }, onError)\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    this.callPlayer('pause')\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('seek', seconds)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction)\n  }\n\n  mute = () => {\n    this.callPlayer('setMuted', true)\n  }\n\n  unmute = () => {\n    this.callPlayer('setMuted', false)\n  }\n\n  getDuration () {\n    return this.callPlayer('getDuration')\n  }\n\n  getCurrentTime () {\n    return this.callPlayer('getCurrentTime')\n  }\n\n  getSecondsLoaded () {\n    return null\n  }\n\n  render () {\n    const style = {\n      width: '100%',\n      height: '100%'\n    }\n    return (\n      <div style={style} id={this.playerID} />\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, parseStartTime } from '../utils'\nimport { canPlay, MATCH_URL_DAILYMOTION } from '../patterns'\n\nconst SDK_URL = 'https://api.dmcdn.net/all.js'\nconst SDK_GLOBAL = 'DM'\nconst SDK_GLOBAL_READY = 'dmAsyncInit'\n\nexport default class DailyMotion extends Component {\n  static displayName = 'DailyMotion'\n  static canPlay = canPlay.dailymotion\n  static loopOnEnded = true\n  callPlayer = callPlayer\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url) {\n    const { controls, config, onError, playing } = this.props\n    const [, id] = url.match(MATCH_URL_DAILYMOTION)\n    if (this.player) {\n      this.player.load(id, {\n        start: parseStartTime(url),\n        autoplay: playing\n      })\n      return\n    }\n    getSDK(SDK_URL, SDK_GLOBAL, SDK_GLOBAL_READY, DM => DM.player).then(DM => {\n      if (!this.container) return\n      const Player = DM.player\n      this.player = new Player(this.container, {\n        width: '100%',\n        height: '100%',\n        video: id,\n        params: {\n          controls: controls,\n          autoplay: this.props.playing,\n          mute: this.props.muted,\n          start: parseStartTime(url),\n          origin: window.location.origin,\n          ...config.params\n        },\n        events: {\n          apiready: this.props.onReady,\n          seeked: () => this.props.onSeek(this.player.currentTime),\n          video_end: this.props.onEnded,\n          durationchange: this.onDurationChange,\n          pause: this.props.onPause,\n          playing: this.props.onPlay,\n          waiting: this.props.onBuffer,\n          error: event => onError(event)\n        }\n      })\n    }, onError)\n  }\n\n  onDurationChange = () => {\n    const duration = this.getDuration()\n    this.props.onDuration(duration)\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    // Nothing to do\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('seek', seconds)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction)\n  }\n\n  mute = () => {\n    this.callPlayer('setMuted', true)\n  }\n\n  unmute = () => {\n    this.callPlayer('setMuted', false)\n  }\n\n  getDuration () {\n    return this.player.duration || null\n  }\n\n  getCurrentTime () {\n    return this.player.currentTime\n  }\n\n  getSecondsLoaded () {\n    return this.player.bufferedTime\n  }\n\n  ref = container => {\n    this.container = container\n  }\n\n  render () {\n    const { display } = this.props\n    const style = {\n      width: '100%',\n      height: '100%',\n      display\n    }\n    return (\n      <div style={style}>\n        <div ref={this.ref} />\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK, queryString } from '../utils'\nimport { canPlay, MATCH_URL_MIXCLOUD } from '../patterns'\n\nconst SDK_URL = 'https://widget.mixcloud.com/media/js/widgetApi.js'\nconst SDK_GLOBAL = 'Mixcloud'\n\nexport default class Mixcloud extends Component {\n  static displayName = 'Mixcloud'\n  static canPlay = canPlay.mixcloud\n  static loopOnEnded = true\n  callPlayer = callPlayer\n  duration = null\n  currentTime = null\n  secondsLoaded = null\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url) {\n    getSDK(SDK_URL, SDK_GLOBAL).then(Mixcloud => {\n      this.player = Mixcloud.PlayerWidget(this.iframe)\n      this.player.ready.then(() => {\n        this.player.events.play.on(this.props.onPlay)\n        this.player.events.pause.on(this.props.onPause)\n        this.player.events.ended.on(this.props.onEnded)\n        this.player.events.error.on(this.props.error)\n        this.player.events.progress.on((seconds, duration) => {\n          this.currentTime = seconds\n          this.duration = duration\n        })\n        this.props.onReady()\n      })\n    }, this.props.onError)\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    // Nothing to do\n  }\n\n  seekTo (seconds) {\n    this.callPlayer('seek', seconds)\n  }\n\n  setVolume (fraction) {\n    // No volume support\n  }\n\n  mute = () => {\n    // No volume support\n  }\n\n  unmute = () => {\n    // No volume support\n  }\n\n  getDuration () {\n    return this.duration\n  }\n\n  getCurrentTime () {\n    return this.currentTime\n  }\n\n  getSecondsLoaded () {\n    return null\n  }\n\n  ref = iframe => {\n    this.iframe = iframe\n  }\n\n  render () {\n    const { url, config } = this.props\n    const id = url.match(MATCH_URL_MIXCLOUD)[1]\n    const style = {\n      width: '100%',\n      height: '100%'\n    }\n    const query = queryString({\n      ...config.options,\n      feed: `/${id}/`\n    })\n    // We have to give the iframe a key here to prevent a\n    // weird dialog appearing when loading a new track\n    return (\n      <iframe\n        key={id}\n        ref={this.ref}\n        style={style}\n        src={`https://www.mixcloud.com/widget/iframe/?${query}`}\n        frameBorder='0'\n      />\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { callPlayer, getSDK } from '../utils'\nimport { canPlay, MATCH_URL_VIDYARD } from '../patterns'\n\nconst SDK_URL = 'https://play.vidyard.com/embed/v4.js'\nconst SDK_GLOBAL = 'VidyardV4'\nconst SDK_GLOBAL_READY = 'onVidyardAPI'\n\nexport default class Vidyard extends Component {\n  static displayName = 'Vidyard'\n  static canPlay = canPlay.vidyard\n  callPlayer = callPlayer\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n  }\n\n  load (url) {\n    const { playing, config, onError, onDuration } = this.props\n    const id = url && url.match(MATCH_URL_VIDYARD)[1]\n    if (this.player) {\n      this.stop()\n    }\n    getSDK(SDK_URL, SDK_GLOBAL, SDK_GLOBAL_READY).then(Vidyard => {\n      if (!this.container) return\n      Vidyard.api.addReadyListener((data, player) => {\n        this.player = player\n        this.player.on('ready', this.props.onReady)\n        this.player.on('play', this.props.onPlay)\n        this.player.on('pause', this.props.onPause)\n        this.player.on('seek', this.props.onSeek)\n        this.player.on('playerComplete', this.props.onEnded)\n      }, id)\n      Vidyard.api.renderPlayer({\n        uuid: id,\n        container: this.container,\n        autoplay: playing ? 1 : 0,\n        ...config.options\n      })\n      Vidyard.api.getPlayerMetadata(id).then(meta => {\n        this.duration = meta.length_in_seconds\n        onDuration(meta.length_in_seconds)\n      })\n    }, onError)\n  }\n\n  play () {\n    this.callPlayer('play')\n  }\n\n  pause () {\n    this.callPlayer('pause')\n  }\n\n  stop () {\n    window.VidyardV4.api.destroyPlayer(this.player)\n  }\n\n  seekTo (amount) {\n    this.callPlayer('seek', amount)\n  }\n\n  setVolume (fraction) {\n    this.callPlayer('setVolume', fraction)\n  }\n\n  mute = () => {\n    this.setVolume(0)\n  }\n\n  unmute = () => {\n    if (this.props.volume !== null) {\n      this.setVolume(this.props.volume)\n    }\n  }\n\n  setPlaybackRate (rate) {\n    this.callPlayer('setPlaybackSpeed', rate)\n  }\n\n  getDuration () {\n    return this.duration\n  }\n\n  getCurrentTime () {\n    return this.callPlayer('currentTime')\n  }\n\n  getSecondsLoaded () {\n    return null\n  }\n\n  ref = container => {\n    this.container = container\n  }\n\n  render () {\n    const { display } = this.props\n    const style = {\n      width: '100%',\n      height: '100%',\n      display\n    }\n    return (\n      <div style={style}>\n        <div ref={this.ref} />\n      </div>\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { getSDK, isMediaStream, supportsWebKitPresentationMode } from '../utils'\nimport { canPlay, AUDIO_EXTENSIONS, HLS_EXTENSIONS } from '../patterns'\n\nimport p2pml, { Engine } from 'p2p-media-loader-hlsjs'\n\nconst HAS_NAVIGATOR = typeof navigator !== 'undefined'\nconst IS_IPAD_PRO = HAS_NAVIGATOR && navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1\nconst IS_IOS = HAS_NAVIGATOR && (/iPad|iPhone|iPod/.test(navigator.userAgent) || IS_IPAD_PRO) && !window.MSStream\nconst HLS_SDK_URL = 'https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js'\nconst HLS_GLOBAL = 'Hls'\n\nexport default class HlsJsP2P extends Component {\n  static displayName = 'HlsJsP2P'\n  static canPlay = canPlay.hlsjsp2p\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n    this.addListeners(this.player)\n    if (IS_IOS) {\n      this.player.load()\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.shouldUseAudio(this.props) !== this.shouldUseAudio(prevProps)) {\n      this.removeListeners(this.prevPlayer, prevProps.url)\n      this.addListeners(this.player)\n    }\n  }\n\n  componentWillUnmount () {\n    this.removeListeners(this.player)\n    if (this.hls) {\n      this.hls.destroy()\n    }\n  }\n\n  addListeners (player) {\n    const { url, playsinline } = this.props\n    player.addEventListener('play', this.onPlay)\n    player.addEventListener('waiting', this.onBuffer)\n    player.addEventListener('playing', this.onBufferEnd)\n    player.addEventListener('pause', this.onPause)\n    player.addEventListener('seeked', this.onSeek)\n    player.addEventListener('ended', this.onEnded)\n    player.addEventListener('error', this.onError)\n    player.addEventListener('enterpictureinpicture', this.onEnablePIP)\n    player.addEventListener('leavepictureinpicture', this.onDisablePIP)\n    player.addEventListener('webkitpresentationmodechanged', this.onPresentationModeChange)\n    \n    // if (!this.shouldUseHLS(url)) { // onReady is handled by hls.js\n    //   player.addEventListener('canplay', this.onReady)\n    // }\n    if (playsinline) {\n      player.setAttribute('playsinline', '')\n      player.setAttribute('webkit-playsinline', '')\n      player.setAttribute('x5-playsinline', '')\n    }\n  }\n\n  removeListeners (player, url) {\n    player.removeEventListener('canplay', this.onReady)\n    player.removeEventListener('play', this.onPlay)\n    player.removeEventListener('waiting', this.onBuffer)\n    player.removeEventListener('playing', this.onBufferEnd)\n    player.removeEventListener('pause', this.onPause)\n    player.removeEventListener('seeked', this.onSeek)\n    player.removeEventListener('ended', this.onEnded)\n    player.removeEventListener('error', this.onError)\n    player.removeEventListener('enterpictureinpicture', this.onEnablePIP)\n    player.removeEventListener('leavepictureinpicture', this.onDisablePIP)\n    player.removeEventListener('webkitpresentationmodechanged', this.onPresentationModeChange)\n    \n    // if (!this.shouldUseHLS(url)) { // onReady is handled by hls.js\n    //   player.removeEventListener('canplay', this.onReady)\n    // }\n  }\n\n  // Proxy methods to prevent listener leaks\n  onReady = (...args) => this.props.onReady(...args)\n  onPlay = (...args) => this.props.onPlay(...args)\n  onBuffer = (...args) => this.props.onBuffer(...args)\n  onBufferEnd = (...args) => this.props.onBufferEnd(...args)\n  onPause = (...args) => this.props.onPause(...args)\n  onEnded = (...args) => this.props.onEnded(...args)\n  onError = (...args) => this.props.onError(...args)\n  onEnablePIP = (...args) => this.props.onEnablePIP(...args)\n\n  onDisablePIP = e => {\n    const { onDisablePIP, playing } = this.props\n    onDisablePIP(e)\n    if (playing) {\n      this.play()\n    }\n  }\n\n  onPresentationModeChange = e => {\n    if (this.player && supportsWebKitPresentationMode(this.player)) {\n      const { webkitPresentationMode } = this.player\n      if (webkitPresentationMode === 'picture-in-picture') {\n        this.onEnablePIP(e)\n      } else if (webkitPresentationMode === 'inline') {\n        this.onDisablePIP(e)\n      }\n    }\n  }\n\n  onSeek = e => {\n    this.props.onSeek(e.target.currentTime)\n  }\n\n  shouldUseAudio (props) {\n    if (props.config.forceVideo) {\n      return false\n    }\n    if (props.config.attributes.poster) {\n      return false // Use <video> so that poster is shown\n    }\n    return AUDIO_EXTENSIONS.test(props.url) || props.config.forceAudio\n  }\n\n  shouldUseHLS (url) {\n    if (this.props.config.forceHLS) {\n      return true\n    }\n    if (IS_IOS) {\n      return false\n    }\n    return HLS_EXTENSIONS.test(url)\n  }\n\n  load (url) {\n    const { hlsVersion, hlsOptions } = this.props.config\n    if (this.hls) {\n      this.hls.destroy()\n    }\n\n    if (this.shouldUseHLS(url)) {\n      getSDK(HLS_SDK_URL.replace('VERSION', hlsVersion), HLS_GLOBAL).then(Hls => {\n        if(Engine.isSupported()) {\n          \n          var engine = new Engine();\n          this.hls = new Hls({\n            hlsOptions,\n            liveSyncDurationCount: 7,\n            loader: engine.createLoaderClass()\n          })\n          p2pml.initHlsJsPlayer(this.hls)\n\n        }else{\n          this.hls = new Hls(hlsOptions)\n        }\n        \n        this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n          this.props.onReady()\n        })\n        this.hls.on(Hls.Events.ERROR, (e, data) => {\n          this.props.onError(e, data, this.hls, Hls)\n        })\n\n        this.hls.loadSource(url)\n\n        this.hls.attachMedia(this.player)\n        this.props.onLoaded()\n      })\n    }\n\n    if (url instanceof Array) {\n      // When setting new urls (<source>) on an already loaded video,\n      // HTMLMediaElement.load() is needed to reset the media element\n      // and restart the media resource. Just replacing children source\n      // dom nodes is not enough\n      this.player.load()\n    } else if (isMediaStream(url)) {\n      try {\n        this.player.srcObject = url\n      } catch (e) {\n        this.player.src = window.URL.createObjectURL(url)\n      }\n    }\n  }\n\n  play () {\n    const promise = this.player.play()\n    if (promise) {\n      promise.catch(this.props.onError)\n    }\n  }\n\n  pause () {\n    this.player.pause()\n  }\n\n  stop () {\n    this.player.removeAttribute('src')\n  }\n\n  seekTo (seconds) {\n    this.player.currentTime = seconds\n  }\n\n  setVolume (fraction) {\n    this.player.volume = fraction\n  }\n\n  mute = () => {\n    this.player.muted = true\n  }\n\n  unmute = () => {\n    this.player.muted = false\n  }\n\n  enablePIP () {\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\n      this.player.requestPictureInPicture()\n    } else if (supportsWebKitPresentationMode(this.player) && this.player.webkitPresentationMode !== 'picture-in-picture') {\n      this.player.webkitSetPresentationMode('picture-in-picture')\n    }\n  }\n\n  disablePIP () {\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\n      document.exitPictureInPicture()\n    } else if (supportsWebKitPresentationMode(this.player) && this.player.webkitPresentationMode !== 'inline') {\n      this.player.webkitSetPresentationMode('inline')\n    }\n  }\n\n  setPlaybackRate (rate) {\n    this.player.playbackRate = rate\n  }\n\n  getDuration () {\n    if (!this.player) return null\n    const { duration, seekable } = this.player\n    // on iOS, live streams return Infinity for the duration\n    // so instead we use the end of the seekable timerange\n    if (duration === Infinity && seekable.length > 0) {\n      return seekable.end(seekable.length - 1)\n    }\n    return duration\n  }\n\n  getCurrentTime () {\n    if (!this.player) return null\n    return this.player.currentTime\n  }\n\n  getSecondsLoaded () {\n    if (!this.player) return null\n    const { buffered } = this.player\n    if (buffered.length === 0) {\n      return 0\n    }\n    const end = buffered.end(buffered.length - 1)\n    const duration = this.getDuration()\n    if (end > duration) {\n      return duration\n    }\n    return end\n  }\n\n  getSource (url) {\n    const useHLS = this.shouldUseHLS(url)\n    if (url instanceof Array || isMediaStream(url) || useHLS ) {\n      return undefined\n    }\n    return url\n  }\n\n  renderSourceElement = (source, index) => {\n    if (typeof source === 'string') {\n      return <source key={index} src={source} />\n    }\n    return <source key={index} {...source} />\n  }\n\n  renderTrack = (track, index) => {\n    return <track key={index} {...track} />\n  }\n\n  ref = player => {\n    if (this.player) {\n      // Store previous player to be used by removeListeners()\n      this.prevPlayer = this.player\n    }\n    this.player = player\n  }\n\n  render () {\n    const { url, playing, loop, controls, muted, config, width, height } = this.props\n    const useAudio = this.shouldUseAudio(this.props)\n    const Element = useAudio ? 'audio' : 'video'\n    const style = {\n      width: width === 'auto' ? width : '100%',\n      height: height === 'auto' ? height : '100%'\n    }\n    return (\n      <Element\n        ref={this.ref}\n        src={this.getSource(url)}\n        style={style}\n        preload='auto'\n        autoPlay={playing || undefined}\n        controls={controls}\n        muted={muted}\n        loop={loop}\n        {...config.attributes}\n      >\n        {url instanceof Array &&\n          url.map(this.renderSourceElement)}\n        {config.tracks.map(this.renderTrack)}\n      </Element>\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nimport { getSDK, isMediaStream, supportsWebKitPresentationMode } from '../utils'\nimport { canPlay, AUDIO_EXTENSIONS, HLS_EXTENSIONS, DASH_EXTENSIONS, FLV_EXTENSIONS } from '../patterns'\n\nconst HAS_NAVIGATOR = typeof navigator !== 'undefined'\nconst IS_IPAD_PRO = HAS_NAVIGATOR && navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1\nconst IS_IOS = HAS_NAVIGATOR && (/iPad|iPhone|iPod/.test(navigator.userAgent) || IS_IPAD_PRO) && !window.MSStream\nconst HLS_SDK_URL = 'https://cdn.jsdelivr.net/npm/hls.js@VERSION/dist/hls.min.js'\nconst HLS_GLOBAL = 'Hls'\nconst DASH_SDK_URL = 'https://cdnjs.cloudflare.com/ajax/libs/dashjs/VERSION/dash.all.min.js'\nconst DASH_GLOBAL = 'dashjs'\nconst FLV_SDK_URL = 'https://cdn.jsdelivr.net/npm/flv.js@VERSION/dist/flv.min.js'\nconst FLV_GLOBAL = 'flvjs'\nconst MATCH_DROPBOX_URL = /www\\.dropbox\\.com\\/.+/\nconst MATCH_CLOUDFLARE_STREAM = /https:\\/\\/watch\\.cloudflarestream\\.com\\/([a-z0-9]+)/\nconst REPLACE_CLOUDFLARE_STREAM = 'https://videodelivery.net/{id}/manifest/video.m3u8'\n\nexport default class FilePlayer extends Component {\n  static displayName = 'FilePlayer'\n  static canPlay = canPlay.file\n\n  componentDidMount () {\n    this.props.onMount && this.props.onMount(this)\n    this.addListeners(this.player)\n    if (IS_IOS) {\n      this.player.load()\n    }\n  }\n\n  componentDidUpdate (prevProps) {\n    if (this.shouldUseAudio(this.props) !== this.shouldUseAudio(prevProps)) {\n      this.removeListeners(this.prevPlayer, prevProps.url)\n      this.addListeners(this.player)\n    }\n  }\n\n  componentWillUnmount () {\n    this.removeListeners(this.player)\n    if (this.hls) {\n      this.hls.destroy()\n    }\n  }\n\n  addListeners (player) {\n    const { url, playsinline } = this.props\n    player.addEventListener('play', this.onPlay)\n    player.addEventListener('waiting', this.onBuffer)\n    player.addEventListener('playing', this.onBufferEnd)\n    player.addEventListener('pause', this.onPause)\n    player.addEventListener('seeked', this.onSeek)\n    player.addEventListener('ended', this.onEnded)\n    player.addEventListener('error', this.onError)\n    player.addEventListener('enterpictureinpicture', this.onEnablePIP)\n    player.addEventListener('leavepictureinpicture', this.onDisablePIP)\n    player.addEventListener('webkitpresentationmodechanged', this.onPresentationModeChange)\n    if (!this.shouldUseHLS(url)) { // onReady is handled by hls.js\n      player.addEventListener('canplay', this.onReady)\n    }\n    if (playsinline) {\n      player.setAttribute('playsinline', '')\n      player.setAttribute('webkit-playsinline', '')\n      player.setAttribute('x5-playsinline', '')\n    }\n  }\n\n  removeListeners (player, url) {\n    player.removeEventListener('canplay', this.onReady)\n    player.removeEventListener('play', this.onPlay)\n    player.removeEventListener('waiting', this.onBuffer)\n    player.removeEventListener('playing', this.onBufferEnd)\n    player.removeEventListener('pause', this.onPause)\n    player.removeEventListener('seeked', this.onSeek)\n    player.removeEventListener('ended', this.onEnded)\n    player.removeEventListener('error', this.onError)\n    player.removeEventListener('enterpictureinpicture', this.onEnablePIP)\n    player.removeEventListener('leavepictureinpicture', this.onDisablePIP)\n    player.removeEventListener('webkitpresentationmodechanged', this.onPresentationModeChange)\n    if (!this.shouldUseHLS(url)) { // onReady is handled by hls.js\n      player.removeEventListener('canplay', this.onReady)\n    }\n  }\n\n  // Proxy methods to prevent listener leaks\n  onReady = (...args) => this.props.onReady(...args)\n  onPlay = (...args) => this.props.onPlay(...args)\n  onBuffer = (...args) => this.props.onBuffer(...args)\n  onBufferEnd = (...args) => this.props.onBufferEnd(...args)\n  onPause = (...args) => this.props.onPause(...args)\n  onEnded = (...args) => this.props.onEnded(...args)\n  onError = (...args) => this.props.onError(...args)\n  onEnablePIP = (...args) => this.props.onEnablePIP(...args)\n\n  onDisablePIP = e => {\n    const { onDisablePIP, playing } = this.props\n    onDisablePIP(e)\n    if (playing) {\n      this.play()\n    }\n  }\n\n  onPresentationModeChange = e => {\n    if (this.player && supportsWebKitPresentationMode(this.player)) {\n      const { webkitPresentationMode } = this.player\n      if (webkitPresentationMode === 'picture-in-picture') {\n        this.onEnablePIP(e)\n      } else if (webkitPresentationMode === 'inline') {\n        this.onDisablePIP(e)\n      }\n    }\n  }\n\n  onSeek = e => {\n    this.props.onSeek(e.target.currentTime)\n  }\n\n  shouldUseAudio (props) {\n    if (props.config.forceVideo) {\n      return false\n    }\n    if (props.config.attributes.poster) {\n      return false // Use <video> so that poster is shown\n    }\n    return AUDIO_EXTENSIONS.test(props.url) || props.config.forceAudio\n  }\n\n  shouldUseHLS (url) {\n    if (this.props.config.forceHLS) {\n      return true\n    }\n    if (IS_IOS) {\n      return false\n    }\n    return HLS_EXTENSIONS.test(url) || MATCH_CLOUDFLARE_STREAM.test(url)\n  }\n\n  shouldUseDASH (url) {\n    return DASH_EXTENSIONS.test(url) || this.props.config.forceDASH\n  }\n\n  shouldUseFLV (url) {\n    return FLV_EXTENSIONS.test(url) || this.props.config.forceFLV\n  }\n\n  load (url) {\n    const { hlsVersion, hlsOptions, dashVersion, flvVersion } = this.props.config\n    if (this.hls) {\n      this.hls.destroy()\n    }\n    if (this.dash) {\n      this.dash.reset()\n    }\n    if (this.shouldUseHLS(url)) {\n      getSDK(HLS_SDK_URL.replace('VERSION', hlsVersion), HLS_GLOBAL).then(Hls => {\n        this.hls = new Hls(hlsOptions)\n        this.hls.on(Hls.Events.MANIFEST_PARSED, () => {\n          this.props.onReady()\n        })\n        this.hls.on(Hls.Events.ERROR, (e, data) => {\n          this.props.onError(e, data, this.hls, Hls)\n        })\n        if (MATCH_CLOUDFLARE_STREAM.test(url)) {\n          const id = url.match(MATCH_CLOUDFLARE_STREAM)[1]\n          this.hls.loadSource(REPLACE_CLOUDFLARE_STREAM.replace('{id}', id))\n        } else {\n          this.hls.loadSource(url)\n        }\n        this.hls.attachMedia(this.player)\n        this.props.onLoaded()\n      })\n    }\n    if (this.shouldUseDASH(url)) {\n      getSDK(DASH_SDK_URL.replace('VERSION', dashVersion), DASH_GLOBAL).then(dashjs => {\n        this.dash = dashjs.MediaPlayer().create()\n        this.dash.initialize(this.player, url, this.props.playing)\n        this.dash.on('error', this.props.onError)\n        if (parseInt(dashVersion) < 3) {\n          this.dash.getDebug().setLogToBrowserConsole(false)\n        } else {\n          this.dash.updateSettings({ debug: { logLevel: dashjs.Debug.LOG_LEVEL_NONE } })\n        }\n        this.props.onLoaded()\n      })\n    }\n    if (this.shouldUseFLV(url)) {\n      getSDK(FLV_SDK_URL.replace('VERSION', flvVersion), FLV_GLOBAL).then(flvjs => {\n        this.flv = flvjs.createPlayer({ type: 'flv', url })\n        this.flv.attachMediaElement(this.player)\n        this.flv.load()\n        this.props.onLoaded()\n      })\n    }\n\n    if (url instanceof Array) {\n      // When setting new urls (<source>) on an already loaded video,\n      // HTMLMediaElement.load() is needed to reset the media element\n      // and restart the media resource. Just replacing children source\n      // dom nodes is not enough\n      this.player.load()\n    } else if (isMediaStream(url)) {\n      try {\n        this.player.srcObject = url\n      } catch (e) {\n        this.player.src = window.URL.createObjectURL(url)\n      }\n    }\n  }\n\n  play () {\n    const promise = this.player.play()\n    if (promise) {\n      promise.catch(this.props.onError)\n    }\n  }\n\n  pause () {\n    this.player.pause()\n  }\n\n  stop () {\n    this.player.removeAttribute('src')\n    if (this.dash) {\n      this.dash.reset()\n    }\n  }\n\n  seekTo (seconds) {\n    this.player.currentTime = seconds\n  }\n\n  setVolume (fraction) {\n    this.player.volume = fraction\n  }\n\n  mute = () => {\n    this.player.muted = true\n  }\n\n  unmute = () => {\n    this.player.muted = false\n  }\n\n  enablePIP () {\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\n      this.player.requestPictureInPicture()\n    } else if (supportsWebKitPresentationMode(this.player) && this.player.webkitPresentationMode !== 'picture-in-picture') {\n      this.player.webkitSetPresentationMode('picture-in-picture')\n    }\n  }\n\n  disablePIP () {\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\n      document.exitPictureInPicture()\n    } else if (supportsWebKitPresentationMode(this.player) && this.player.webkitPresentationMode !== 'inline') {\n      this.player.webkitSetPresentationMode('inline')\n    }\n  }\n\n  setPlaybackRate (rate) {\n    this.player.playbackRate = rate\n  }\n\n  getDuration () {\n    if (!this.player) return null\n    const { duration, seekable } = this.player\n    // on iOS, live streams return Infinity for the duration\n    // so instead we use the end of the seekable timerange\n    if (duration === Infinity && seekable.length > 0) {\n      return seekable.end(seekable.length - 1)\n    }\n    return duration\n  }\n\n  getCurrentTime () {\n    if (!this.player) return null\n    return this.player.currentTime\n  }\n\n  getSecondsLoaded () {\n    if (!this.player) return null\n    const { buffered } = this.player\n    if (buffered.length === 0) {\n      return 0\n    }\n    const end = buffered.end(buffered.length - 1)\n    const duration = this.getDuration()\n    if (end > duration) {\n      return duration\n    }\n    return end\n  }\n\n  getSource (url) {\n    const useHLS = this.shouldUseHLS(url)\n    const useDASH = this.shouldUseDASH(url)\n    const useFLV = this.shouldUseFLV(url)\n    if (url instanceof Array || isMediaStream(url) || useHLS || useDASH || useFLV) {\n      return undefined\n    }\n    if (MATCH_DROPBOX_URL.test(url)) {\n      return url.replace('www.dropbox.com', 'dl.dropboxusercontent.com')\n    }\n    return url\n  }\n\n  renderSourceElement = (source, index) => {\n    if (typeof source === 'string') {\n      return <source key={index} src={source} />\n    }\n    return <source key={index} {...source} />\n  }\n\n  renderTrack = (track, index) => {\n    return <track key={index} {...track} />\n  }\n\n  ref = player => {\n    if (this.player) {\n      // Store previous player to be used by removeListeners()\n      this.prevPlayer = this.player\n    }\n    this.player = player\n  }\n\n  render () {\n    const { url, playing, loop, controls, muted, config, width, height } = this.props\n    const useAudio = this.shouldUseAudio(this.props)\n    const Element = useAudio ? 'audio' : 'video'\n    const style = {\n      width: width === 'auto' ? width : '100%',\n      height: height === 'auto' ? height : '100%'\n    }\n    return (\n      <Element\n        ref={this.ref}\n        src={this.getSource(url)}\n        style={style}\n        preload='auto'\n        autoPlay={playing || undefined}\n        controls={controls}\n        muted={muted}\n        loop={loop}\n        {...config.attributes}\n      >\n        {url instanceof Array &&\n          url.map(this.renderSourceElement)}\n        {config.tracks.map(this.renderTrack)}\n      </Element>\n    )\n  }\n}\n","import React, { Component } from 'react'\n\nconst ICON_SIZE = '64px'\n\nconst cache = {}\n\nexport default class Preview extends Component {\n  mounted = false\n  state = {\n    image: null\n  }\n\n  componentDidMount () {\n    this.mounted = true\n    this.fetchImage(this.props)\n  }\n\n  componentDidUpdate (prevProps) {\n    const { url, light } = this.props\n    if (prevProps.url !== url || prevProps.light !== light) {\n      this.fetchImage(this.props)\n    }\n  }\n\n  componentWillUnmount () {\n    this.mounted = false\n  }\n\n  fetchImage ({ url, light }) {\n    if (typeof light === 'string') {\n      this.setState({ image: light })\n      return\n    }\n    if (cache[url]) {\n      this.setState({ image: cache[url] })\n      return\n    }\n    this.setState({ image: null })\n    return window.fetch(`https://noembed.com/embed?url=${url}`)\n      .then(response => response.json())\n      .then(data => {\n        if (data.thumbnail_url && this.mounted) {\n          const image = data.thumbnail_url.replace('height=100', 'height=480')\n          this.setState({ image })\n          cache[url] = image\n        }\n      })\n  }\n\n  handleKeyPress = e => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      this.props.onClick()\n    }\n  }\n\n  render () {\n    const { onClick, playIcon } = this.props\n    const { image } = this.state\n    const flexCenter = {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    }\n    const styles = {\n      preview: {\n        width: '100%',\n        height: '100%',\n        backgroundImage: image ? `url(${image})` : undefined,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        cursor: 'pointer',\n        ...flexCenter\n      },\n      shadow: {\n        background: 'radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)',\n        borderRadius: ICON_SIZE,\n        width: ICON_SIZE,\n        height: ICON_SIZE,\n        ...flexCenter\n      },\n      playIcon: {\n        borderStyle: 'solid',\n        borderWidth: '16px 0 16px 26px',\n        borderColor: 'transparent transparent transparent white',\n        marginLeft: '7px'\n      }\n    }\n    const defaultPlayIcon = (\n      <div style={styles.shadow} className='react-player__shadow'>\n        <div style={styles.playIcon} className='react-player__play-icon' />\n      </div>\n    )\n    return (\n      <div\n        style={styles.preview}\n        className='react-player__preview'\n        onClick={onClick}\n        tabIndex={0}\n        onKeyPress={this.handleKeyPress}\n      >\n        {playIcon || defaultPlayIcon}\n      </div>\n    )\n  }\n}\n"],"sourceRoot":""}